(()=>{function B(s,r){let i=/(\r\n|\r|\n)/g,o=/{{\s*(.+?)\s*}}/g,h=/^each\s+(.*)\s+as\s+(.*)$/,f=/^if\s+(.*)$/,d=/^else if\s+(.*)$/;function u(v){let A=M=>M.replaceAll("@","this."),T=`
      let _strings = [], _sequence = [], _values = [];

      function htmlEscape(text) {
        if (typeof text === 'string') {
          return text
            .replaceAll("'", '&apos;')
            .replaceAll('"', '&quot;')
            .replaceAll('<', '&lt;')
            .replaceAll('>', '&gt;')
        } else {
          return text
        }
      }

      _sequence.push('${v.trim().replace(i,"\\n").replace(o,(M,b)=>{if(b=b.replace(/^[#:]/,""),b.startsWith("each")||b.startsWith("for")){let S=b.split(/\s+/);if(S.shift()==="for"){let q=S.pop();S.pop(),b=`each ${q} as ${S.join(" ")}`}let j=h.exec(b);if(j)return j[1]=A(j[1]),`');
 (!Array.isArray(${j[1]}) ? Array.from(Object.entries(${j[1]} || []), ([key, value]) => [key, value]) : ${j[1]}).forEach((${j[2]}) => { _sequence.push('`}else if(b.startsWith("if")){let S=f.exec(b);if(S)return S[1]=A(S[1]),`');
 if (${S[1]}) { _sequence.push('`}else if(b.startsWith("else if")){let S=d.exec(b);if(S)return S[1]=A(S[1]),`');
 } else if (${S[1]}) { _sequence.push('`}else{if(b==="else")return`');
 } else { _sequence.push('`;if(b==="/each"||b==="/for")return`');
 }); _sequence.push('`;if(b==="/if")return`');
 } _sequence.push('`}let R=b.split(/^\@html\s+/);return R[1]?b=A(R[1]):b=`htmlEscape(${A(b)})`,`');
 _strings.push(_sequence.join(''));
 _sequence = [];
 _values.push(${b});
 _sequence.push('`})}');
      _strings.push(_sequence.join(''));
      return [_strings, _values];
    `;return new Function("_data",T)}function m(v){let A=u(v);return()=>{let[T,M]=A.bind(r)();return T.reduce((b,R,S)=>b+M[S-1]+R)}}function g(v){let A=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return v.replace(/<([a-z-]+)\b([^>]*)\/>/g,(T,M,b)=>A.has(M)?T:`<${M}${b}></${M}>`)}return s=g(s),m(s)().replace(/\n\s*\n/g,`
`)}var X=function(){"use strict";let s=new Set,r={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:M,afterNodeAdded:M,beforeNodeMorphed:M,afterNodeMorphed:M,beforeNodeRemoved:M,afterNodeRemoved:M,beforeAttributeUpdated:M},head:{style:"merge",shouldPreserve:function(e){return e.getAttribute("im-preserve")==="true"},shouldReAppend:function(e){return e.getAttribute("im-re-append")==="true"},shouldRemove:M,afterHeadMorphed:M}};function i(e,t,n={}){e instanceof Document&&(e=e.documentElement),typeof t=="string"&&(t=te(t));let l=re(t),a=R(e,l,n);return o(e,l,a)}function o(e,t,n){if(n.head.block){let l=e.querySelector("head"),a=t.querySelector("head");if(l&&a){let c=A(a,l,n);Promise.all(c).then(function(){o(e,t,Object.assign(n,{head:{block:!1,ignore:!0}}))});return}}if(n.morphStyle==="innerHTML")return d(t,e,n),e.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let l=ie(t,e,n),a=l?.previousSibling,c=l?.nextSibling,p=f(e,l,n);return l?ne(a,p,c):[]}else throw"Do not understand how to morph style "+n.morphStyle}function h(e,t){return t.ignoreActiveValue&&e===document.activeElement&&e!==document.body}function f(e,t,n){if(!(n.ignoreActive&&e===document.activeElement))return t==null?n.callbacks.beforeNodeRemoved(e)===!1?e:(e.remove(),n.callbacks.afterNodeRemoved(e),null):j(e,t)?(n.callbacks.beforeNodeMorphed(e,t)===!1||(e instanceof HTMLHeadElement&&n.head.ignore||(e instanceof HTMLHeadElement&&n.head.style!=="morph"?A(t,e,n):(m(t,e,n),h(e,n)||d(t,e,n))),n.callbacks.afterNodeMorphed(e,t)),e):n.callbacks.beforeNodeRemoved(e)===!1||n.callbacks.beforeNodeAdded(t)===!1?e:(e.parentElement.replaceChild(t,e),n.callbacks.afterNodeAdded(t),n.callbacks.afterNodeRemoved(e),t)}function d(e,t,n){let l=e.firstChild,a=t.firstChild,c;for(;l;){if(c=l,l=c.nextSibling,a==null){if(n.callbacks.beforeNodeAdded(c)===!1)return;t.appendChild(c),n.callbacks.afterNodeAdded(c),C(n,c);continue}if(S(c,a,n)){f(a,c,n),a=a.nextSibling,C(n,c);continue}let p=x(e,t,c,a,n);if(p){a=q(a,p,n),f(p,c,n),C(n,c);continue}let E=ee(e,t,c,a,n);if(E){a=q(a,E,n),f(E,c,n),C(n,c);continue}if(n.callbacks.beforeNodeAdded(c)===!1)return;t.insertBefore(c,a),n.callbacks.afterNodeAdded(c),C(n,c)}for(;a!==null;){let p=a;a=a.nextSibling,W(p,n)}}function u(e,t,n,l){return e==="value"&&l.ignoreActiveValue&&t===document.activeElement?!0:l.callbacks.beforeAttributeUpdated(e,t,n)===!1}function m(e,t,n){let l=e.nodeType;if(l===1){let a=e.attributes,c=t.attributes;for(let p of a)u(p.name,t,"update",n)||t.getAttribute(p.name)!==p.value&&t.setAttribute(p.name,p.value);for(let p=c.length-1;0<=p;p--){let E=c[p];u(E.name,t,"remove",n)||e.hasAttribute(E.name)||t.removeAttribute(E.name)}}(l===8||l===3)&&t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue),h(t,n)||v(e,t,n)}function g(e,t,n,l){if(e[n]!==t[n]){let a=u(n,t,"update",l);a||(t[n]=e[n]),e[n]?a||t.setAttribute(n,e[n]):u(n,t,"remove",l)||t.removeAttribute(n)}}function v(e,t,n){if(e instanceof HTMLInputElement&&t instanceof HTMLInputElement&&e.type!=="file"){let l=e.value,a=t.value;g(e,t,"checked",n),g(e,t,"disabled",n),e.hasAttribute("value")?l!==a&&(u("value",t,"update",n)||(t.setAttribute("value",l),t.value=l)):u("value",t,"remove",n)||(t.value="",t.removeAttribute("value"))}else if(e instanceof HTMLOptionElement)g(e,t,"selected",n);else if(e instanceof HTMLTextAreaElement&&t instanceof HTMLTextAreaElement){let l=e.value,a=t.value;if(u("value",t,"update",n))return;l!==a&&(t.value=l),t.firstChild&&t.firstChild.nodeValue!==l&&(t.firstChild.nodeValue=l)}}function A(e,t,n){let l=[],a=[],c=[],p=[],E=n.head.style,H=new Map;for(let y of e.children)H.set(y.outerHTML,y);for(let y of t.children){let k=H.has(y.outerHTML),O=n.head.shouldReAppend(y),N=n.head.shouldPreserve(y);k||N?O?a.push(y):(H.delete(y.outerHTML),c.push(y)):E==="append"?O&&(a.push(y),p.push(y)):n.head.shouldRemove(y)!==!1&&a.push(y)}p.push(...H.values());let G=[];for(let y of p){let k=document.createRange().createContextualFragment(y.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(k)!==!1){if(k.href||k.src){let O=null,N=new Promise(function(fe){O=fe});k.addEventListener("load",function(){O()}),G.push(N)}t.appendChild(k),n.callbacks.afterNodeAdded(k),l.push(k)}}for(let y of a)n.callbacks.beforeNodeRemoved(y)!==!1&&(t.removeChild(y),n.callbacks.afterNodeRemoved(y));return n.head.afterHeadMorphed(t,{added:l,kept:c,removed:a}),G}function T(){}function M(){}function b(e){let t={};return Object.assign(t,r),Object.assign(t,e),t.callbacks={},Object.assign(t.callbacks,r.callbacks),Object.assign(t.callbacks,e.callbacks),t.head={},Object.assign(t.head,r.head),Object.assign(t.head,e.head),t}function R(e,t,n){return n=b(n),{target:e,newContent:t,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:ae(e,t),deadIds:new Set,callbacks:n.callbacks,head:n.head}}function S(e,t,n){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName?e.id!==""&&e.id===t.id?!0:I(n,e,t)>0:!1}function j(e,t){return e==null||t==null?!1:e.nodeType===t.nodeType&&e.tagName===t.tagName}function q(e,t,n){for(;e!==t;){let l=e;e=e.nextSibling,W(l,n)}return C(n,t),t.nextSibling}function x(e,t,n,l,a){let c=I(a,n,t),p=null;if(c>0){let E=l,H=0;for(;E!=null;){if(S(n,E,a))return E;if(H+=I(a,E,e),H>c)return null;E=E.nextSibling}}return p}function ee(e,t,n,l,a){let c=l,p=n.nextSibling,E=0;for(;c!=null;){if(I(a,c,e)>0)return null;if(j(n,c))return c;if(j(p,c)&&(E++,p=p.nextSibling,E>=2))return null;c=c.nextSibling}return c}function te(e){let t=new DOMParser,n=e.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){let l=t.parseFromString(e,"text/html");if(n.match(/<\/html>/))return l.generatedByIdiomorph=!0,l;{let a=l.firstChild;return a?(a.generatedByIdiomorph=!0,a):null}}else{let a=t.parseFromString("<body><template>"+e+"</template></body>","text/html").body.querySelector("template").content;return a.generatedByIdiomorph=!0,a}}function re(e){if(e==null)return document.createElement("div");if(e.generatedByIdiomorph)return e;if(e instanceof Node){let t=document.createElement("div");return t.append(e),t}else{let t=document.createElement("div");for(let n of[...e])t.append(n);return t}}function ne(e,t,n){let l=[],a=[];for(;e!=null;)l.push(e),e=e.previousSibling;for(;l.length>0;){let c=l.pop();a.push(c),t.parentElement.insertBefore(c,t)}for(a.push(t);n!=null;)l.push(n),a.push(n),n=n.nextSibling;for(;l.length>0;)t.parentElement.insertBefore(l.pop(),t.nextSibling);return a}function ie(e,t,n){let l;l=e.firstChild;let a=l,c=0;for(;l;){let p=se(l,t,n);p>c&&(a=l,c=p),l=l.nextSibling}return a}function se(e,t,n){return j(e,t)?.5+I(n,e,t):0}function W(e,t){C(t,e),t.callbacks.beforeNodeRemoved(e)!==!1&&(e.remove(),t.callbacks.afterNodeRemoved(e))}function le(e,t){return!e.deadIds.has(t)}function oe(e,t,n){return(e.idMap.get(n)||s).has(t)}function C(e,t){let n=e.idMap.get(t)||s;for(let l of n)e.deadIds.add(l)}function I(e,t,n){let l=e.idMap.get(t)||s,a=0;for(let c of l)le(e,c)&&oe(e,c,n)&&++a;return a}function U(e,t){let n=e.parentElement,l=e.querySelectorAll("[id]");for(let a of l){let c=a;for(;c!==n&&c!=null;){let p=t.get(c);p==null&&(p=new Set,t.set(c,p)),p.add(a.id),c=c.parentElement}}}function ae(e,t){let n=new Map;return U(e,n),U(t,n),n}return{morph:i,defaults:r}}();var ue={data:""},Z=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||ue,ce=s=>{let r=Z(s),i=r.data;return r.data="",i},de=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,he=/\/\*[^]*?\*\/|  +/g,Y=/\n+/g,w=(s,r)=>{let i="",o="",h="";for(let f in s){let d=s[f];f[0]=="@"?f[1]=="i"?i=f+" "+d+";":o+=f[1]=="f"?w(d,f):f+"{"+w(d,f[1]=="k"?"":r)+"}":typeof d=="object"?o+=w(d,r?r.replace(/([^,])+/g,u=>f.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,u):u?u+" "+m:m)):f):d!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),h+=w.p?w.p(f,d):f+":"+d+";")}return i+(r&&h?r+"{"+h+"}":h)+o},L={},J=s=>{if(typeof s=="object"){let r="";for(let i in s)r+=i+J(s[i]);return r}return s},pe=(s,r,i,o,h)=>{let f=J(s),d=L[f]||(L[f]=(m=>{let g=0,v=11;for(;g<m.length;)v=101*v+m.charCodeAt(g++)>>>0;return"go"+v})(f));if(!L[d]){let m=f!==s?s:(g=>{let v,A,T=[{}];for(;v=de.exec(g.replace(he,""));)v[4]?T.shift():v[3]?(A=v[3].replace(Y," ").trim(),T.unshift(T[0][A]=T[0][A]||{})):T[0][v[1]]=v[2].replace(Y," ").trim();return T[0]})(s);L[d]=w(h?{["@keyframes "+d]:m}:m,i?"":"."+d)}let u=i&&L.g?L.g:null;return i&&(L.g=L[d]),((m,g,v,A)=>{A?g.data=g.data.replace(A,m):g.data.indexOf(m)===-1&&(g.data=v?m+g.data:g.data+m)})(L[d],r,o,u),d},me=(s,r,i)=>s.reduce((o,h,f)=>{let d=r[f];if(d&&d.call){let u=d(i),m=u&&u.props&&u.props.className||/^go/.test(u)&&u;d=m?"."+m:u&&typeof u=="object"?u.props?"":w(u,""):u===!1?"":u}return o+h+(d??"")},"");function F(s){let r=this||{},i=s.call?s(r.p):s;return pe(i.unshift?i.raw?me(i,[].slice.call(arguments,1),r.p):i.reduce((o,h)=>Object.assign(o,h&&h.call?h(r.p):h),{}):i,Z(r.target),r.g,r.o,r.k)}var K,P,V,be=F.bind({g:1}),ge=F.bind({k:1});function ve(s,r,i,o){w.p=r,K=s,P=i,V=o}function ye(s,r){let i=this||{};return function(){let o=arguments;function h(f,d){let u=Object.assign({},f),m=u.className||h.className;i.p=Object.assign({theme:P&&P()},u),i.o=/ *go\d+/.test(m),u.className=F.apply(i,o)+(m?" "+m:""),r&&(u.ref=d);let g=s;return s[0]&&(g=u.as||s,delete u.as),V&&g[0]&&V(u),K(g,u)}return r?r(h):h}}var Q={css:F,extractCss:ce,glob:be,keyframes:ge,setup:ve,styled:ye};function D(s,r={},i){if(typeof r=="string"&&([r,i]=[i,r],r||={}),r instanceof Node&&(i=r,r={}),Array.isArray(s)&&(i=s,s="div"),(typeof r!="object"||Array.isArray(r))&&(i=r,r={}),s.includes(".")){let h=s.split(".");s=h.shift()||"div";let f=h.join(" ");r.class?r.class+=` ${f}`:r.class=f}let o=document.createElement(s);for(let[h,f]of Object.entries(r))if(typeof f=="function")o[h]=f.bind(this);else{let d=String(f).replaceAll("$$.",this.fezHtmlRoot);o.setAttribute(h,d)}if(i)if(Array.isArray(i))for(let h of i)o.appendChild(h);else i instanceof Node?o.appendChild(i):o.innerHTML=String(i);return o}var z=class{static __objects=[];static find(r,i){return _.find(r,i)}static fnv1(r){var i,o,h,f,d,u;for(i=2166136261,o=16777619,h=i,f=d=0,u=r.length-1;0<=u?d<=u:d>=u;f=0<=u?++d:--d)h^=r.charCodeAt(f),h*=o;return h.toString(36).replaceAll("-","")}static getProps(r){let i={};for(let o of r.attributes)i[o.name]=o.value;return i}static formData(r){let i=new FormData(r.closest("form")),o={};return i.forEach((h,f)=>{o[f]=h}),o}static fastBind(){return!1}constructor(){this.__int={}}n=D;get fezHtmlRoot(){return`Fez.find(this, "${this.fezName}").`}get isAttached(){return this.root.parentNode?!0:(Object.keys(this.__int).forEach(r=>{clearInterval(this.__int[r])}),this.root.fez=null,this.root=null,!1)}prop(r){let i=this.oldRoot[r]||this.props[r];return typeof i=="function"&&(i=i.bind(this.root)),i}copy(){for(let r of Array.from(arguments)){let i=this.props[r];if(i!==void 0){if(r=="class"){let o=this.root.getAttribute(r,i);o&&(i=[o,i].join(" "))}typeof i=="string"?this.root.setAttribute(r,i):this.root[r]=i}}}slot(r,i){i||=document.createElement("template");let o=i.nodeName=="SLOT";for(;r.firstChild;)o?i.parentNode.insertBefore(r.lastChild,i.nextSibling):i.appendChild(r.firstChild);return o?i.parentNode.removeChild(i):r.innerHTML="",i}style(){console.error("call Fez static style")}connect(){console.error('Fez is missing "connect" method.',this.root)}parseHtml(r,i){if(typeof r=="object"&&(r=r[0]),r=r.replaceAll("$$.",this.fezHtmlRoot.replaceAll('"',"&quot;")),r.includes("{{"))try{r=B(r,this)}catch(o){console.error(`Fez stache template error in "${this.fezName}"`,o)}return r}html(r,i){typeof i>"u"&&(i=r,r=this.root),typeof r=="string"&&(r=this.find(r));let o=document.createElement("div");Array.isArray(i)?i[0]instanceof Node?i.forEach(f=>{o.appendChild(f)}):i=i.join(""):typeof i=="string"?o.innerHTML=this.parseHtml(i):o.appendChild(i);let h=o.querySelector("slot");h&&this.slot(r,h),_.morphdom(r,o),r.querySelectorAll("*[fez-this]").forEach(f=>{let d=f.getAttribute("fez-this").replace(/[^\w\.\[\]]/,"");this[d]=f}),r.querySelectorAll("*[fez-use]").forEach(f=>{let d=f.getAttribute("fez-use");this[d](f)})}setInterval(r,i,o){return typeof r=="number"&&([i,r]=[r,i]),o||=this.class.fnv1(String(r)),clearInterval(this.__int[o]),this.__int[o]=setInterval(()=>{this.isAttached&&r()},i),this.__int[o]}css(r,i){let o=_.css(r);return i&&this.root.classList.add(o),o}find(r){return this.root.querySelector(r)}val(r,i){let o=this.find(".time");["INPUT","TEXTAREA","SELECT"].includes(o.nodeName)?o.value=i:o.innerHTML=new Date}formData(r){return this.class.formData(r||this.root)}attr(r,i){return typeof i>"u"?this.root.getAttribute(r):(this.root.setAttribute(r,i),i)}childNodes(r){let i=Array.from(this.root.querySelectorAll(":scope > *"));if(r)i.forEach(r);else return i}fezRegister(){this.class.css&&(this.class.css.includes(":")&&(this.class.css=_.css(this.class.css)),this.root.classList.add(this.class.css)),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(i=>i!=="constructor"&&typeof this[i]=="function").forEach(i=>this[i]=this[i].bind(this))}};setInterval(()=>{z.__objects=z.__objects.filter(s=>s.isAttached)},1e4);var Ae=new MutationObserver((s,r)=>{for(let i of s)if(i.type==="attributes"){let o=i.target.fez,h=i.attributeName,f=i.target.getAttribute(h);o.props[h]=f,o.onPropsChange(h,f)}}),_=(s,r)=>{function i(){let h=this.parentNode;if(h){let f=typeof r.nodeName=="function"?r.nodeName(this):r.nodeName,d=document.createElement(f||"div");d.classList.add("fez"),d.classList.add(`fez-${s}`),h.replaceChild(d,this);let u=new r;u.oldRoot=this,u.fezName=s,u.root=d,u.props=r.getProps(this),u.class=r,u.slot(this,d),d.fez=u,window.$&&(u.$root=$(d)),u.props.id&&d.setAttribute("id",u.props.id),u.fezRegister(),u.connect(u.props),r.__objects.push(u),u.onPropsChange&&Ae.observe(d,{attributes:!0})}}function o(h){return typeof r.fastBind=="function"?r.fastBind(h):r.fastBind}if(!s)return z;if(typeof r!="function")return _.find(s,r);customElements.define(s,class extends HTMLElement{connectedCallback(){this.firstChild||o(this)?(_.info(`fast bind: ${s}`),i.bind(this)()):(_.info(`slow bind: ${s}`),window.requestAnimationFrame(()=>{i.bind(this)()}))}})};_.find=(s,r)=>{typeof s=="string"&&(s=document.body.querySelector(s)),typeof s.val=="function"&&(s=s[0]);let i=r?`.fez-${r}`:".fez";return s.closest(i).fez};_.globalCss=s=>{let r=_.css(s);return document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(r)}),r};_.css=s=>Q.css(s);_.info=s=>{window.DEBUG&&console.log(`Fez: ${s}`)};_.morphdom=(s,r,i={})=>{i.childrenOnly===void 0&&(i.childrenOnly=!0),X.morph(s,r,{morphStyle:"innerHTML"})};_.htmlEscape=s=>s.replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;");window.Fez=_;window.FezBase=z;})();
