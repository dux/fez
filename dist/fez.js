(()=>{function B(r,t={},e){if(typeof t=="string"&&([t,e]=[e,t],t||={}),t instanceof Node&&(e=t,t={}),Array.isArray(r)&&(e=r,r="div"),(typeof t!="object"||Array.isArray(t))&&(e=t,t={}),r.includes(".")){let f=r.split(".");r=f.shift()||"div";let a=f.join(" ");t.class?t.class+=` ${a}`:t.class=a}let l=document.createElement(r);for(let[f,a]of Object.entries(t))if(typeof a=="function")l[f]=a.bind(this);else{let c=String(a).replaceAll("$$.",this.fezHtmlRoot);l.setAttribute(f,c)}if(e)if(Array.isArray(e))for(let f of e)l.appendChild(f);else e instanceof Node?l.appendChild(e):l.innerHTML=String(e);return l}function he(r,t){if(r=r.replaceAll("#html","@html").replaceAll("@","this."),r.startsWith("#if")||r.startsWith("if"))return t.push(!1),r=r.replace(/^#?if/,""),`\${ ${r} ? \``;if(r.startsWith("#block")||r.startsWith("block")){let e=r.split("block ",2),l=r.split("block:",2);return e[1]?"${(this.fezBlocks."+e[1]+" = `":"${ this.fezBlocks."+l[1]+" }"}else{if(r=="/block")return"`) && ''}";if(r.startsWith("#for")||r.startsWith("for")){r=r.replace(/^#?for/,"");let e=r.split(" in ",2);return"${"+e[1]+".map(("+e[0]+")=>`"}else if(r.startsWith("#each")||r.startsWith("each")){r=r.replace(/^#?each/,"");let e=r.split(" as ",2);return"${"+e[0]+".map(("+e[1]+")=>`"}else{if(r==":else"||r=="else")return t[t.length-1]=!0,"` : `";if(r=="/if")return t.pop()?"`}":"` : ``}";if(r=="/for"||r=="/each")return'`).join("")}';{let e="this.html ";return r.startsWith(e)?r=r.replace(e,""):r=`Fez.htmlEscape(${r})`,"${"+r+"}"}}}}function R(r,t={}){let e=[],l=r.replace(/(.?){{(.*?)}}/g,(f,a,c)=>{c=c.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&");let h=he(c,e);return a=="="?`="${h}"`:`${a}${h}`});l="`"+l+"`";try{let f=new Function(`return ${l}`);return c=>{try{return f.bind(c)()}catch(h){let m=`FEZ template runtime error: ${h.message}`;return console.error(m),console.log(r),`${m} (check console for template info)`}}}catch(f){console.error(`FEZ template compile error: ${f.message}`),console.log(r.trim()),console.log("---"),console.log(l)}}var L=class{static __objects=[];static getProps(t,e){let l={};for(let f of t.attributes)l[f.name]=f.value;if(l["data-props"]){let f=l["data-props"];f[0]!="{"&&(f=decodeURIComponent(f)),l=JSON.parse(f)}if(l["data-json-template"]){let f=e.previousSibling?.textContent;f&&(l=JSON.parse(f))}for(let[f,a]of Object.entries(l))if(f[0]==":"){delete l[f];let c=t.closest(".fez")?.fez||window,h=new Function(`return (${a})`).bind(c)();l[f.replace(":","")]=h}return l}static formData(t){let e=t.closest("form")||t.querySelector("form"),l=new FormData(e),f={};return l.forEach((a,c)=>{f[c]=a}),f}static fastBind(){return!1}static nodeName="div";constructor(){}n=B;get fezHtmlRoot(){return this.props.id?`Fez.find("#${this.props.id}").`:`Fez.find(this, "${this.fezName}").`}get isConnected(){return this.root?.isConnected?!0:(this._setIntervalCache||={},Object.keys(this._setIntervalCache).forEach(t=>{clearInterval(this._setIntervalCache[t])}),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0,!1)}prop(t){let e=this.oldRoot[t]||this.props[t];return typeof e=="function"&&(e=e.bind(this.root)),e}copy(){for(let t of Array.from(arguments)){let e=this.props[t];if(e!==void 0){if(t=="class"){let l=this.root.getAttribute(t,e);l&&(e=[l,e].join(" "))}typeof e=="string"?this.root.setAttribute(t,e):this.root[t]=e}}}slot(t,e){e||=document.createElement("template");let l=e.nodeName=="SLOT";for(;t.firstChild;)l?e.parentNode.insertBefore(t.lastChild,e.nextSibling):e.appendChild(t.firstChild);return l?e.parentNode.removeChild(e):t.innerHTML="",e}style(){console.error("call Fez static style")}connect(){}afterConnect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}publish=Fez.publish;fezBlocks={};parseHtml(t){let e=this.fezHtmlRoot.replaceAll('"',"&quot;");return t=t.replaceAll("$$.",e).replace(/(.)@(\w+[\.\(])/g,(l,f,a)=>f=="@"?`@${a}`:`${f}${e}${a}`).replace(/([^\w\.])fez\./g,`$1${e}`).replace(/>\s+</g,"><"),t}nextTick(t,e){e?(this._nextTicks||={},this._nextTicks[e]||=window.requestAnimationFrame(()=>{t.bind(this)(),this._nextTicks[e]=null},e)):window.requestAnimationFrame(t.bind(this))}render(t){if(t||=this?.class?.fezHtmlFunc,!t)return;this.beforeRender();let e=document.createElement(this.class.nodeName||"div"),l;Array.isArray(t)?t[0]instanceof Node?t.forEach(c=>e.appendChild(c)):l=t.join(""):typeof t=="string"?l=R(t)(this):typeof t=="function"&&(l=t(this)),l&&(e.innerHTML=this.parseHtml(l));let f=e.querySelector("slot");f&&(this.slot(this.root,f.parentNode),f.parentNode.removeChild(f));let a=this.find(".fez-slot");if(a){let c=e.querySelector(".fez-slot");c&&c.parentNode.replaceChild(a,c)}Fez.morphdom(this.root,e),this.renderFezPostProcess(),this.afterRender()}renderFezPostProcess(){let t=(e,l)=>{this.root.querySelectorAll(`*[${e}]`).forEach(f=>{let a=f.getAttribute(e);f.removeAttribute(e),a&&l.bind(this)(a,f)})};t("fez-this",(e,l)=>{new Function("n",`this.${e} = n`).bind(this)(l)}),t("fez-use",(e,l)=>{let f=this[e];typeof f=="function"?f(l):console.error(`Fez error: "${e}" is not a function in ${this.fezName}`)}),t("fez-class",e=>{let l=e.split(/\s+/),f=l.pop();l.forEach(a=>n.classList.add(a)),f&&setTimeout(()=>{n.classList.add(f)},300)}),t("fez-bind",(e,l)=>{let f=new Function(`return this.${e}`).bind(this)(),a=l.type.toLowerCase()=="checkbox",c=["SELECT"].includes(l.nodeName)||a?"onchange":"onkeyup";l.setAttribute(c,`${this.fezHtmlRoot}${e} = this.${a?"checked":"value"}`),this.val(l,f)})}refresh(t){if(alert("NEEDS FIX and remove htmlTemplate"),t){let e=document.createElement("div");e.innerHTML=this.class.htmlTemplate;let l=e.querySelector(t).innerHTML;this.render(t,l)}else this.render()}setInterval(t,e,l){return typeof t=="number"&&([e,t]=[t,e]),l||=Fez.fnv1(String(t)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[l]),this._setIntervalCache[l]=setInterval(()=>{this.isConnected&&t()},e),this._setIntervalCache[l]}find(t){return typeof t=="string"?this.root.querySelector(t):t}val(t,e){let l=this.find(t);if(l)if(["INPUT","TEXTAREA","SELECT"].includes(l.nodeName))if(typeof e<"u")l.type=="checkbox"?l.checked=!!e:l.value=e;else return l.value;else if(typeof e<"u")l.innerHTML=e;else return l.innerHTML}formData(t){return this.class.formData(t||this.root)}attr(t,e){return typeof e>"u"?this.root.getAttribute(t):(this.root.setAttribute(t,e),e)}childNodes(t){let e=Array.from(this.root.querySelectorAll(":scope > *"));return t&&(e=e.map(t)),e}subscribe(t,e){Fez._subs||={},Fez._subs[t]||=[],Fez._subs[t]=Fez._subs[t].filter(l=>l[0].isConnected),Fez._subs[t].push([this,e])}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.reactiveStore(),this.data||={},this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(e=>e!=="constructor"&&typeof this[e]=="function").forEach(e=>this[e]=this[e].bind(this))}fezHide(){let t=this.root,e=this.root.parentNode,l=document.createDocumentFragment();for(;t.firstChild;)l.appendChild(t.firstChild);return t.parentNode.replaceChild(l,t),this.root=e,this.childNodes()}reactiveStore(t,e){t||={},e||=(f,a,c)=>{this.nextTick(this.render,"render")},e.bind(this);function l(f,a){return typeof f!="object"||f===null?f:new Proxy(f,{set(c,h,m,b){if(Reflect.get(c,h,b)!==m){typeof m=="object"&&m!==null&&(m=l(m,a));let z=Reflect.set(c,h,m,b);return a(c,h,m),z}return!0},get(c,h,m){let b=Reflect.get(c,h,m);return typeof b=="object"&&b!==null?l(b,a):b}})}return l(t,e)}};var me={data:""},G=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||me,be=r=>{let t=G(r),e=t.data;return t.data="",e},ge=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ye=/\/\*[^]*?\*\/|  +/g,J=/\n+/g,C=(r,t)=>{let e="",l="",f="";for(let a in r){let c=r[a];a[0]=="@"?a[1]=="i"?e=a+" "+c+";":l+=a[1]=="f"?C(c,a):a+"{"+C(c,a[1]=="k"?"":t)+"}":typeof c=="object"?l+=C(c,t?t.replace(/([^,])+/g,h=>a.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,h):h?h+" "+m:m)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),f+=C.p?C.p(a,c):a+":"+c+";")}return e+(t&&f?t+"{"+f+"}":f)+l},M={},X=r=>{if(typeof r=="object"){let t="";for(let e in r)t+=e+X(r[e]);return t}return r},ve=(r,t,e,l,f)=>{let a=X(r),c=M[a]||(M[a]=(m=>{let b=0,y=11;for(;b<m.length;)y=101*y+m.charCodeAt(b++)>>>0;return"go"+y})(a));if(!M[c]){let m=a!==r?r:(b=>{let y,z,T=[{}];for(;y=ge.exec(b.replace(ye,""));)y[4]?T.shift():y[3]?(z=y[3].replace(J," ").trim(),T.unshift(T[0][z]=T[0][z]||{})):T[0][y[1]]=y[2].replace(J," ").trim();return T[0]})(r);M[c]=C(f?{["@keyframes "+c]:m}:m,e?"":"."+c)}let h=e&&M.g?M.g:null;return e&&(M.g=M[c]),((m,b,y,z)=>{z?b.data=b.data.replace(z,m):b.data.indexOf(m)===-1&&(b.data=y?m+b.data:b.data+m)})(M[c],t,l,h),c},Ae=(r,t,e)=>r.reduce((l,f,a)=>{let c=t[a];if(c&&c.call){let h=c(e),m=h&&h.props&&h.props.className||/^go/.test(h)&&h;c=m?"."+m:h&&typeof h=="object"?h.props?"":C(h,""):h===!1?"":h}return l+f+(c??"")},"");function k(r){let t=this||{},e=r.call?r(t.p):r;return ve(e.unshift?e.raw?Ae(e,[].slice.call(arguments,1),t.p):e.reduce((l,f)=>Object.assign(l,f&&f.call?f(t.p):f),{}):e,G(t.target),t.g,t.o,t.k)}var K,P,D,Se=k.bind({g:1}),ze=k.bind({k:1});function $e(r,t,e,l){C.p=t,K=r,P=e,D=l}function Ee(r,t){let e=this||{};return function(){let l=arguments;function f(a,c){let h=Object.assign({},a),m=h.className||f.className;e.p=Object.assign({theme:P&&P()},h),e.o=/ *go\d+/.test(m),h.className=k.apply(e,l)+(m?" "+m:""),t&&(h.ref=c);let b=r;return r[0]&&(b=h.as||r,delete h.as),D&&b[0]&&D(h),K(b,h)}return t?t(f):f}}var Y={css:k,extractCss:be,glob:Se,keyframes:ze,setup:$e,styled:Ee};var Q=function(){"use strict";let r=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:F,afterNodeAdded:F,beforeNodeMorphed:F,afterNodeMorphed:F,beforeNodeRemoved:F,afterNodeRemoved:F,beforeAttributeUpdated:F},head:{style:"merge",shouldPreserve:function(i){return i.getAttribute("im-preserve")==="true"},shouldReAppend:function(i){return i.getAttribute("im-re-append")==="true"},shouldRemove:F,afterHeadMorphed:F}};function e(i,s,o={}){i instanceof Document&&(i=i.documentElement),typeof s=="string"&&(s=se(s));let u=oe(s),d=re(i,u,o);return l(i,u,d)}function l(i,s,o){if(o.head.block){let u=i.querySelector("head"),d=s.querySelector("head");if(u&&d){let p=z(d,u,o);Promise.all(p).then(function(){l(i,s,Object.assign(o,{head:{block:!1,ignore:!0}}))});return}}if(o.morphStyle==="innerHTML")return c(s,i,o),i.children;if(o.morphStyle==="outerHTML"||o.morphStyle==null){let u=ce(s,i,o),d=u?.previousSibling,p=u?.nextSibling,g=a(i,u,o);return u?le(d,g,p):[]}else throw"Do not understand how to morph style "+o.morphStyle}function f(i,s){return s.ignoreActiveValue&&i===document.activeElement&&i!==document.body}function a(i,s,o){if(!(o.ignoreActive&&i===document.activeElement))return s==null?o.callbacks.beforeNodeRemoved(i)===!1?i:(i.remove(),o.callbacks.afterNodeRemoved(i),null):_(i,s)?(o.callbacks.beforeNodeMorphed(i,s)===!1||(i instanceof HTMLHeadElement&&o.head.ignore||(i instanceof HTMLHeadElement&&o.head.style!=="morph"?z(s,i,o):(m(s,i,o),f(i,o)||c(s,i,o))),o.callbacks.afterNodeMorphed(i,s)),i):o.callbacks.beforeNodeRemoved(i)===!1||o.callbacks.beforeNodeAdded(s)===!1?i:(i.parentElement.replaceChild(s,i),o.callbacks.afterNodeAdded(s),o.callbacks.afterNodeRemoved(i),s)}function c(i,s,o){let u=i.firstChild,d=s.firstChild,p;for(;u;){if(p=u,u=p.nextSibling,d==null){if(o.callbacks.beforeNodeAdded(p)===!1)return;s.appendChild(p),o.callbacks.afterNodeAdded(p),w(o,p);continue}if(q(p,d,o)){a(d,p,o),d=d.nextSibling,w(o,p);continue}let g=ne(i,s,p,d,o);if(g){d=V(d,g,o),a(g,p,o),w(o,p);continue}let S=ie(i,s,p,d,o);if(S){d=V(d,S,o),a(S,p,o),w(o,p);continue}if(o.callbacks.beforeNodeAdded(p)===!1)return;s.insertBefore(p,d),o.callbacks.afterNodeAdded(p),w(o,p)}for(;d!==null;){let g=d;d=d.nextSibling,W(g,o)}}function h(i,s,o,u){return i==="value"&&u.ignoreActiveValue&&s===document.activeElement?!0:u.callbacks.beforeAttributeUpdated(i,s,o)===!1}function m(i,s,o){let u=i.nodeType;if(u===1){let d=i.attributes,p=s.attributes;for(let g of d)h(g.name,s,"update",o)||s.getAttribute(g.name)!==g.value&&s.setAttribute(g.name,g.value);for(let g=p.length-1;0<=g;g--){let S=p[g];h(S.name,s,"remove",o)||i.hasAttribute(S.name)||s.removeAttribute(S.name)}}(u===8||u===3)&&s.nodeValue!==i.nodeValue&&(s.nodeValue=i.nodeValue),f(s,o)||y(i,s,o)}function b(i,s,o,u){if(i[o]!==s[o]){let d=h(o,s,"update",u);d||(s[o]=i[o]),i[o]?d||s.setAttribute(o,i[o]):h(o,s,"remove",u)||s.removeAttribute(o)}}function y(i,s,o){if(i instanceof HTMLInputElement&&s instanceof HTMLInputElement&&i.type!=="file"){let u=i.value,d=s.value;b(i,s,"checked",o),b(i,s,"disabled",o),i.hasAttribute("value")?u!==d&&(h("value",s,"update",o)||(s.setAttribute("value",u),s.value=u)):h("value",s,"remove",o)||(s.value="",s.removeAttribute("value"))}else if(i instanceof HTMLOptionElement)b(i,s,"selected",o);else if(i instanceof HTMLTextAreaElement&&s instanceof HTMLTextAreaElement){let u=i.value,d=s.value;if(h("value",s,"update",o))return;u!==d&&(s.value=u),s.firstChild&&s.firstChild.nodeValue!==u&&(s.firstChild.nodeValue=u)}}function z(i,s,o){let u=[],d=[],p=[],g=[],S=o.head.style,H=new Map;for(let A of i.children)H.set(A.outerHTML,A);for(let A of s.children){let E=H.has(A.outerHTML),O=o.head.shouldReAppend(A),I=o.head.shouldPreserve(A);E||I?O?d.push(A):(H.delete(A.outerHTML),p.push(A)):S==="append"?O&&(d.push(A),g.push(A)):o.head.shouldRemove(A)!==!1&&d.push(A)}g.push(...H.values());let Z=[];for(let A of g){let E=document.createRange().createContextualFragment(A.outerHTML).firstChild;if(o.callbacks.beforeNodeAdded(E)!==!1){if(E.href||E.src){let O=null,I=new Promise(function(pe){O=pe});E.addEventListener("load",function(){O()}),Z.push(I)}s.appendChild(E),o.callbacks.afterNodeAdded(E),u.push(E)}}for(let A of d)o.callbacks.beforeNodeRemoved(A)!==!1&&(s.removeChild(A),o.callbacks.afterNodeRemoved(A));return o.head.afterHeadMorphed(s,{added:u,kept:p,removed:d}),Z}function T(){}function F(){}function te(i){let s={};return Object.assign(s,t),Object.assign(s,i),s.callbacks={},Object.assign(s.callbacks,t.callbacks),Object.assign(s.callbacks,i.callbacks),s.head={},Object.assign(s.head,t.head),Object.assign(s.head,i.head),s}function re(i,s,o){return o=te(o),{target:i,newContent:s,config:o,morphStyle:o.morphStyle,ignoreActive:o.ignoreActive,ignoreActiveValue:o.ignoreActiveValue,idMap:de(i,s),deadIds:new Set,callbacks:o.callbacks,head:o.head}}function q(i,s,o){return i==null||s==null?!1:i.nodeType===s.nodeType&&i.tagName===s.tagName?i.id!==""&&i.id===s.id?!0:N(o,i,s)>0:!1}function _(i,s){return i==null||s==null?!1:i.nodeType===s.nodeType&&i.tagName===s.tagName}function V(i,s,o){for(;i!==s;){let u=i;i=i.nextSibling,W(u,o)}return w(o,s),s.nextSibling}function ne(i,s,o,u,d){let p=N(d,o,s),g=null;if(p>0){let S=u,H=0;for(;S!=null;){if(q(o,S,d))return S;if(H+=N(d,S,i),H>p)return null;S=S.nextSibling}}return g}function ie(i,s,o,u,d){let p=u,g=o.nextSibling,S=0;for(;p!=null;){if(N(d,p,i)>0)return null;if(_(o,p))return p;if(_(g,p)&&(S++,g=g.nextSibling,S>=2))return null;p=p.nextSibling}return p}function se(i){let s=new DOMParser,o=i.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(o.match(/<\/html>/)||o.match(/<\/head>/)||o.match(/<\/body>/)){let u=s.parseFromString(i,"text/html");if(o.match(/<\/html>/))return u.generatedByIdiomorph=!0,u;{let d=u.firstChild;return d?(d.generatedByIdiomorph=!0,d):null}}else{let d=s.parseFromString("<body><template>"+i+"</template></body>","text/html").body.querySelector("template").content;return d.generatedByIdiomorph=!0,d}}function oe(i){if(i==null)return document.createElement("div");if(i.generatedByIdiomorph)return i;if(i instanceof Node){let s=document.createElement("div");return s.append(i),s}else{let s=document.createElement("div");for(let o of[...i])s.append(o);return s}}function le(i,s,o){let u=[],d=[];for(;i!=null;)u.push(i),i=i.previousSibling;for(;u.length>0;){let p=u.pop();d.push(p),s.parentElement.insertBefore(p,s)}for(d.push(s);o!=null;)u.push(o),d.push(o),o=o.nextSibling;for(;u.length>0;)s.parentElement.insertBefore(u.pop(),s.nextSibling);return d}function ce(i,s,o){let u;u=i.firstChild;let d=u,p=0;for(;u;){let g=fe(u,s,o);g>p&&(d=u,p=g),u=u.nextSibling}return d}function fe(i,s,o){return _(i,s)?.5+N(o,i,s):0}function W(i,s){w(s,i),s.callbacks.beforeNodeRemoved(i)!==!1&&(i.remove(),s.callbacks.afterNodeRemoved(i))}function ae(i,s){return!i.deadIds.has(s)}function ue(i,s,o){return(i.idMap.get(o)||r).has(s)}function w(i,s){let o=i.idMap.get(s)||r;for(let u of o)i.deadIds.add(u)}function N(i,s,o){let u=i.idMap.get(s)||r,d=0;for(let p of u)ae(i,p)&&ue(i,p,o)&&++d;return d}function U(i,s){let o=i.parentElement,u=i.querySelectorAll("[id]");for(let d of u){let p=d;for(;p!==o&&p!=null;){let g=s.get(p);g==null&&(g=new Set,s.set(p,g)),g.add(d.id),p=p.parentElement}}}function de(i,s){let o=new Map;return U(i,o),U(s,o),o}return{morph:e,defaults:t}}();function ee(r,t){if(!t.__objects){let e=new t,l=class extends FezBase{};Object.getOwnPropertyNames(e).concat(Object.getOwnPropertyNames(t.prototype)).filter(a=>!["constructor","prototype"].includes(a)).forEach(a=>l.prototype[a]=e[a]),e.CSS&&(l.css=e.CSS),e.HTML&&(l.html=e.HTML),e.NAME&&(l.nodeName=e.NAME),e.FAST&&(l.fastBind=e.FAST),t=l}t.html&&(t.html=Fe(t.html),t.html=t.html.replace(/<slot\s*\/>|<slot\s*>\s*<\/slot>/g,()=>{let e=t.slotNodeName||"div";return`<${e} class="fez-slot"></${e}>`}),t.fezHtmlFunc=R(t.html)),t.css&&(t.css=Fez.globalCss(t.css,{name:r})),Fez._classCache[r]=t,customElements.get(r)||customElements.define(r,class extends HTMLElement{connectedCallback(){this.firstChild||this.getAttribute("data-props")||Me(this,t)?(Fez.info(`fast bind: ${r}`),x(r,this,Fez._classCache[r])):(Fez.info(`slow bind: ${r}`),window.requestAnimationFrame(()=>{this.parentNode&&x(r,this,Fez._classCache[r])}))}})}function Fe(r){let t=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return r.replace(/<([a-z-]+)\b([^>]*)\/>/g,(e,l,f)=>t.has(l)?e:`<${l}${f}></${l}>`)}function x(r,t,e){let l=t.parentNode;if(l){let f=typeof e.nodeName=="function"?e.nodeName(t):e.nodeName,a=document.createElement(f||"div");a.classList.add("fez"),a.classList.add(`fez-${r}`),l.replaceChild(a,t);let c=new e;c.oldRoot=t,c.fezName=r,c.root=a,c.props=e.getProps(t,a),c.class=e,c.slot(t,a),a.fez=c,window.$&&(c.$root=$(a)),c.props.id&&a.setAttribute("id",c.props.id),c.fezRegister(),c.connect(c.props),e.__objects.push(c);let h=c.root.cloneNode(!0);c.class.fezHtmlFunc&&c.render();let m=c.root.querySelector(".fez-slot");if(m&&c.slot(h,m),c.onSubmit){let b=c.root.nodeName=="FORM"?c.root:c.find("form");b.onsubmit=y=>{y.preventDefault(),c.onSubmit(c.formData())}}c.afterConnect(),c.onMount();for(let[b,y]of Object.entries(c.props))/^\{\{/.test(y)&&/\}\}$/.test(y)&&(y=y.replace(/^\{\{/,"return (").replace(/\}\}$/,")"),y=new Function(y).bind(c.root)(),c.props[b]=y);if(c.onPropsChange){Ce.observe(a,{attributes:!0});for(let[b,y]of Object.entries(c.props))c.onPropsChange(b,y)}}}function Me(r,t){return typeof t.fastBind=="function"?t.fastBind(r):t.fastBind}var Ce=new MutationObserver((r,t)=>{for(let e of r)if(e.type==="attributes"){let l=e.target.fez,f=e.attributeName,a=e.target.getAttribute(f);l.props[f]=a,l.onPropsChange(f,a)}});var v=(r,t)=>r?typeof t!="function"?v.find(r,t):ee(r,t):FezBase;v._classCache={};v.find=(r,t)=>{typeof r=="string"&&(r=document.body.querySelector(r)),typeof r.val=="function"&&(r=r[0]);let e=t?`.fez-${t}`:".fez";return r.closest(e).fez};v.cssClass=r=>Y.css(r);v.globalCss=(r,t={})=>{if(typeof r=="function"&&(r=r()),r.includes(":")){let e=r.split(`
`).filter(l=>!/^\s*\/\//.test(l)).join(`
`);e=e.replace(/\:fez|\:host/,`.fez.fez-${t.name}`),t.wrap&&(e=`.fez.fez-${t.name} { ${e} }`),r=v.cssClass(e)}return document.body?document.body.classList.add(r):document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(r)}),r};v.info=r=>{window.DEBUG&&console.log(`Fez: ${r}`)};v.morphdom=(r,t,e={})=>{e.childrenOnly===void 0&&(e.childrenOnly=!0),Q.morph(r,t,{morphStyle:"innerHTML"})};v.htmlEscape=r=>typeof r=="string"?r.replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;"):r;v.publish=(r,...t)=>{v._subs||={},v._subs[r]||=[],v._subs[r].forEach(e=>{e[1].bind(e[0])(...t)})};v.fnv1=r=>{var t,e,l,f,a,c;for(t=2166136261,e=16777619,l=t,f=a=0,c=r.length-1;0<=c?a<=c:a>=c;f=0<=c?++a:--a)l^=r.charCodeAt(f),l*=e;return l.toString(36).replaceAll("-","")};v.tag=function(r,t={},e=""){let l=encodeURIComponent(JSON.stringify(t));return`<${r} data-props="${l}">${e}</${r}>`};v.head=r=>{let t=document.createElement("div");t.innerHTML=r,Array.from(t.childNodes).forEach(e=>{if(e.tagName==="SCRIPT"){let l=document.createElement("script");Array.from(e.attributes).forEach(f=>{l.setAttribute(f.name,f.value)}),e.textContent&&(l.textContent=e.textContent),document.head.appendChild(l)}else document.head.appendChild(e)})};v.untilTrue=(r,t)=>{r()||setTimeout(r,t||200)};v.compile=function(r,t){if(r instanceof Node&&(r.parentNode.removeChild(r),t=r.innerHTML,r=r.getAttribute("fez")),!t){let m=`template[fez=${r}]`,b=document.querySelector(m);if(b)t=b.innerHTML;else{console.error(`Fez template not found: ${m}`);return}}let e={script:"",style:"",html:""},l=t.split(`
`),f=[],a="";for(let m of l)m.trim().startsWith("<script")&&!e.script?a="script":m.trim().startsWith("<style")?a="style":m.trim().endsWith("<\/script>")&&a==="script"&&!e.script?(e.script=f.join(`
`),f=[],a=null):m.trim().endsWith("</style>")&&a==="style"?(e.style=f.join(`
`),f=[],a=null):a?f.push(m):e.html+=m+`
`;let c=e.script;/class\s+\{/.test(c)||(c=`class {
${c}
}`),String(e.style).includes(":")&&(e.style=e.style.includes(":fez")?e.style:`:fez {
${e.style}
}`,c=c.replace(/\}\s*$/,`
  CSS = \`${e.style}\`
}`)),/\w/.test(String(e.html))&&(e.html=e.html.replaceAll("$","\\$"),c=c.replace(/\}\s*$/,`
  HTML = \`${e.html}\`
}`));let h=c.split(/class\s+\{/,2);c=`${h[0]};

window.Fez('${r}', class {
${h[1]})`;try{new Function(c)()}catch(m){console.error(`FEZ template "${r}" compile error: ${m.message}`),console.log(t),console.log(c)}};v.compileAll=function(){document.querySelectorAll("template[fez]").forEach(r=>v.compile(r))};var j=v;window.FezBase=L;window.Fez=j;j("fez-compile",class{connect(r){let t=r.tag||console.error("FEZ template: tag name not given"),e=this.find("template");e?j.compile(t,e.innerHTML):console.error("FEZ template: fez-compile contents has to be wrapped in <template></template> tag.")}});setInterval(()=>{L.__objects=L.__objects.filter(r=>r.isConnected)},5e3);document.addEventListener("DOMContentLoaded",j.compileAll);})();
//# sourceMappingURL=fez.js.map
