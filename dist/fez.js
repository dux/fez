(()=>{function B(s,e){let i=/(\r\n|\r|\n)/g,o=/{{\s*(.+?)\s*}}/g,h=/^each\s+(.*)\s+as\s+(.*)$/,u=/^if\s+(.*)$/,d=/^else if\s+(.*)$/;function f(y){let A=M=>M.replaceAll("@","this."),T=`
      let _strings = [], _sequence = [], _values = [];

      function htmlEscape(text) {
        if (typeof text === 'string') {
          return text
            .replaceAll("'", '&apos;')
            .replaceAll('"', '&quot;')
            .replaceAll('<', '&lt;')
            .replaceAll('>', '&gt;')
        } else {
          return text
        }
      }

      _sequence.push('${y.trim().replace(i,"\\n").replace(o,(M,b)=>{if(b=b.replace(/^[#:]/,""),b.startsWith("each")||b.startsWith("for")){let S=b.split(/\s+/);if(S.shift()==="for"){let q=S.pop();S.pop(),b=`each ${q} as ${S.join(" ")}`}let j=h.exec(b);if(j)return j[1]=A(j[1]),`');
 (!Array.isArray(${j[1]}) ? Array.from(Object.entries(${j[1]} || []), ([key, value]) => [key, value]) : ${j[1]}).forEach((${j[2]}) => { _sequence.push('`}else if(b.startsWith("if")){let S=u.exec(b);if(S)return S[1]=A(S[1]),`');
 if (${S[1]}) { _sequence.push('`}else if(b.startsWith("else if")){let S=d.exec(b);if(S)return S[1]=A(S[1]),`');
 } else if (${S[1]}) { _sequence.push('`}else{if(b==="else")return`');
 } else { _sequence.push('`;if(b==="/each"||b==="/for")return`');
 }); _sequence.push('`;if(b==="/if")return`');
 } _sequence.push('`}let z=b.split(/^\@html\s+/);return z[1]?b=A(z[1]):b=`htmlEscape(${A(b)})`,`');
 _strings.push(_sequence.join(''));
 _sequence = [];
 _values.push(${b});
 _sequence.push('`})}');
      _strings.push(_sequence.join(''));
      return [_strings, _values];
    `;return new Function("_data",T)}function m(y){let A=f(y);return()=>{let[T,M]=A.bind(e)();return T.reduce((b,z,S)=>b+M[S-1]+z)}}function g(y){let A=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return y.replace(/<([a-z-]+)\b([^>]*)\/>/g,(T,M,b)=>A.has(M)?T:`<${M}${b}></${M}>`)}return s=g(s),m(s)().replace(/\n\s*\n/g,`
`)}var X=function(){"use strict";let s=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:M,afterNodeAdded:M,beforeNodeMorphed:M,afterNodeMorphed:M,beforeNodeRemoved:M,afterNodeRemoved:M,beforeAttributeUpdated:M},head:{style:"merge",shouldPreserve:function(t){return t.getAttribute("im-preserve")==="true"},shouldReAppend:function(t){return t.getAttribute("im-re-append")==="true"},shouldRemove:M,afterHeadMorphed:M}};function i(t,r,n={}){t instanceof Document&&(t=t.documentElement),typeof r=="string"&&(r=te(r));let l=re(r),a=z(t,l,n);return o(t,l,a)}function o(t,r,n){if(n.head.block){let l=t.querySelector("head"),a=r.querySelector("head");if(l&&a){let c=A(a,l,n);Promise.all(c).then(function(){o(t,r,Object.assign(n,{head:{block:!1,ignore:!0}}))});return}}if(n.morphStyle==="innerHTML")return d(r,t,n),t.children;if(n.morphStyle==="outerHTML"||n.morphStyle==null){let l=ie(r,t,n),a=l?.previousSibling,c=l?.nextSibling,p=u(t,l,n);return l?ne(a,p,c):[]}else throw"Do not understand how to morph style "+n.morphStyle}function h(t,r){return r.ignoreActiveValue&&t===document.activeElement&&t!==document.body}function u(t,r,n){if(!(n.ignoreActive&&t===document.activeElement))return r==null?n.callbacks.beforeNodeRemoved(t)===!1?t:(t.remove(),n.callbacks.afterNodeRemoved(t),null):j(t,r)?(n.callbacks.beforeNodeMorphed(t,r)===!1||(t instanceof HTMLHeadElement&&n.head.ignore||(t instanceof HTMLHeadElement&&n.head.style!=="morph"?A(r,t,n):(m(r,t,n),h(t,n)||d(r,t,n))),n.callbacks.afterNodeMorphed(t,r)),t):n.callbacks.beforeNodeRemoved(t)===!1||n.callbacks.beforeNodeAdded(r)===!1?t:(t.parentElement.replaceChild(r,t),n.callbacks.afterNodeAdded(r),n.callbacks.afterNodeRemoved(t),r)}function d(t,r,n){let l=t.firstChild,a=r.firstChild,c;for(;l;){if(c=l,l=c.nextSibling,a==null){if(n.callbacks.beforeNodeAdded(c)===!1)return;r.appendChild(c),n.callbacks.afterNodeAdded(c),H(n,c);continue}if(S(c,a,n)){u(a,c,n),a=a.nextSibling,H(n,c);continue}let p=x(t,r,c,a,n);if(p){a=q(a,p,n),u(p,c,n),H(n,c);continue}let E=ee(t,r,c,a,n);if(E){a=q(a,E,n),u(E,c,n),H(n,c);continue}if(n.callbacks.beforeNodeAdded(c)===!1)return;r.insertBefore(c,a),n.callbacks.afterNodeAdded(c),H(n,c)}for(;a!==null;){let p=a;a=a.nextSibling,W(p,n)}}function f(t,r,n,l){return t==="value"&&l.ignoreActiveValue&&r===document.activeElement?!0:l.callbacks.beforeAttributeUpdated(t,r,n)===!1}function m(t,r,n){let l=t.nodeType;if(l===1){let a=t.attributes,c=r.attributes;for(let p of a)f(p.name,r,"update",n)||r.getAttribute(p.name)!==p.value&&r.setAttribute(p.name,p.value);for(let p=c.length-1;0<=p;p--){let E=c[p];f(E.name,r,"remove",n)||t.hasAttribute(E.name)||r.removeAttribute(E.name)}}(l===8||l===3)&&r.nodeValue!==t.nodeValue&&(r.nodeValue=t.nodeValue),h(r,n)||y(t,r,n)}function g(t,r,n,l){if(t[n]!==r[n]){let a=f(n,r,"update",l);a||(r[n]=t[n]),t[n]?a||r.setAttribute(n,t[n]):f(n,r,"remove",l)||r.removeAttribute(n)}}function y(t,r,n){if(t instanceof HTMLInputElement&&r instanceof HTMLInputElement&&t.type!=="file"){let l=t.value,a=r.value;g(t,r,"checked",n),g(t,r,"disabled",n),t.hasAttribute("value")?l!==a&&(f("value",r,"update",n)||(r.setAttribute("value",l),r.value=l)):f("value",r,"remove",n)||(r.value="",r.removeAttribute("value"))}else if(t instanceof HTMLOptionElement)g(t,r,"selected",n);else if(t instanceof HTMLTextAreaElement&&r instanceof HTMLTextAreaElement){let l=t.value,a=r.value;if(f("value",r,"update",n))return;l!==a&&(r.value=l),r.firstChild&&r.firstChild.nodeValue!==l&&(r.firstChild.nodeValue=l)}}function A(t,r,n){let l=[],a=[],c=[],p=[],E=n.head.style,R=new Map;for(let v of t.children)R.set(v.outerHTML,v);for(let v of r.children){let L=R.has(v.outerHTML),k=n.head.shouldReAppend(v),N=n.head.shouldPreserve(v);L||N?k?a.push(v):(R.delete(v.outerHTML),c.push(v)):E==="append"?k&&(a.push(v),p.push(v)):n.head.shouldRemove(v)!==!1&&a.push(v)}p.push(...R.values());let G=[];for(let v of p){let L=document.createRange().createContextualFragment(v.outerHTML).firstChild;if(n.callbacks.beforeNodeAdded(L)!==!1){if(L.href||L.src){let k=null,N=new Promise(function(fe){k=fe});L.addEventListener("load",function(){k()}),G.push(N)}r.appendChild(L),n.callbacks.afterNodeAdded(L),l.push(L)}}for(let v of a)n.callbacks.beforeNodeRemoved(v)!==!1&&(r.removeChild(v),n.callbacks.afterNodeRemoved(v));return n.head.afterHeadMorphed(r,{added:l,kept:c,removed:a}),G}function T(){}function M(){}function b(t){let r={};return Object.assign(r,e),Object.assign(r,t),r.callbacks={},Object.assign(r.callbacks,e.callbacks),Object.assign(r.callbacks,t.callbacks),r.head={},Object.assign(r.head,e.head),Object.assign(r.head,t.head),r}function z(t,r,n){return n=b(n),{target:t,newContent:r,config:n,morphStyle:n.morphStyle,ignoreActive:n.ignoreActive,ignoreActiveValue:n.ignoreActiveValue,idMap:ae(t,r),deadIds:new Set,callbacks:n.callbacks,head:n.head}}function S(t,r,n){return t==null||r==null?!1:t.nodeType===r.nodeType&&t.tagName===r.tagName?t.id!==""&&t.id===r.id?!0:O(n,t,r)>0:!1}function j(t,r){return t==null||r==null?!1:t.nodeType===r.nodeType&&t.tagName===r.tagName}function q(t,r,n){for(;t!==r;){let l=t;t=t.nextSibling,W(l,n)}return H(n,r),r.nextSibling}function x(t,r,n,l,a){let c=O(a,n,r),p=null;if(c>0){let E=l,R=0;for(;E!=null;){if(S(n,E,a))return E;if(R+=O(a,E,t),R>c)return null;E=E.nextSibling}}return p}function ee(t,r,n,l,a){let c=l,p=n.nextSibling,E=0;for(;c!=null;){if(O(a,c,t)>0)return null;if(j(n,c))return c;if(j(p,c)&&(E++,p=p.nextSibling,E>=2))return null;c=c.nextSibling}return c}function te(t){let r=new DOMParser,n=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(n.match(/<\/html>/)||n.match(/<\/head>/)||n.match(/<\/body>/)){let l=r.parseFromString(t,"text/html");if(n.match(/<\/html>/))return l.generatedByIdiomorph=!0,l;{let a=l.firstChild;return a?(a.generatedByIdiomorph=!0,a):null}}else{let a=r.parseFromString("<body><template>"+t+"</template></body>","text/html").body.querySelector("template").content;return a.generatedByIdiomorph=!0,a}}function re(t){if(t==null)return document.createElement("div");if(t.generatedByIdiomorph)return t;if(t instanceof Node){let r=document.createElement("div");return r.append(t),r}else{let r=document.createElement("div");for(let n of[...t])r.append(n);return r}}function ne(t,r,n){let l=[],a=[];for(;t!=null;)l.push(t),t=t.previousSibling;for(;l.length>0;){let c=l.pop();a.push(c),r.parentElement.insertBefore(c,r)}for(a.push(r);n!=null;)l.push(n),a.push(n),n=n.nextSibling;for(;l.length>0;)r.parentElement.insertBefore(l.pop(),r.nextSibling);return a}function ie(t,r,n){let l;l=t.firstChild;let a=l,c=0;for(;l;){let p=se(l,r,n);p>c&&(a=l,c=p),l=l.nextSibling}return a}function se(t,r,n){return j(t,r)?.5+O(n,t,r):0}function W(t,r){H(r,t),r.callbacks.beforeNodeRemoved(t)!==!1&&(t.remove(),r.callbacks.afterNodeRemoved(t))}function le(t,r){return!t.deadIds.has(r)}function oe(t,r,n){return(t.idMap.get(n)||s).has(r)}function H(t,r){let n=t.idMap.get(r)||s;for(let l of n)t.deadIds.add(l)}function O(t,r,n){let l=t.idMap.get(r)||s,a=0;for(let c of l)le(t,c)&&oe(t,c,n)&&++a;return a}function U(t,r){let n=t.parentElement,l=t.querySelectorAll("[id]");for(let a of l){let c=a;for(;c!==n&&c!=null;){let p=r.get(c);p==null&&(p=new Set,r.set(c,p)),p.add(a.id),c=c.parentElement}}}function ae(t,r){let n=new Map;return U(t,n),U(r,n),n}return{morph:i,defaults:e}}();var ue={data:""},Z=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||ue,ce=s=>{let e=Z(s),i=e.data;return e.data="",i},de=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,he=/\/\*[^]*?\*\/|  +/g,Y=/\n+/g,C=(s,e)=>{let i="",o="",h="";for(let u in s){let d=s[u];u[0]=="@"?u[1]=="i"?i=u+" "+d+";":o+=u[1]=="f"?C(d,u):u+"{"+C(d,u[1]=="k"?"":e)+"}":typeof d=="object"?o+=C(d,e?e.replace(/([^,])+/g,f=>u.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,f):f?f+" "+m:m)):u):d!=null&&(u=/^--/.test(u)?u:u.replace(/[A-Z]/g,"-$&").toLowerCase(),h+=C.p?C.p(u,d):u+":"+d+";")}return i+(e&&h?e+"{"+h+"}":h)+o},w={},J=s=>{if(typeof s=="object"){let e="";for(let i in s)e+=i+J(s[i]);return e}return s},pe=(s,e,i,o,h)=>{let u=J(s),d=w[u]||(w[u]=(m=>{let g=0,y=11;for(;g<m.length;)y=101*y+m.charCodeAt(g++)>>>0;return"go"+y})(u));if(!w[d]){let m=u!==s?s:(g=>{let y,A,T=[{}];for(;y=de.exec(g.replace(he,""));)y[4]?T.shift():y[3]?(A=y[3].replace(Y," ").trim(),T.unshift(T[0][A]=T[0][A]||{})):T[0][y[1]]=y[2].replace(Y," ").trim();return T[0]})(s);w[d]=C(h?{["@keyframes "+d]:m}:m,i?"":"."+d)}let f=i&&w.g?w.g:null;return i&&(w.g=w[d]),((m,g,y,A)=>{A?g.data=g.data.replace(A,m):g.data.indexOf(m)===-1&&(g.data=y?m+g.data:g.data+m)})(w[d],e,o,f),d},me=(s,e,i)=>s.reduce((o,h,u)=>{let d=e[u];if(d&&d.call){let f=d(i),m=f&&f.props&&f.props.className||/^go/.test(f)&&f;d=m?"."+m:f&&typeof f=="object"?f.props?"":C(f,""):f===!1?"":f}return o+h+(d??"")},"");function F(s){let e=this||{},i=s.call?s(e.p):s;return pe(i.unshift?i.raw?me(i,[].slice.call(arguments,1),e.p):i.reduce((o,h)=>Object.assign(o,h&&h.call?h(e.p):h),{}):i,Z(e.target),e.g,e.o,e.k)}var K,P,V,be=F.bind({g:1}),ge=F.bind({k:1});function ye(s,e,i,o){C.p=e,K=s,P=i,V=o}function ve(s,e){let i=this||{};return function(){let o=arguments;function h(u,d){let f=Object.assign({},u),m=f.className||h.className;i.p=Object.assign({theme:P&&P()},f),i.o=/ *go\d+/.test(m),f.className=F.apply(i,o)+(m?" "+m:""),e&&(f.ref=d);let g=s;return s[0]&&(g=f.as||s,delete f.as),V&&g[0]&&V(f),K(g,f)}return e?e(h):h}}var Q={css:F,extractCss:ce,glob:be,keyframes:ge,setup:ye,styled:ve};function D(s,e={},i){if(typeof e=="string"&&([e,i]=[i,e],e||={}),e instanceof Node&&(i=e,e={}),Array.isArray(s)&&(i=s,s="div"),(typeof e!="object"||Array.isArray(e))&&(i=e,e={}),s.includes(".")){let h=s.split(".");s=h.shift()||"div";let u=h.join(" ");e.class?e.class+=` ${u}`:e.class=u}let o=document.createElement(s);for(let[h,u]of Object.entries(e))if(typeof u=="function")o[h]=u.bind(this);else{let d=String(u).replaceAll("$$.",this.fezHtmlRoot);o.setAttribute(h,d)}if(i)if(Array.isArray(i))for(let h of i)o.appendChild(h);else i instanceof Node?o.appendChild(i):o.innerHTML=String(i);return o}var I=class{static __objects=[];static find(e,i){return _.find(e,i)}static fnv1(e){var i,o,h,u,d,f;for(i=2166136261,o=16777619,h=i,u=d=0,f=e.length-1;0<=f?d<=f:d>=f;u=0<=f?++d:--d)h^=e.charCodeAt(u),h*=o;return h.toString(36).replaceAll("-","")}static getProps(e){let i={};for(let o of e.attributes)i[o.name]=o.value;return i}static formData(e){let i=new FormData(e.closest("form")),o={};return i.forEach((h,u)=>{o[u]=h}),o}static fastBind(){return!1}constructor(){this.__int={}}n=D;get fezHtmlRoot(){return`Fez.find(this, "${this.fezName}").`}get isAttached(){return this.root.parentNode?!0:(Object.keys(this.__int).forEach(e=>{clearInterval(this.__int[e])}),this.root.fez=null,this.root=null,!1)}prop(e){let i=this.oldRoot[e]||this.props[e];return typeof i=="function"&&(i=i.bind(this.root)),i}copy(){for(let e of Array.from(arguments)){let i=this.props[e];if(i!==void 0){if(e=="class"){let o=this.root.getAttribute(e,i);o&&(i=[o,i].join(" "))}typeof i=="string"?this.root.setAttribute(e,i):this.root[e]=i}}}slot(e,i){i||=document.createElement("template");let o=i.nodeName=="SLOT";for(;e.firstChild;)o?i.parentNode.insertBefore(e.lastChild,i.nextSibling):i.appendChild(e.firstChild);return o?i.parentNode.removeChild(i):e.innerHTML="",i}style(){console.error("call Fez static style")}connect(){console.error('Fez is missing "connect" method.',this.root)}parseHtml(e,i){if(typeof e=="object"&&(e=e[0]),e=e.replaceAll("$$.",this.fezHtmlRoot.replaceAll('"',"&quot;")),e.includes("{{"))try{e=B(e,this)}catch(o){console.error(`Fez stache template error in "${this.fezName}"`,o)}return e}html(e,i){e||(e=this.class.html),typeof i>"u"&&(i=e,e=this.root),typeof e=="string"&&(e=this.find(e));let o=document.createElement("div");Array.isArray(i)?i[0]instanceof Node?i.forEach(u=>{o.appendChild(u)}):i=i.join(""):typeof i=="string"?o.innerHTML=this.parseHtml(i):o.appendChild(i);let h=o.querySelector("slot");h&&this.slot(e,h),_.morphdom(e,o),e.querySelectorAll("*[fez-this]").forEach(u=>{let d=u.getAttribute("fez-this").replace(/[^\w\.\[\]]/,"");this[d]=u}),e.querySelectorAll("*[fez-use]").forEach(u=>{let d=u.getAttribute("fez-use");this[d](u)})}setInterval(e,i,o){return typeof e=="number"&&([i,e]=[e,i]),o||=this.class.fnv1(String(e)),clearInterval(this.__int[o]),this.__int[o]=setInterval(()=>{this.isAttached&&e()},i),this.__int[o]}css(e,i){let o=_.css(e);return i&&this.root.classList.add(o),o}find(e){return this.root.querySelector(e)}val(e,i){let o=this.find(".time");["INPUT","TEXTAREA","SELECT"].includes(o.nodeName)?o.value=i:o.innerHTML=new Date}formData(e){return this.class.formData(e||this.root)}attr(e,i){return typeof i>"u"?this.root.getAttribute(e):(this.root.setAttribute(e,i),i)}childNodes(e){let i=Array.from(this.root.querySelectorAll(":scope > *"));if(e)i.forEach(e);else return i}fezRegister(){this.class.css&&(typeof this.class.css=="function"&&(this.class.css=this.class.css(this)),this.class.css.includes(":")&&(this.class.css=_.css(this.class.css)),this.root.classList.add(this.class.css)),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(i=>i!=="constructor"&&typeof this[i]=="function").forEach(i=>this[i]=this[i].bind(this))}};setInterval(()=>{I.__objects=I.__objects.filter(s=>s.isAttached)},1e4);var Ae=new MutationObserver((s,e)=>{for(let i of s)if(i.type==="attributes"){let o=i.target.fez,h=i.attributeName,u=i.target.getAttribute(h);o.props[h]=u,o.onPropsChange(h,u)}}),_=(s,e)=>{function i(){let h=this.parentNode;if(h){let u=typeof e.nodeName=="function"?e.nodeName(this):e.nodeName,d=document.createElement(u||"div");d.classList.add("fez"),d.classList.add(`fez-${s}`),h.replaceChild(d,this);let f=new e;f.oldRoot=this,f.fezName=s,f.root=d,f.props=e.getProps(this),f.class=e,f.slot(this,d),d.fez=f,window.$&&(f.$root=$(d)),f.props.id&&d.setAttribute("id",f.props.id),f.fezRegister(),f.connect(f.props),e.__objects.push(f),e.html&&(typeof e.html=="function"&&(e.html=e.html(this)),f.html()),f.onPropsChange&&Ae.observe(d,{attributes:!0})}}function o(h){return typeof e.fastBind=="function"?e.fastBind(h):e.fastBind}if(!s)return I;if(typeof e!="function")return _.find(s,e);customElements.define(s,class extends HTMLElement{connectedCallback(){this.firstChild||o(this)?(_.info(`fast bind: ${s}`),i.bind(this)()):(_.info(`slow bind: ${s}`),window.requestAnimationFrame(()=>{i.bind(this)()}))}})};_.find=(s,e)=>{typeof s=="string"&&(s=document.body.querySelector(s)),typeof s.val=="function"&&(s=s[0]);let i=e?`.fez-${e}`:".fez";return s.closest(i).fez};_.globalCss=s=>{let e=_.css(s);return document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(e)}),e};_.css=s=>Q.css(s);_.info=s=>{window.DEBUG&&console.log(`Fez: ${s}`)};_.morphdom=(s,e,i={})=>{i.childrenOnly===void 0&&(i.childrenOnly=!0),X.morph(s,e,{morphStyle:"innerHTML"})};_.htmlEscape=s=>s.replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;");window.Fez=_;window.FezBase=I;})();
