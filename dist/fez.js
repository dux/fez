(()=>{function B(r,e={},t){if(typeof e=="string"&&([e,t]=[t,e],e||={}),e instanceof Node&&(t=e,e={}),Array.isArray(r)&&(t=r,r="div"),(typeof e!="object"||Array.isArray(e))&&(t=e,e={}),r.includes(".")){let c=r.split(".");r=c.shift()||"div";let a=c.join(" ");e.class?e.class+=` ${a}`:e.class=a}let i=document.createElement(r);for(let[c,a]of Object.entries(e))if(typeof a=="function")i[c]=a.bind(this);else{let f=String(a).replaceAll("$$.",this.fezHtmlRoot);i.setAttribute(c,f)}if(t)if(Array.isArray(t))for(let c of t)i.appendChild(c);else t instanceof Node?i.appendChild(t):i.innerHTML=String(t);return i}function me(r,e){if(r=r.replaceAll("#raw","@html").replaceAll("#html","@html").replaceAll("@","this."),r.startsWith("#if")||r.startsWith("if"))return e.push(!1),r=r.replace(/^#?if/,""),`\${ ${r} ? \``;if(r.startsWith("#block")||r.startsWith("block")){let t=r.split("block ",2),i=r.split("block:",2);return t[1]?"${(this.fezBlocks."+t[1]+" = `":"${ this.fezBlocks."+i[1]+" }"}else{if(r=="/block")return"`) && ''}";if(r.startsWith("#for")||r.startsWith("for")){r=r.replace(/^#?for/,"");let t=r.split(" in ",2);return"${"+t[1]+".map(("+t[0]+")=>`"}else if(r.startsWith("#each")||r.startsWith("each")){r=r.replace(/^#?each/,"");let t=r.split(" as ",2);return"${"+t[0]+".map(("+t[1]+")=>`"}else{if(r==":else"||r=="else")return e[e.length-1]=!0,"` : `";if(r=="/if")return e.pop()?"`}":"` : ``}";if(r=="/for"||r=="/each")return'`).join("")}';{let t="this.html ";return r.startsWith(t)?r=r.replace(t,""):r=`Fez.htmlEscape(${r})`,"${"+r+"}"}}}}function _(r,e={}){let t=[];r=r.replace(/:(\w+)="([\w\.\[\]]+)"/,(c,a,f)=>`:${a}="{{ JSON.stringify(${f}) }}"`);let i=r.replace(/{{(.*?)}}/g,(c,a)=>(a=a.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),me(a,t)));i="`"+i.trim()+"`";try{let c=new Function(`return ${i}`);return f=>{try{return c.bind(f)()}catch(h){h.message=`FEZ template runtime error: ${h.message}

Template source: ${r}`,console.error(h)}}}catch(c){c.message=`FEZ template compile error: ${c.message}Template source:
${r.trim()}

Compile result (produced invald JS):
new Function(${i})
`,console.error(c)}}var N=class{static __objects=[];static getProps(e,t){let i={};for(let c of e.attributes)i[c.name]=c.value;if(i["data-props"]){let c=i["data-props"];c[0]!="{"&&(c=decodeURIComponent(c)),i=JSON.parse(c)}if(i["data-json-template"]){let c=t.previousSibling?.textContent;c&&(i=JSON.parse(c),t.previousSibling.remove())}for(let[c,a]of Object.entries(i))if(c[0]==":"){delete i[c];let f=e.closest(".fez")?.fez||window,h=new Function(`return (${a})`).bind(f)();i[c.replace(":","")]=h}return i}static formData(e){let t=e.closest("form")||e.querySelector("form"),i=new FormData(t),c={};return i.forEach((a,f)=>{c[f]=a}),c}static fastBind(){return!1}static nodeName="div";constructor(){}n=B;get fezHtmlRoot(){return this.props.id?`Fez.find("#${this.props.id}").`:`Fez.find(this, "${this.fezName}").`}get isConnected(){return this.root?.isConnected?!0:(this._setIntervalCache||={},Object.keys(this._setIntervalCache).forEach(e=>{clearInterval(this._setIntervalCache[e])}),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0,!1)}prop(e){let t=this.oldRoot[e]||this.props[e];return typeof t=="function"&&(t=t.bind(this.root)),t}copy(){for(let e of Array.from(arguments)){let t=this.props[e];if(t!==void 0){if(e=="class"){let i=this.root.getAttribute(e,t);i&&(t=[i,t].join(" "))}typeof t=="string"?this.root.setAttribute(e,t):this.root[e]=t}}}onResize(e,t){let i,c=0;e();let a=()=>{if(!this.isConnected){window.removeEventListener("resize",f);return}e.call(this)},f=()=>{if(!this.isConnected){window.removeEventListener("resize",f);return}if(t){let h=Date.now();h-c>=t&&(a(),c=h)}else clearTimeout(i),i=setTimeout(a,200)};window.addEventListener("resize",f)}slot(e,t){t||=document.createElement("template");let i=t.nodeName=="SLOT";for(;e.firstChild;)i?t.parentNode.insertBefore(e.lastChild,t.nextSibling):t.appendChild(e.firstChild);return i?t.parentNode.removeChild(t):e.innerHTML="",t}style(){console.error("call Fez static style")}connect(){}afterConnect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}publish=Fez.publish;fezBlocks={};parseHtml(e){let t=this.fezHtmlRoot.replaceAll('"',"&quot;");return e=e.replaceAll("$$.",t).replace(/(.)@(\w+[\.\(])/g,(i,c,a)=>c=="@"?`@${a}`:`${c}${t}${a}`).replace(/([^\w\.])fez\./g,`$1${t}`).replace(/>\s+</g,"><"),e.trim()}nextTick(e,t){t?(this._nextTicks||={},this._nextTicks[t]||=window.requestAnimationFrame(()=>{e.bind(this)(),this._nextTicks[t]=null},t)):window.requestAnimationFrame(e.bind(this))}render(e){if(e||=this?.class?.fezHtmlFunc,!e)return;this.beforeRender();let t=document.createElement(this.class.nodeName||"div"),i;Array.isArray(e)?e[0]instanceof Node?e.forEach(f=>t.appendChild(f)):i=e.join(""):typeof e=="string"?i=_(e)(this):typeof e=="function"&&(i=e(this)),i&&(t.innerHTML=this.parseHtml(i));let c=t.querySelector("slot");c&&(this.slot(this.root,c.parentNode),c.parentNode.removeChild(c));let a=this.find(".fez-slot");if(a){let f=t.querySelector(".fez-slot");f&&f.parentNode.replaceChild(a,f)}Fez.morphdom(this.root,t),this.renderFezPostProcess(),this.afterRender()}renderFezPostProcess(){let e=(t,i)=>{this.root.querySelectorAll(`*[${t}]`).forEach(c=>{let a=c.getAttribute(t);c.removeAttribute(t),a&&i.bind(this)(a,c)})};e("fez-this",(t,i)=>{new Function("n",`this.${t} = n`).bind(this)(i)}),e("fez-use",(t,i)=>{let c=this[t];typeof c=="function"?c(i):console.error(`Fez error: "${t}" is not a function in ${this.fezName}`)}),e("fez-class",t=>{let i=t.split(/\s+/),c=i.pop();i.forEach(a=>n.classList.add(a)),c&&setTimeout(()=>{n.classList.add(c)},300)}),e("fez-bind",(t,i)=>{let c=new Function(`return this.${t}`).bind(this)(),a=i.type.toLowerCase()=="checkbox",f=["SELECT"].includes(i.nodeName)||a?"onchange":"onkeyup";i.setAttribute(f,`${this.fezHtmlRoot}${t} = this.${a?"checked":"value"}`),this.val(i,c)})}refresh(e){if(alert("NEEDS FIX and remove htmlTemplate"),e){let t=document.createElement("div");t.innerHTML=this.class.htmlTemplate;let i=t.querySelector(e).innerHTML;this.render(e,i)}else this.render()}setInterval(e,t,i){return typeof e=="number"&&([t,e]=[e,t]),i||=Fez.fnv1(String(e)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[i]),this._setIntervalCache[i]=setInterval(()=>{this.isConnected&&e()},t),this._setIntervalCache[i]}find(e){return typeof e=="string"?this.root.querySelector(e):e}val(e,t){let i=this.find(e);if(i)if(["INPUT","TEXTAREA","SELECT"].includes(i.nodeName))if(typeof t<"u")i.type=="checkbox"?i.checked=!!t:i.value=t;else return i.value;else if(typeof t<"u")i.innerHTML=t;else return i.innerHTML}formData(e){return this.class.formData(e||this.root)}attr(e,t){return typeof t>"u"?this.root.getAttribute(e):(this.root.setAttribute(e,t),t)}childNodes(e){let t=Array.from(this.root.querySelectorAll(":scope > *"));return e&&(t=t.map(e)),t}subscribe(e,t){Fez._subs||={},Fez._subs[e]||=[],Fez._subs[e]=Fez._subs[e].filter(i=>i[0].isConnected),Fez._subs[e].push([this,t])}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.reactiveStore(),this.data||={},this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(t=>t!=="constructor"&&typeof this[t]=="function").forEach(t=>this[t]=this[t].bind(this))}fezHide(){let e=this.root,t=this.root.parentNode,i=document.createDocumentFragment();for(;e.firstChild;)i.appendChild(e.firstChild);return e.parentNode.replaceChild(i,e),this.root=t,this.childNodes()}reactiveStore(e,t){e||={},t||=(c,a,f)=>{this.nextTick(this.render,"render")},t.bind(this);function i(c,a){return typeof c!="object"||c===null?c:new Proxy(c,{set(f,h,m,b){if(Reflect.get(f,h,b)!==m){typeof m=="object"&&m!==null&&(m=i(m,a));let z=Reflect.set(f,h,m,b);return a(f,h,m),z}return!0},get(f,h,m){let b=Reflect.get(f,h,m);return typeof b=="object"&&b!==null?i(b,a):b}})}return i(e,t)}};var be={data:""},X=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||be,ye=r=>{let e=X(r),t=e.data;return e.data="",t},ge=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ve=/\/\*[^]*?\*\/|  +/g,Z=/\n+/g,F=(r,e)=>{let t="",i="",c="";for(let a in r){let f=r[a];a[0]=="@"?a[1]=="i"?t=a+" "+f+";":i+=a[1]=="f"?F(f,a):a+"{"+F(f,a[1]=="k"?"":e)+"}":typeof f=="object"?i+=F(f,e?e.replace(/([^,])+/g,h=>a.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,h):h?h+" "+m:m)):a):f!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=F.p?F.p(a,f):a+":"+f+";")}return t+(e&&c?e+"{"+c+"}":c)+i},C={},G=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+G(r[t]);return e}return r},Ae=(r,e,t,i,c)=>{let a=G(r),f=C[a]||(C[a]=(m=>{let b=0,g=11;for(;b<m.length;)g=101*g+m.charCodeAt(b++)>>>0;return"go"+g})(a));if(!C[f]){let m=a!==r?r:(b=>{let g,z,M=[{}];for(;g=ge.exec(b.replace(ve,""));)g[4]?M.shift():g[3]?(z=g[3].replace(Z," ").trim(),M.unshift(M[0][z]=M[0][z]||{})):M[0][g[1]]=g[2].replace(Z," ").trim();return M[0]})(r);C[f]=F(c?{["@keyframes "+f]:m}:m,t?"":"."+f)}let h=t&&C.g?C.g:null;return t&&(C.g=C[f]),((m,b,g,z)=>{z?b.data=b.data.replace(z,m):b.data.indexOf(m)===-1&&(b.data=g?m+b.data:b.data+m)})(C[f],e,i,h),f},Se=(r,e,t)=>r.reduce((i,c,a)=>{let f=e[a];if(f&&f.call){let h=f(t),m=h&&h.props&&h.props.className||/^go/.test(h)&&h;f=m?"."+m:h&&typeof h=="object"?h.props?"":F(h,""):h===!1?"":h}return i+c+(f??"")},"");function O(r){let e=this||{},t=r.call?r(e.p):r;return Ae(t.unshift?t.raw?Se(t,[].slice.call(arguments,1),e.p):t.reduce((i,c)=>Object.assign(i,c&&c.call?c(e.p):c),{}):t,X(e.target),e.g,e.o,e.k)}var K,D,P,ze=O.bind({g:1}),Ee=O.bind({k:1});function Te(r,e,t,i){F.p=e,K=r,D=t,P=i}function $e(r,e){let t=this||{};return function(){let i=arguments;function c(a,f){let h=Object.assign({},a),m=h.className||c.className;t.p=Object.assign({theme:D&&D()},h),t.o=/ *go\d+/.test(m),h.className=O.apply(t,i)+(m?" "+m:""),e&&(h.ref=f);let b=r;return r[0]&&(b=h.as||r,delete h.as),P&&b[0]&&P(h),K(b,h)}return e?e(c):c}}var Y={css:O,extractCss:ye,glob:ze,keyframes:Ee,setup:Te,styled:$e};var Q=function(){"use strict";let r=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:T,afterNodeAdded:T,beforeNodeMorphed:T,afterNodeMorphed:T,beforeNodeRemoved:T,afterNodeRemoved:T,beforeAttributeUpdated:T},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:T,afterHeadMorphed:T}};function t(s,o,l={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=oe(o));let u=le(o),d=ne(s,u,l);return i(s,u,d)}function i(s,o,l){if(l.head.block){let u=s.querySelector("head"),d=o.querySelector("head");if(u&&d){let p=z(d,u,l);Promise.all(p).then(function(){i(s,o,Object.assign(l,{head:{block:!1,ignore:!0}}))});return}}if(l.morphStyle==="innerHTML")return f(o,s,l),s.children;if(l.morphStyle==="outerHTML"||l.morphStyle==null){let u=fe(o,s,l),d=u?.previousSibling,p=u?.nextSibling,y=a(s,u,l);return u?ce(d,y,p):[]}else throw"Do not understand how to morph style "+l.morphStyle}function c(s,o){return o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function a(s,o,l){if(!(l.ignoreActive&&s===document.activeElement))return o==null?l.callbacks.beforeNodeRemoved(s)===!1?s:(s.remove(),l.callbacks.afterNodeRemoved(s),null):I(s,o)?(l.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&l.head.ignore||(s instanceof HTMLHeadElement&&l.head.style!=="morph"?z(o,s,l):(m(o,s,l),c(s,l)||f(o,s,l))),l.callbacks.afterNodeMorphed(s,o)),s):l.callbacks.beforeNodeRemoved(s)===!1||l.callbacks.beforeNodeAdded(o)===!1?s:(s.parentElement.replaceChild(o,s),l.callbacks.afterNodeAdded(o),l.callbacks.afterNodeRemoved(s),o)}function f(s,o,l){let u=s.firstChild,d=o.firstChild,p;for(;u;){if(p=u,u=p.nextSibling,d==null){if(l.callbacks.beforeNodeAdded(p)===!1)return;o.appendChild(p),l.callbacks.afterNodeAdded(p),w(l,p);continue}if(q(p,d,l)){a(d,p,l),d=d.nextSibling,w(l,p);continue}let y=ie(s,o,p,d,l);if(y){d=V(d,y,l),a(y,p,l),w(l,p);continue}let S=se(s,o,p,d,l);if(S){d=V(d,S,l),a(S,p,l),w(l,p);continue}if(l.callbacks.beforeNodeAdded(p)===!1)return;o.insertBefore(p,d),l.callbacks.afterNodeAdded(p),w(l,p)}for(;d!==null;){let y=d;d=d.nextSibling,W(y,l)}}function h(s,o,l,u){return s==="value"&&u.ignoreActiveValue&&o===document.activeElement?!0:u.callbacks.beforeAttributeUpdated(s,o,l)===!1}function m(s,o,l){let u=s.nodeType;if(u===1){let d=s.attributes,p=o.attributes;for(let y of d)h(y.name,o,"update",l)||o.getAttribute(y.name)!==y.value&&o.setAttribute(y.name,y.value);for(let y=p.length-1;0<=y;y--){let S=p[y];h(S.name,o,"remove",l)||s.hasAttribute(S.name)||o.removeAttribute(S.name)}}(u===8||u===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),c(o,l)||g(s,o,l)}function b(s,o,l,u){if(s[l]!==o[l]){let d=h(l,o,"update",u);d||(o[l]=s[l]),s[l]?d||o.setAttribute(l,s[l]):h(l,o,"remove",u)||o.removeAttribute(l)}}function g(s,o,l){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let u=s.value,d=o.value;b(s,o,"checked",l),b(s,o,"disabled",l),s.hasAttribute("value")?u!==d&&(h("value",o,"update",l)||(o.setAttribute("value",u),o.value=u)):h("value",o,"remove",l)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement)b(s,o,"selected",l);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let u=s.value,d=o.value;if(h("value",o,"update",l))return;u!==d&&(o.value=u),o.firstChild&&o.firstChild.nodeValue!==u&&(o.firstChild.nodeValue=u)}}function z(s,o,l){let u=[],d=[],p=[],y=[],S=l.head.style,L=new Map;for(let A of s.children)L.set(A.outerHTML,A);for(let A of o.children){let E=L.has(A.outerHTML),R=l.head.shouldReAppend(A),k=l.head.shouldPreserve(A);E||k?R?d.push(A):(L.delete(A.outerHTML),p.push(A)):S==="append"?R&&(d.push(A),y.push(A)):l.head.shouldRemove(A)!==!1&&d.push(A)}y.push(...L.values());let U=[];for(let A of y){let E=document.createRange().createContextualFragment(A.outerHTML).firstChild;if(l.callbacks.beforeNodeAdded(E)!==!1){if(E.href||E.src){let R=null,k=new Promise(function(he){R=he});E.addEventListener("load",function(){R()}),U.push(k)}o.appendChild(E),l.callbacks.afterNodeAdded(E),u.push(E)}}for(let A of d)l.callbacks.beforeNodeRemoved(A)!==!1&&(o.removeChild(A),l.callbacks.afterNodeRemoved(A));return l.head.afterHeadMorphed(o,{added:u,kept:p,removed:d}),U}function M(){}function T(){}function re(s){let o={};return Object.assign(o,e),Object.assign(o,s),o.callbacks={},Object.assign(o.callbacks,e.callbacks),Object.assign(o.callbacks,s.callbacks),o.head={},Object.assign(o.head,e.head),Object.assign(o.head,s.head),o}function ne(s,o,l){return l=re(l),{target:s,newContent:o,config:l,morphStyle:l.morphStyle,ignoreActive:l.ignoreActive,ignoreActiveValue:l.ignoreActiveValue,idMap:pe(s,o),deadIds:new Set,callbacks:l.callbacks,head:l.head}}function q(s,o,l){return s==null||o==null?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:H(l,s,o)>0:!1}function I(s,o){return s==null||o==null?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function V(s,o,l){for(;s!==o;){let u=s;s=s.nextSibling,W(u,l)}return w(l,o),o.nextSibling}function ie(s,o,l,u,d){let p=H(d,l,o),y=null;if(p>0){let S=u,L=0;for(;S!=null;){if(q(l,S,d))return S;if(L+=H(d,S,s),L>p)return null;S=S.nextSibling}}return y}function se(s,o,l,u,d){let p=u,y=l.nextSibling,S=0;for(;p!=null;){if(H(d,p,s)>0)return null;if(I(l,p))return p;if(I(y,p)&&(S++,y=y.nextSibling,S>=2))return null;p=p.nextSibling}return p}function oe(s){let o=new DOMParser,l=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(l.match(/<\/html>/)||l.match(/<\/head>/)||l.match(/<\/body>/)){let u=o.parseFromString(s,"text/html");if(l.match(/<\/html>/))return u.generatedByIdiomorph=!0,u;{let d=u.firstChild;return d?(d.generatedByIdiomorph=!0,d):null}}else{let d=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return d.generatedByIdiomorph=!0,d}}function le(s){if(s==null)return document.createElement("div");if(s.generatedByIdiomorph)return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let l of[...s])o.append(l);return o}}function ce(s,o,l){let u=[],d=[];for(;s!=null;)u.push(s),s=s.previousSibling;for(;u.length>0;){let p=u.pop();d.push(p),o.parentElement.insertBefore(p,o)}for(d.push(o);l!=null;)u.push(l),d.push(l),l=l.nextSibling;for(;u.length>0;)o.parentElement.insertBefore(u.pop(),o.nextSibling);return d}function fe(s,o,l){let u;u=s.firstChild;let d=u,p=0;for(;u;){let y=ae(u,o,l);y>p&&(d=u,p=y),u=u.nextSibling}return d}function ae(s,o,l){return I(s,o)?.5+H(l,s,o):0}function W(s,o){w(o,s),o.callbacks.beforeNodeRemoved(s)!==!1&&(s.remove(),o.callbacks.afterNodeRemoved(s))}function ue(s,o){return!s.deadIds.has(o)}function de(s,o,l){return(s.idMap.get(l)||r).has(o)}function w(s,o){let l=s.idMap.get(o)||r;for(let u of l)s.deadIds.add(u)}function H(s,o,l){let u=s.idMap.get(o)||r,d=0;for(let p of u)ue(s,p)&&de(s,p,l)&&++d;return d}function J(s,o){let l=s.parentElement,u=s.querySelectorAll("[id]");for(let d of u){let p=d;for(;p!==l&&p!=null;){let y=o.get(p);y==null&&(y=new Set,o.set(p,y)),y.add(d.id),p=p.parentElement}}}function pe(s,o){let l=new Map;return J(s,l),J(o,l),l}return{morph:t,defaults:e}}();function ee(r,e){if(!e.__objects){let t=new e,i=class extends FezBase{};Object.getOwnPropertyNames(t).concat(Object.getOwnPropertyNames(e.prototype)).filter(a=>!["constructor","prototype"].includes(a)).forEach(a=>i.prototype[a]=t[a]),Fez.fastBindInfo||={fast:[],slow:[]},t.CSS&&(i.css=t.CSS),t.HTML&&(i.html=t.HTML),t.NAME&&(i.nodeName=t.NAME),t.FAST?(i.fastBind=t.FAST,Fez.fastBindInfo.fast.push(typeof t.FAST=="function"?`${r} (func)`:r)):Fez.fastBindInfo.slow.push(r),e=i}e.html&&(e.html=Ce(e.html),e.html=e.html.replace(/<slot\s*\/>|<slot\s*>\s*<\/slot>/g,()=>{let t=e.slotNodeName||"div";return`<${t} class="fez-slot"></${t}>`}),e.fezHtmlFunc=_(e.html)),e.css&&(e.css=Fez.globalCss(e.css,{name:r})),Fez._classCache[r]=e,customElements.get(r)||customElements.define(r,class extends HTMLElement{connectedCallback(){Fe(this,e)||this.getAttribute("fast_connect")?x(r,this,Fez._classCache[r]):window.requestAnimationFrame(()=>{this.parentNode&&x(r,this,Fez._classCache[r])})}})}function Ce(r){let e=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return r.replace(/<([a-z-]+)\b([^>]*)\/>/g,(t,i,c)=>e.has(i)?t:`<${i}${c}></${i}>`)}function x(r,e,t){let i=e.parentNode;if(e.isConnected){let c=typeof t.nodeName=="function"?t.nodeName(e):t.nodeName,a=document.createElement(c||"div");a.classList.add("fez"),a.classList.add(`fez-${r}`),i.replaceChild(a,e);let f=new t;f.oldRoot=e,f.fezName=r,f.root=a,f.props=t.getProps(e,a),f.class=t,f.slot(e,a),a.fez=f,window.$&&(f.$root=$(a)),f.props.id&&a.setAttribute("id",f.props.id),f.fezRegister(),f.connect(f.props),t.__objects.push(f);let h=f.root.cloneNode(!0);f.class.fezHtmlFunc&&f.render();let m=f.root.querySelector(".fez-slot");if(m&&f.slot(h,m),f.onSubmit){let b=f.root.nodeName=="FORM"?f.root:f.find("form");b.onsubmit=g=>{g.preventDefault(),f.onSubmit(f.formData())}}f.afterConnect(),f.onMount();for(let[b,g]of Object.entries(f.props))/^\{\{/.test(g)&&/\}\}$/.test(g)&&(g=g.replace(/^\{\{/,"return (").replace(/\}\}$/,")"),g=new Function(g).bind(f.root)(),f.props[b]=g);if(f.onPropsChange){Me.observe(a,{attributes:!0});for(let[b,g]of Object.entries(f.props))f.onPropsChange(b,g)}}}function Fe(r,e){return typeof e.fastBind=="function"?e.fastBind(r):e.fastBind}var Me=new MutationObserver((r,e)=>{for(let t of r)if(t.type==="attributes"){let i=t.target.fez,c=t.attributeName,a=t.target.getAttribute(c);i.props[c]=a,i.onPropsChange(c,a)}});var we=r=>{let e={script:"",style:"",html:""},t=r.split(`
`),i=[],c="";for(let f of t)f.trim().startsWith("<script")&&!e.script?c="script":f.trim().startsWith("<style")?c="style":f.trim().endsWith("<\/script>")&&c==="script"&&!e.script?(e.script=i.join(`
`),i=[],c=null):f.trim().endsWith("</style>")&&c==="style"?(e.style=i.join(`
`),i=[],c=null):c?i.push(f):e.html+=f+`
`;let a=e.script;return/class\s+\{/.test(a)||(a=`class {
${a}
}`),String(e.style).includes(":")&&(e.style=e.style.includes(":fez")?e.style:`:fez {
${e.style}
}`,a=a.replace(/\}\s*$/,`
  CSS = \`${e.style}\`
}`)),/\w/.test(String(e.html))&&(e.html=e.html.replaceAll("$","\\$"),a=a.replace(/\}\s*$/,`
  HTML = \`${e.html}\`
}`)),a};function te(r,e){if(r instanceof Node)r.remove(),e=r.innerHTML,r=r.getAttribute("fez");else if(typeof e!="string"){document.body.querySelectorAll("template[fez]").forEach(c=>Fez.compile(c));return}let t=we(e),i=t.split(/class\s+\{/,2);t=`${i[0]};

window.Fez('${r}', class {
${i[1]})`;try{new Function(t)()}catch(c){console.error(`FEZ template "${r}" compile error: ${c.message}`),console.log(e),console.log(t)}}var v=(r,e)=>r?typeof e!="function"?v.find(r,e):ee(r,e):FezBase;v._classCache={};v.find=(r,e)=>{typeof r=="string"&&(r=document.body.querySelector(r)),typeof r.val=="function"&&(r=r[0]);let t=e?`.fez-${e}`:".fez";return r.closest(t).fez};v.cssClass=r=>Y.css(r);v.globalCss=(r,e={})=>{if(typeof r=="function"&&(r=r()),r.includes(":")){let t=r.split(`
`).filter(i=>!/^\s*\/\//.test(i)).join(`
`);t=t.replace(/\:fez|\:host/,`.fez.fez-${e.name}`),e.wrap&&(t=`.fez.fez-${e.name} { ${t} }`),r=v.cssClass(t)}return document.body?document.body.classList.add(r):document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(r)}),r};v.info=()=>{console.log(JSON.stringify(v.fastBindInfo,null,2))};v.morphdom=(r,e,t={})=>{Array.from(r.attributes).forEach(c=>{e.setAttribute(c.name,c.value)}),Q.morph(r,e,{morphStyle:"outerHTML"});let i=r.nextSibling;i?.nodeType===Node.TEXT_NODE&&i.textContent.trim()===""&&i.remove()};v.htmlEscape=r=>typeof r=="string"?r.replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("@","&#64;"):r;v.publish=(r,...e)=>{v._subs||={},v._subs[r]||=[],v._subs[r].forEach(t=>{t[1].bind(t[0])(...e)})};v.fnv1=r=>{var e,t,i,c,a,f;for(e=2166136261,t=16777619,i=e,c=a=0,f=r.length-1;0<=f?a<=f:a>=f;c=0<=f?++a:--a)i^=r.charCodeAt(c),i*=t;return i.toString(36).replaceAll("-","")};v.tag=(r,e={},t="")=>{let i=encodeURIComponent(JSON.stringify(e));return`<${r} data-props="${i}">${t}</${r}>`};v.head=r=>{let e=document.createElement("div");e.innerHTML=r,Array.from(e.childNodes).forEach(t=>{if(t.tagName==="SCRIPT"){let i=document.createElement("script");Array.from(t.attributes).forEach(c=>{i.setAttribute(c.name,c.value)}),t.textContent&&(i.textContent=t.textContent),document.head.appendChild(i)}else document.head.appendChild(t)})};v.untilTrue=(r,e)=>{r()||setTimeout(r,e||200)};v.getScript=(r,e,t)=>{let i={},c=null;typeof e=="function"?c=e:typeof e=="object"&&(i=e,c=t);let a=i.rel==="stylesheet",f=a?"link":"script",h=document.querySelector(`${f}[src="${r}"], ${f}[href="${r}"]`);if(h)return c&&c(),h;let m=document.createElement(f);a?m.href=r:m.src=r;for(let[b,g]of Object.entries(i))(b!=="type"||g!=="css")&&m.setAttribute(b,g);return c&&(m.onload=c),document.head.appendChild(m),m};v.compile=te;var j=v;window.FezBase=N;window.Fez=j;j("fez-compile",class{connect(r){this.root.querySelectorAll("template[fez]").forEach(e=>{j.compile(e)})}});setInterval(()=>{N.__objects=N.__objects.filter(r=>r.isConnected)},5e3);document.addEventListener("DOMContentLoaded",j.compile);})();
//# sourceMappingURL=fez.js.map
