(()=>{function k(r,e={},t){if(typeof e=="string"&&([e,t]=[t,e],e||={}),e instanceof Node&&(t=e,e={}),Array.isArray(r)&&(t=r,r="div"),(typeof e!="object"||Array.isArray(e))&&(t=e,e={}),r.includes(".")){let c=r.split(".");r=c.shift()||"div";let f=c.join(" ");e.class?e.class+=` ${f}`:e.class=f}let i=document.createElement(r);for(let[c,f]of Object.entries(e))if(typeof f=="function")i[c]=f.bind(this);else{let a=String(f).replaceAll("$$.",this.fezHtmlRoot);i.setAttribute(c,a)}if(t)if(Array.isArray(t))for(let c of t)i.appendChild(c);else t instanceof Node?i.appendChild(t):i.innerHTML=String(t);return i}function me(r,e){if(r=r.replaceAll("#raw","@html").replaceAll("#html","@html").replaceAll("@","this."),r.startsWith("#if")||r.startsWith("if"))return e.push(!1),r=r.replace(/^#?if/,""),`\${ ${r} ? \``;if(r.startsWith("#block")||r.startsWith("block")){let t=r.split("block ",2),i=r.split("block:",2);return t[1]?"${(this.fezBlocks."+t[1]+" = `":"${ this.fezBlocks."+i[1]+" }"}else{if(r=="/block")return"`) && ''}";if(r.startsWith("#for")||r.startsWith("for")){r=r.replace(/^#?for/,"");let t=r.split(" in ",2);return"${"+t[1]+".map(("+t[0]+")=>`"}else if(r.startsWith("#each")||r.startsWith("each")){r=r.replace(/^#?each/,"");let t=r.split(" as ",2);return"${"+t[0]+".map(("+t[1]+")=>`"}else{if(r==":else"||r=="else")return e[e.length-1]=!0,"` : `";if(r=="/if")return e.pop()?"`}":"` : ``}";if(r=="/for"||r=="/each")return'`).join("")}';{let t="this.html ";return r.startsWith(t)?r=r.replace(t,""):r=`Fez.htmlEscape(${r})`,"${"+r+"}"}}}}function I(r,e={}){let t=[];r=r.replaceAll("[[","{{").replaceAll("]]","}}"),r=r.replace(/:(\w+)="([\w\.\[\]]+)"/,(c,f,a)=>`:${f}="{{ JSON.stringify(${a}) }}"`);let i=r.replace(/{{(.*?)}}/g,(c,f)=>(f=f.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),me(f,t)));i="`"+i.trim()+"`";try{let c=new Function(`return ${i}`);return a=>{try{return c.bind(a)()}catch(h){h.message=`FEZ template runtime error: ${h.message}

Template source: ${r}`,console.error(h)}}}catch(c){c.message=`FEZ template compile error: ${c.message}Template source:
${r.trim()}

Compile result (produced invalid JS):
new Function(${i})
`,console.error(c)}}var L=class{static __objects=[];static getProps(e,t){let i={};for(let c of e.attributes)i[c.name]=c.value;if(i["data-props"]){let c=i["data-props"];c[0]!="{"&&(c=decodeURIComponent(c)),i=JSON.parse(c)}if(i["data-json-template"]){let c=t.previousSibling?.textContent;c&&(i=JSON.parse(c),t.previousSibling.remove())}for(let[c,f]of Object.entries(i))if([":"].includes(c[0])){delete i[c];let a=new Function(`return (${f})`).bind(t)();i[c.replace(/[\:_]/,"")]=a}return i}static formData(e){let t=e.closest("form")||e.querySelector("form"),i=new FormData(t),c={};return i.forEach((f,a)=>{c[a]=f}),c}static fastBind(){return!1}static nodeName="div";constructor(){}n=k;get fezHtmlRoot(){return this.props.id?`Fez.find("#${this.props.id}").`:`Fez.find(this, "${this.fezName}").`}get isConnected(){return this.root?.isConnected?!0:(this._setIntervalCache||={},Object.keys(this._setIntervalCache).forEach(e=>{clearInterval(this._setIntervalCache[e])}),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0,!1)}prop(e){let t=this.oldRoot[e]||this.props[e];return typeof t=="function"&&(t=t.bind(this.root)),t}copy(){for(let e of Array.from(arguments)){let t=this.props[e];if(t!==void 0){if(e=="class"){let i=this.root.getAttribute(e,t);i&&(t=[i,t].join(" "))}(e=="style"||!this.root[e])&&(typeof t=="string"?this.root.setAttribute(e,t):this.root[e]=t)}}}onResize(e,t){let i,c=0;e();let f=()=>{if(!this.isConnected){window.removeEventListener("resize",a);return}e.call(this)},a=()=>{if(!this.isConnected){window.removeEventListener("resize",a);return}if(t){let h=Date.now();h-c>=t&&(f(),c=h)}else clearTimeout(i),i=setTimeout(f,200)};window.addEventListener("resize",a)}slot(e,t){t||=document.createElement("template");let i=t.nodeName=="SLOT";for(;e.firstChild;)i?t.parentNode.insertBefore(e.lastChild,t.nextSibling):t.appendChild(e.firstChild);return i?t.parentNode.removeChild(t):e.innerHTML="",t}style(){console.error("call Fez static style")}connect(){}afterConnect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}publish=Fez.publish;fezBlocks={};parseHtml(e){let t=this.fezHtmlRoot.replaceAll('"',"&quot;");return e=e.replaceAll("@@","__FEZ_HIDE__").replaceAll("$$.",t).replaceAll("@.",t).replaceAll("@",t).replace(/(.)@(\w+[\.\(])/g,(i,c,f)=>c=="@"?`@${f}`:`${c}${t}${f}`).replace(/([^\w\.])fez\./g,`$1${t}`).replace(/>\s+</g,"><").replaceAll("__FEZ_HIDE__","@"),e.trim()}nextTick(e,t){t?(this._nextTicks||={},this._nextTicks[t]||=window.requestAnimationFrame(()=>{e.bind(this)(),this._nextTicks[t]=null},t)):window.requestAnimationFrame(e.bind(this))}render(e){if(e||=this?.class?.fezHtmlFunc,!e)return;this.beforeRender();let t=document.createElement(this.class.nodeName||"div"),i;Array.isArray(e)?e[0]instanceof Node?e.forEach(a=>t.appendChild(a)):i=e.join(""):typeof e=="string"?i=I(e)(this):typeof e=="function"&&(i=e(this)),i&&(i=i.replace(/\s\w+="undefined"/g,""),t.innerHTML=this.parseHtml(i));let c=t.querySelector("slot");c&&(this.slot(this.root,c.parentNode),c.parentNode.removeChild(c));let f=this.find(".fez-slot");if(f){let a=t.querySelector(".fez-slot");a&&a.parentNode.replaceChild(f,a)}Fez.morphdom(this.root,t),this.renderFezPostProcess(),this.afterRender()}renderFezPostProcess(){let e=(t,i)=>{this.root.querySelectorAll(`*[${t}]`).forEach(c=>{let f=c.getAttribute(t);c.removeAttribute(t),f&&i.bind(this)(f,c)})};e("fez-this",(t,i)=>{new Function("n",`this.${t} = n`).bind(this)(i)}),e("fez-use",(t,i)=>{let c=this[t];typeof c=="function"?c(i):console.error(`Fez error: "${t}" is not a function in ${this.fezName}`)}),e("fez-class",t=>{let i=t.split(/\s+/),c=i.pop();i.forEach(f=>n.classList.add(f)),c&&setTimeout(()=>{n.classList.add(c)},300)}),e("fez-bind",(t,i)=>{if(["INPUT","SELECT","TEXTAREA"].includes(i.nodeName)){let c=new Function(`return this.${t}`).bind(this)(),f=i.type.toLowerCase()=="checkbox",a=["SELECT"].includes(i.nodeName)||f?"onchange":"onkeyup";i.setAttribute(a,`${this.fezHtmlRoot}${t} = this.${f?"checked":"value"}`),this.val(i,c)}else console.error(`Cant fez-bind="${t}" to ${i.nodeName} (needs INPUT, SELECT or TEXTAREA. Want to use fez-this?).`)})}refresh(e){if(alert("NEEDS FIX and remove htmlTemplate"),e){let t=document.createElement("div");t.innerHTML=this.class.htmlTemplate;let i=t.querySelector(e).innerHTML;this.render(e,i)}else this.render()}setInterval(e,t,i){return typeof e=="number"&&([t,e]=[e,t]),i||=Fez.fnv1(String(e)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[i]),this._setIntervalCache[i]=setInterval(()=>{this.isConnected&&e()},t),this._setIntervalCache[i]}find(e){return typeof e=="string"?this.root.querySelector(e):e}val(e,t){let i=this.find(e);if(i)if(["INPUT","TEXTAREA","SELECT"].includes(i.nodeName))if(typeof t<"u")i.type=="checkbox"?i.checked=!!t:i.value=t;else return i.value;else if(typeof t<"u")i.innerHTML=t;else return i.innerHTML}formData(e){return this.class.formData(e||this.root)}attr(e,t){return typeof t>"u"?this.root.getAttribute(e):(this.root.setAttribute(e,t),t)}childNodes(e){let t=Array.from(this.root.querySelectorAll(":scope > *"));return e&&(t=t.map(e)),t}subscribe(e,t){Fez._subs||={},Fez._subs[e]||=[],Fez._subs[e]=Fez._subs[e].filter(i=>i[0].isConnected),Fez._subs[e].push([this,t])}nodeId(){return this._id||(this._id=Fez.id(),this.root.id=this._id),this._id}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.reactiveStore(),this.data||={},this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(t=>t!=="constructor"&&typeof this[t]=="function").forEach(t=>this[t]=this[t].bind(this))}fezHide(){let e=this.root,t=this.root.parentNode,i=document.createDocumentFragment();for(;e.firstChild;)i.appendChild(e.firstChild);return e.parentNode.replaceChild(i,e),this.root=t,this.childNodes()}reactiveStore(e,t){e||={},t||=(c,f,a)=>{this.nextTick(this.render,"render")},t.bind(this);function i(c,f){return typeof c!="object"||c===null?c:new Proxy(c,{set(a,h,m,y){if(Reflect.get(a,h,y)!==m){typeof m=="object"&&m!==null&&(m=i(m,f));let E=Reflect.set(a,h,m,y);return f(a,h,m),E}return!0},get(a,h,m){let y=Reflect.get(a,h,m);return typeof y=="object"&&y!==null?i(y,f):y}})}return i(e,t)}};var be={data:""},X=r=>typeof window=="object"?((r?r.querySelector("#_goober"):window._goober)||Object.assign((r||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:r||be,ye=r=>{let e=X(r),t=e.data;return e.data="",t},ge=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ve=/\/\*[^]*?\*\/|  +/g,Z=/\n+/g,F=(r,e)=>{let t="",i="",c="";for(let f in r){let a=r[f];f[0]=="@"?f[1]=="i"?t=f+" "+a+";":i+=f[1]=="f"?F(a,f):f+"{"+F(a,f[1]=="k"?"":e)+"}":typeof a=="object"?i+=F(a,e?e.replace(/([^,])+/g,h=>f.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,h):h?h+" "+m:m)):f):a!=null&&(f=/^--/.test(f)?f:f.replace(/[A-Z]/g,"-$&").toLowerCase(),c+=F.p?F.p(f,a):f+":"+a+";")}return t+(e&&c?e+"{"+c+"}":c)+i},C={},G=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+G(r[t]);return e}return r},Ae=(r,e,t,i,c)=>{let f=G(r),a=C[f]||(C[f]=(m=>{let y=0,v=11;for(;y<m.length;)v=101*v+m.charCodeAt(y++)>>>0;return"go"+v})(f));if(!C[a]){let m=f!==r?r:(y=>{let v,E,M=[{}];for(;v=ge.exec(y.replace(ve,""));)v[4]?M.shift():v[3]?(E=v[3].replace(Z," ").trim(),M.unshift(M[0][E]=M[0][E]||{})):M[0][v[1]]=v[2].replace(Z," ").trim();return M[0]})(r);C[a]=F(c?{["@keyframes "+a]:m}:m,t?"":"."+a)}let h=t&&C.g?C.g:null;return t&&(C.g=C[a]),((m,y,v,E)=>{E?y.data=y.data.replace(E,m):y.data.indexOf(m)===-1&&(y.data=v?m+y.data:y.data+m)})(C[a],e,i,h),a},Se=(r,e,t)=>r.reduce((i,c,f)=>{let a=e[f];if(a&&a.call){let h=a(t),m=h&&h.props&&h.props.className||/^go/.test(h)&&h;a=m?"."+m:h&&typeof h=="object"?h.props?"":F(h,""):h===!1?"":h}return i+c+(a??"")},"");function j(r){let e=this||{},t=r.call?r(e.p):r;return Ae(t.unshift?t.raw?Se(t,[].slice.call(arguments,1),e.p):t.reduce((i,c)=>Object.assign(i,c&&c.call?c(e.p):c),{}):t,X(e.target),e.g,e.o,e.k)}var K,B,P,Ee=j.bind({g:1}),ze=j.bind({k:1});function Te(r,e,t,i){F.p=e,K=r,B=t,P=i}function Ce(r,e){let t=this||{};return function(){let i=arguments;function c(f,a){let h=Object.assign({},f),m=h.className||c.className;t.p=Object.assign({theme:B&&B()},h),t.o=/ *go\d+/.test(m),h.className=j.apply(t,i)+(m?" "+m:""),e&&(h.ref=a);let y=r;return r[0]&&(y=h.as||r,delete h.as),P&&y[0]&&P(h),K(y,h)}return e?e(c):c}}var Y={css:j,extractCss:ye,glob:Ee,keyframes:ze,setup:Te,styled:Ce};var Q=function(){"use strict";let r=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:T,afterNodeAdded:T,beforeNodeMorphed:T,afterNodeMorphed:T,beforeNodeRemoved:T,afterNodeRemoved:T,beforeAttributeUpdated:T},head:{style:"merge",shouldPreserve:function(s){return s.getAttribute("im-preserve")==="true"},shouldReAppend:function(s){return s.getAttribute("im-re-append")==="true"},shouldRemove:T,afterHeadMorphed:T}};function t(s,o,l={}){s instanceof Document&&(s=s.documentElement),typeof o=="string"&&(o=oe(o));let u=le(o),d=ne(s,u,l);return i(s,u,d)}function i(s,o,l){if(l.head.block){let u=s.querySelector("head"),d=o.querySelector("head");if(u&&d){let p=E(d,u,l);Promise.all(p).then(function(){i(s,o,Object.assign(l,{head:{block:!1,ignore:!0}}))});return}}if(l.morphStyle==="innerHTML")return a(o,s,l),s.children;if(l.morphStyle==="outerHTML"||l.morphStyle==null){let u=fe(o,s,l),d=u?.previousSibling,p=u?.nextSibling,b=f(s,u,l);return u?ce(d,b,p):[]}else throw"Do not understand how to morph style "+l.morphStyle}function c(s,o){return o.ignoreActiveValue&&s===document.activeElement&&s!==document.body}function f(s,o,l){if(!(l.ignoreActive&&s===document.activeElement))return o==null?l.callbacks.beforeNodeRemoved(s)===!1?s:(s.remove(),l.callbacks.afterNodeRemoved(s),null):R(s,o)?(l.callbacks.beforeNodeMorphed(s,o)===!1||(s instanceof HTMLHeadElement&&l.head.ignore||(s instanceof HTMLHeadElement&&l.head.style!=="morph"?E(o,s,l):(m(o,s,l),c(s,l)||a(o,s,l))),l.callbacks.afterNodeMorphed(s,o)),s):l.callbacks.beforeNodeRemoved(s)===!1||l.callbacks.beforeNodeAdded(o)===!1?s:(s.parentElement.replaceChild(o,s),l.callbacks.afterNodeAdded(o),l.callbacks.afterNodeRemoved(s),o)}function a(s,o,l){let u=s.firstChild,d=o.firstChild,p;for(;u;){if(p=u,u=p.nextSibling,d==null){if(l.callbacks.beforeNodeAdded(p)===!1)return;o.appendChild(p),l.callbacks.afterNodeAdded(p),w(l,p);continue}if(q(p,d,l)){f(d,p,l),d=d.nextSibling,w(l,p);continue}let b=ie(s,o,p,d,l);if(b){d=V(d,b,l),f(b,p,l),w(l,p);continue}let A=se(s,o,p,d,l);if(A){d=V(d,A,l),f(A,p,l),w(l,p);continue}if(l.callbacks.beforeNodeAdded(p)===!1)return;o.insertBefore(p,d),l.callbacks.afterNodeAdded(p),w(l,p)}for(;d!==null;){let b=d;d=d.nextSibling,W(b,l)}}function h(s,o,l,u){return s==="value"&&u.ignoreActiveValue&&o===document.activeElement?!0:u.callbacks.beforeAttributeUpdated(s,o,l)===!1}function m(s,o,l){let u=s.nodeType;if(u===1){let d=s.attributes,p=o.attributes;for(let b of d)if(!h(b.name,o,"update",l))try{o.getAttribute(b.name)!==b.value&&o.setAttribute(b.name,b.value)}catch(A){console.error("Error setting attribute:",{badNode:o,badAttribute:b,error:A.message})}for(let b=p.length-1;0<=b;b--){let A=p[b];h(A.name,o,"remove",l)||s.hasAttribute(A.name)||o.removeAttribute(A.name)}}(u===8||u===3)&&o.nodeValue!==s.nodeValue&&(o.nodeValue=s.nodeValue),c(o,l)||v(s,o,l)}function y(s,o,l,u){if(s[l]!==o[l]){let d=h(l,o,"update",u);d||(o[l]=s[l]),s[l]?d||o.setAttribute(l,s[l]):h(l,o,"remove",u)||o.removeAttribute(l)}}function v(s,o,l){if(s instanceof HTMLInputElement&&o instanceof HTMLInputElement&&s.type!=="file"){let u=s.value,d=o.value;y(s,o,"checked",l),y(s,o,"disabled",l),s.hasAttribute("value")?u!==d&&(h("value",o,"update",l)||(o.setAttribute("value",u),o.value=u)):h("value",o,"remove",l)||(o.value="",o.removeAttribute("value"))}else if(s instanceof HTMLOptionElement)y(s,o,"selected",l);else if(s instanceof HTMLTextAreaElement&&o instanceof HTMLTextAreaElement){let u=s.value,d=o.value;if(h("value",o,"update",l))return;u!==d&&(o.value=u),o.firstChild&&o.firstChild.nodeValue!==u&&(o.firstChild.nodeValue=u)}}function E(s,o,l){let u=[],d=[],p=[],b=[],A=l.head.style,_=new Map;for(let S of s.children)_.set(S.outerHTML,S);for(let S of o.children){let z=_.has(S.outerHTML),H=l.head.shouldReAppend(S),O=l.head.shouldPreserve(S);z||O?H?d.push(S):(_.delete(S.outerHTML),p.push(S)):A==="append"?H&&(d.push(S),b.push(S)):l.head.shouldRemove(S)!==!1&&d.push(S)}b.push(..._.values());let J=[];for(let S of b){let z=document.createRange().createContextualFragment(S.outerHTML).firstChild;if(l.callbacks.beforeNodeAdded(z)!==!1){if(z.href||z.src){let H=null,O=new Promise(function(he){H=he});z.addEventListener("load",function(){H()}),J.push(O)}o.appendChild(z),l.callbacks.afterNodeAdded(z),u.push(z)}}for(let S of d)l.callbacks.beforeNodeRemoved(S)!==!1&&(o.removeChild(S),l.callbacks.afterNodeRemoved(S));return l.head.afterHeadMorphed(o,{added:u,kept:p,removed:d}),J}function M(){}function T(){}function re(s){let o={};return Object.assign(o,e),Object.assign(o,s),o.callbacks={},Object.assign(o.callbacks,e.callbacks),Object.assign(o.callbacks,s.callbacks),o.head={},Object.assign(o.head,e.head),Object.assign(o.head,s.head),o}function ne(s,o,l){return l=re(l),{target:s,newContent:o,config:l,morphStyle:l.morphStyle,ignoreActive:l.ignoreActive,ignoreActiveValue:l.ignoreActiveValue,idMap:pe(s,o),deadIds:new Set,callbacks:l.callbacks,head:l.head}}function q(s,o,l){return s==null||o==null?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName?s.id!==""&&s.id===o.id?!0:N(l,s,o)>0:!1}function R(s,o){return s==null||o==null?!1:s.nodeType===o.nodeType&&s.tagName===o.tagName}function V(s,o,l){for(;s!==o;){let u=s;s=s.nextSibling,W(u,l)}return w(l,o),o.nextSibling}function ie(s,o,l,u,d){let p=N(d,l,o),b=null;if(p>0){let A=u,_=0;for(;A!=null;){if(q(l,A,d))return A;if(_+=N(d,A,s),_>p)return null;A=A.nextSibling}}return b}function se(s,o,l,u,d){let p=u,b=l.nextSibling,A=0;for(;p!=null;){if(N(d,p,s)>0)return null;if(R(l,p))return p;if(R(b,p)&&(A++,b=b.nextSibling,A>=2))return null;p=p.nextSibling}return p}function oe(s){let o=new DOMParser,l=s.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(l.match(/<\/html>/)||l.match(/<\/head>/)||l.match(/<\/body>/)){let u=o.parseFromString(s,"text/html");if(l.match(/<\/html>/))return u.generatedByIdiomorph=!0,u;{let d=u.firstChild;return d?(d.generatedByIdiomorph=!0,d):null}}else{let d=o.parseFromString("<body><template>"+s+"</template></body>","text/html").body.querySelector("template").content;return d.generatedByIdiomorph=!0,d}}function le(s){if(s==null)return document.createElement("div");if(s.generatedByIdiomorph)return s;if(s instanceof Node){let o=document.createElement("div");return o.append(s),o}else{let o=document.createElement("div");for(let l of[...s])o.append(l);return o}}function ce(s,o,l){let u=[],d=[];for(;s!=null;)u.push(s),s=s.previousSibling;for(;u.length>0;){let p=u.pop();d.push(p),o.parentElement.insertBefore(p,o)}for(d.push(o);l!=null;)u.push(l),d.push(l),l=l.nextSibling;for(;u.length>0;)o.parentElement.insertBefore(u.pop(),o.nextSibling);return d}function fe(s,o,l){let u;u=s.firstChild;let d=u,p=0;for(;u;){let b=ae(u,o,l);b>p&&(d=u,p=b),u=u.nextSibling}return d}function ae(s,o,l){return R(s,o)?.5+N(l,s,o):0}function W(s,o){w(o,s),o.callbacks.beforeNodeRemoved(s)!==!1&&(s.remove(),o.callbacks.afterNodeRemoved(s))}function ue(s,o){return!s.deadIds.has(o)}function de(s,o,l){return(s.idMap.get(l)||r).has(o)}function w(s,o){let l=s.idMap.get(o)||r;for(let u of l)s.deadIds.add(u)}function N(s,o,l){let u=s.idMap.get(o)||r,d=0;for(let p of u)ue(s,p)&&de(s,p,l)&&++d;return d}function U(s,o){let l=s.parentElement,u=s.querySelectorAll("[id]");for(let d of u){let p=d;for(;p!==l&&p!=null;){let b=o.get(p);b==null&&(b=new Set,o.set(p,b)),b.add(d.id),p=p.parentElement}}}function pe(s,o){let l=new Map;return U(s,l),U(o,l),l}return{morph:t,defaults:e}}();function ee(r,e){if(!e.__objects){let t=new e,i=class extends FezBase{};Object.getOwnPropertyNames(t).concat(Object.getOwnPropertyNames(e.prototype)).filter(f=>!["constructor","prototype"].includes(f)).forEach(f=>i.prototype[f]=t[f]),Fez.fastBindInfo||={fast:[],slow:[]},t.CSS&&(i.css=t.CSS),t.HTML&&(i.html=t.HTML),t.NAME&&(i.nodeName=t.NAME),t.FAST?(i.fastBind=t.FAST,Fez.fastBindInfo.fast.push(typeof t.FAST=="function"?`${r} (func)`:r)):Fez.fastBindInfo.slow.push(r),e=i}e.html&&(e.html=Fe(e.html),e.html=e.html.replace(/<slot\s*\/>|<slot\s*>\s*<\/slot>/g,()=>{let t=e.slotNodeName||"div";return`<${t} class="fez-slot"></${t}>`}),e.fezHtmlFunc=I(e.html)),e.css&&(e.css=Fez.globalCss(e.css,{name:r})),Fez._classCache[r]=e,customElements.get(r)||customElements.define(r,class extends HTMLElement{connectedCallback(){let t=$e(this,e)||this.getAttribute("fast_connect");this.getAttribute("fast_connect")=="false"&&(t=!1),t?x(r,this,Fez._classCache[r]):window.requestAnimationFrame(()=>{this.parentNode&&x(r,this,Fez._classCache[r])})}})}function Fe(r){let e=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return r.replace(/<([a-z-]+)\b([^>]*)\/>/g,(t,i,c)=>e.has(i)?t:`<${i}${c}></${i}>`)}function x(r,e,t){let i=e.parentNode;if(e.isConnected){let c=typeof t.nodeName=="function"?t.nodeName(e):t.nodeName,f=document.createElement(c||"div");f.classList.add("fez"),f.classList.add(`fez-${r}`),i.replaceChild(f,e);let a=new t;a.oldRoot=e,a.fezName=r,a.root=f,a.props=t.getProps(e,f),a.class=t,a.slot(e,f),f.fez=a,window.$&&(a.$root=$(f)),a.props.id&&f.setAttribute("id",a.props.id),a.fezRegister(),a.connect(a.props),t.__objects.push(a);let h=a.root.cloneNode(!0);a.class.fezHtmlFunc&&a.render();let m=a.root.querySelector(".fez-slot");if(m&&(a.props.html?m.innerHTML=a.props.html:a.slot(h,m)),a.onSubmit){let y=a.root.nodeName=="FORM"?a.root:a.find("form");y.onsubmit=v=>{v.preventDefault(),a.onSubmit(a.formData())}}if(a.afterConnect(),a.onMount(),a.onPropsChange){Me.observe(f,{attributes:!0});for(let[y,v]of Object.entries(a.props))a.onPropsChange(y,v)}}}function $e(r,e){return typeof e.fastBind=="function"?e.fastBind(r):e.fastBind}var Me=new MutationObserver((r,e)=>{for(let t of r)if(t.type==="attributes"){let i=t.target.fez,c=t.attributeName,f=t.target.getAttribute(c);i&&(i.props[c]=f,i.onPropsChange(c,f))}});var we=r=>{let e={script:"",style:"",html:"",head:""},t=r.split(`
`),i=[],c="";for(var f of t)f=f.trim(),f.startsWith("<script")&&!e.script&&c!="head"?c="script":f.startsWith("<head")?c="head":f.startsWith("<style")?c="style":f.endsWith("<\/script>")&&c==="script"&&!e.script?(e.script=i.join(`
`),i=[],c=null):f.endsWith("</style>")&&c==="style"?(e.style=i.join(`
`),i=[],c=null):f.endsWith("</head>")&&c==="head"?(e.head=i.join(`
`),i=[],c=null):c?i.push(f):e.html+=f+`
`;if(e.head){let h=document.createElement("div");h.innerHTML=e.head,h.querySelectorAll("script").forEach(m=>{m.type||="text/javascript",!m.src&&m.type.includes("javascript")&&new Function(m.textContent)()}),document.head.innerHTML+=e.head}let a=e.script;return/class\s+\{/.test(a)||(a=`class {
${a}
}`),String(e.style).includes(":")&&(e.style=e.style.includes(":fez")?e.style:`:fez {
${e.style}
}`,a=a.replace(/\}\s*$/,`
  CSS = \`${e.style}\`
}`)),/\w/.test(String(e.html))&&(e.html=e.html.replaceAll("$","\\$"),a=a.replace(/\}\s*$/,`
  HTML = \`${e.html}\`
}`)),a};function te(r,e){if(r instanceof Node)r.remove(),e=r.innerHTML,r=r.getAttribute("fez");else if(typeof e!="string"){document.body.querySelectorAll("template[fez], xmp[fez]").forEach(c=>Fez.compile(c));return}let t=we(e),i=t.split(/class\s+\{/,2);t=`${i[0]};

window.Fez('${r}', class {
${i[1]})`;try{new Function(t)()}catch(c){console.error(`FEZ template "${r}" compile error: ${c.message}`),console.log(e),console.log(t)}}var g=(r,e)=>r?typeof e!="function"?g.find(r,e):ee(r,e):FezBase;g._classCache={};g.id=()=>{g._id_count||=0,g._id_count+=1;let r=Math.random().toString(36).substring(2,6);return`fez_${g._id_count}${r}`};g.find=(r,e)=>{let t=r;typeof t=="string"&&(t=document.body.querySelector(t)),typeof t.val=="function"&&(t=t[0]);let i=e?`.fez.fez-${e}`:".fez",c=t.closest(i).fez;if(c)return c;console.error("Fez node connector not found",r,t)};g.cssClass=r=>Y.css(r);g.globalCss=(r,e={})=>{if(typeof r=="function"&&(r=r()),r.includes(":")){let t=r.split(`
`).filter(i=>!/^\s*\/\//.test(i)).join(`
`);t=t.replace(/\:fez|\:host/,`.fez.fez-${e.name}`),e.wrap&&(t=`.fez.fez-${e.name} { ${t} }`),r=g.cssClass(t)}return document.body?document.body.classList.add(r):document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(r)}),r};g.info=()=>{console.log(JSON.stringify(g.fastBindInfo,null,2))};g.morphdom=(r,e,t={})=>{Array.from(r.attributes).forEach(c=>{e.setAttribute(c.name,c.value)}),Q.morph(r,e,{morphStyle:"outerHTML"});let i=r.nextSibling;i?.nodeType===Node.TEXT_NODE&&i.textContent.trim()===""&&i.remove()};g.htmlEscape=r=>typeof r=="string"?r.replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("@","&#64;"):r;g.publish=(r,...e)=>{g._subs||={},g._subs[r]||=[],g._subs[r].forEach(t=>{t[1].bind(t[0])(...e)})};g.fnv1=r=>{var e,t,i,c,f,a;for(e=2166136261,t=16777619,i=e,c=f=0,a=r.length-1;0<=a?f<=a:f>=a;c=0<=a?++f:--f)i^=r.charCodeAt(c),i*=t;return i.toString(36).replaceAll("-","")};g.tag=(r,e={},t="")=>{let i=encodeURIComponent(JSON.stringify(e));return`<${r} data-props="${i}">${t}</${r}>`};g.head=(r,e)=>{if(r.includes("<")){let t=document.createElement("div");t.innerHTML=r,Array.from(t.childNodes).forEach(i=>{if(i.tagName==="SCRIPT"){let c=document.createElement("script");Array.from(i.attributes).forEach(f=>{c.setAttribute(f.name,f.value)}),i.textContent&&(c.textContent=i.textContent),document.head.appendChild(c)}else document.head.appendChild(i)})}else if(e||=r.includes("css")?"css":"js",e=="css"){let t=document.createElement("link");t.rel="stylesheet",t.href=r,document.head.appendChild(t)}else{let t=document.createElement("script");t.src=r,document.head.appendChild(t)}};g.untilTrue=(r,e)=>{r()||setTimeout(r,e||200)};g.getScript=(r,e,t)=>{let i={},c=null;typeof e=="function"?c=e:typeof e=="object"&&(i=e,c=t);let f=i.rel==="stylesheet",a=f?"link":"script",h=document.querySelector(`${a}[src="${r}"], ${a}[href="${r}"]`);if(h)return c&&c(),h;let m=document.createElement(a);f?m.href=r:m.src=r;for(let[y,v]of Object.entries(i))(y!=="type"||v!=="css")&&m.setAttribute(y,v);return c&&(m.onload=c),document.head.appendChild(m),m};g.compile=te;var D=g;window.FezBase=L;window.Fez=D;setInterval(()=>{L.__objects=L.__objects.filter(r=>r.isConnected)},5e3);var _e=new MutationObserver(r=>{for(let{addedNodes:e}of r)e.forEach(t=>{t.nodeType===1&&t.matches("template[fez], xmp[fez]")&&window.requestAnimationFrame(()=>{D.compile(t),t.remove()})})});_e.observe(document.documentElement,{childList:!0,subtree:!0});})();
//# sourceMappingURL=fez.js.map
