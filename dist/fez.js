(()=>{function q(l,e){let s=/(\r\n|\r|\n)/g,o=/{{\s*(.+?)\s*}}/g,p=/^each\s+(.*)\s+as\s+(.*)$/,d=/^if\s+(.*)$/,u=/^else if\s+(.*)$/;function a(A){let E=T=>T.replaceAll("@","this."),R=`
      let _strings = [], _sequence = [], _values = [];

      function htmlEscape(text) {
        if (typeof text === 'string') {
          return text
            .replaceAll("'", '&apos;')
            .replaceAll('"', '&quot;')
            .replaceAll('<', '&lt;')
            .replaceAll('>', '&gt;')
        } else {
          return text
        }
      }

      _sequence.push('${A.trim().replace(s,"\\n").replace(o,(T,y)=>{if(y=y.replace(/^[#:]/,""),y.startsWith("each")||y.startsWith("for")){let S=y.split(/\s+/);if(S.shift()==="for"){let N=S.pop();S.pop(),y=`each ${N} as ${S.join(" ")}`}let z=p.exec(y);if(z)return z[1]=E(z[1]),`');
 (!Array.isArray(${z[1]}) ? Array.from(Object.entries(${z[1]} || []), ([key, value]) => [key, value]) : ${z[1]}).forEach((${z[2]}) => { _sequence.push('`}else if(y.startsWith("if")){let S=d.exec(y);if(S)return S[1]=E(S[1]),`');
 if (${S[1]}) { _sequence.push('`}else if(y.startsWith("else if")){let S=u.exec(y);if(S)return S[1]=E(S[1]),`');
 } else if (${S[1]}) { _sequence.push('`}else{if(y==="else")return`');
 } else { _sequence.push('`;if(y==="/each"||y==="/for")return`');
 }); _sequence.push('`;if(y==="/if")return`');
 } _sequence.push('`}let k=y.split(/^\@html\s+/);return k[1]?y=E(k[1]):y=`htmlEscape(${E(y)})`,`');
 _strings.push(_sequence.join(''));
 _sequence = [];
 _values.push(${y});
 _sequence.push('`})}');
      _strings.push(_sequence.join(''));
      return [_strings, _values];
    `;return new Function("_data",R)}function m(A){let E=a(A);return()=>{let[R,T]=E.bind(e)();return R.reduce((y,k,S)=>y+T[S-1]+k)}}function g(A){let E=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]);return A.replace(/<([a-z-]+)\b([^>]*)\/>/g,(R,T,y)=>E.has(T)?R:`<${T}${y}></${T}>`)}return l=g(l),m(l)}var Y=function(){"use strict";let l=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:T,afterNodeAdded:T,beforeNodeMorphed:T,afterNodeMorphed:T,beforeNodeRemoved:T,afterNodeRemoved:T,beforeAttributeUpdated:T},head:{style:"merge",shouldPreserve:function(t){return t.getAttribute("im-preserve")==="true"},shouldReAppend:function(t){return t.getAttribute("im-re-append")==="true"},shouldRemove:T,afterHeadMorphed:T}};function s(t,r,i={}){t instanceof Document&&(t=t.documentElement),typeof r=="string"&&(r=re(r));let f=ne(r),c=k(t,f,i);return o(t,f,c)}function o(t,r,i){if(i.head.block){let f=t.querySelector("head"),c=r.querySelector("head");if(f&&c){let h=E(c,f,i);Promise.all(h).then(function(){o(t,r,Object.assign(i,{head:{block:!1,ignore:!0}}))});return}}if(i.morphStyle==="innerHTML")return u(r,t,i),t.children;if(i.morphStyle==="outerHTML"||i.morphStyle==null){let f=se(r,t,i),c=f?.previousSibling,h=f?.nextSibling,b=d(t,f,i);return f?ie(c,b,h):[]}else throw"Do not understand how to morph style "+i.morphStyle}function p(t,r){return r.ignoreActiveValue&&t===document.activeElement&&t!==document.body}function d(t,r,i){if(!(i.ignoreActive&&t===document.activeElement))return r==null?i.callbacks.beforeNodeRemoved(t)===!1?t:(t.remove(),i.callbacks.afterNodeRemoved(t),null):z(t,r)?(i.callbacks.beforeNodeMorphed(t,r)===!1||(t instanceof HTMLHeadElement&&i.head.ignore||(t instanceof HTMLHeadElement&&i.head.style!=="morph"?E(r,t,i):(m(r,t,i),p(t,i)||u(r,t,i))),i.callbacks.afterNodeMorphed(t,r)),t):i.callbacks.beforeNodeRemoved(t)===!1||i.callbacks.beforeNodeAdded(r)===!1?t:(t.parentElement.replaceChild(r,t),i.callbacks.afterNodeAdded(r),i.callbacks.afterNodeRemoved(t),r)}function u(t,r,i){let f=t.firstChild,c=r.firstChild,h;for(;f;){if(h=f,f=h.nextSibling,c==null){if(i.callbacks.beforeNodeAdded(h)===!1)return;r.appendChild(h),i.callbacks.afterNodeAdded(h),j(i,h);continue}if(S(h,c,i)){d(c,h,i),c=c.nextSibling,j(i,h);continue}let b=ee(t,r,h,c,i);if(b){c=N(c,b,i),d(b,h,i),j(i,h);continue}let M=te(t,r,h,c,i);if(M){c=N(c,M,i),d(M,h,i),j(i,h);continue}if(i.callbacks.beforeNodeAdded(h)===!1)return;r.insertBefore(h,c),i.callbacks.afterNodeAdded(h),j(i,h)}for(;c!==null;){let b=c;c=c.nextSibling,U(b,i)}}function a(t,r,i,f){return t==="value"&&f.ignoreActiveValue&&r===document.activeElement?!0:f.callbacks.beforeAttributeUpdated(t,r,i)===!1}function m(t,r,i){let f=t.nodeType;if(f===1){let c=t.attributes,h=r.attributes;for(let b of c)a(b.name,r,"update",i)||r.getAttribute(b.name)!==b.value&&r.setAttribute(b.name,b.value);for(let b=h.length-1;0<=b;b--){let M=h[b];a(M.name,r,"remove",i)||t.hasAttribute(M.name)||r.removeAttribute(M.name)}}(f===8||f===3)&&r.nodeValue!==t.nodeValue&&(r.nodeValue=t.nodeValue),p(r,i)||A(t,r,i)}function g(t,r,i,f){if(t[i]!==r[i]){let c=a(i,r,"update",f);c||(r[i]=t[i]),t[i]?c||r.setAttribute(i,t[i]):a(i,r,"remove",f)||r.removeAttribute(i)}}function A(t,r,i){if(t instanceof HTMLInputElement&&r instanceof HTMLInputElement&&t.type!=="file"){let f=t.value,c=r.value;g(t,r,"checked",i),g(t,r,"disabled",i),t.hasAttribute("value")?f!==c&&(a("value",r,"update",i)||(r.setAttribute("value",f),r.value=f)):a("value",r,"remove",i)||(r.value="",r.removeAttribute("value"))}else if(t instanceof HTMLOptionElement)g(t,r,"selected",i);else if(t instanceof HTMLTextAreaElement&&r instanceof HTMLTextAreaElement){let f=t.value,c=r.value;if(a("value",r,"update",i))return;f!==c&&(r.value=f),r.firstChild&&r.firstChild.nodeValue!==f&&(r.firstChild.nodeValue=f)}}function E(t,r,i){let f=[],c=[],h=[],b=[],M=i.head.style,H=new Map;for(let _ of t.children)H.set(_.outerHTML,_);for(let _ of r.children){let L=H.has(_.outerHTML),F=i.head.shouldReAppend(_),B=i.head.shouldPreserve(_);L||B?F?c.push(_):(H.delete(_.outerHTML),h.push(_)):M==="append"?F&&(c.push(_),b.push(_)):i.head.shouldRemove(_)!==!1&&c.push(_)}b.push(...H.values());let X=[];for(let _ of b){let L=document.createRange().createContextualFragment(_.outerHTML).firstChild;if(i.callbacks.beforeNodeAdded(L)!==!1){if(L.href||L.src){let F=null,B=new Promise(function(ue){F=ue});L.addEventListener("load",function(){F()}),X.push(B)}r.appendChild(L),i.callbacks.afterNodeAdded(L),f.push(L)}}for(let _ of c)i.callbacks.beforeNodeRemoved(_)!==!1&&(r.removeChild(_),i.callbacks.afterNodeRemoved(_));return i.head.afterHeadMorphed(r,{added:f,kept:h,removed:c}),X}function R(){}function T(){}function y(t){let r={};return Object.assign(r,e),Object.assign(r,t),r.callbacks={},Object.assign(r.callbacks,e.callbacks),Object.assign(r.callbacks,t.callbacks),r.head={},Object.assign(r.head,e.head),Object.assign(r.head,t.head),r}function k(t,r,i){return i=y(i),{target:t,newContent:r,config:i,morphStyle:i.morphStyle,ignoreActive:i.ignoreActive,ignoreActiveValue:i.ignoreActiveValue,idMap:fe(t,r),deadIds:new Set,callbacks:i.callbacks,head:i.head}}function S(t,r,i){return t==null||r==null?!1:t.nodeType===r.nodeType&&t.tagName===r.tagName?t.id!==""&&t.id===r.id?!0:O(i,t,r)>0:!1}function z(t,r){return t==null||r==null?!1:t.nodeType===r.nodeType&&t.tagName===r.tagName}function N(t,r,i){for(;t!==r;){let f=t;t=t.nextSibling,U(f,i)}return j(i,r),r.nextSibling}function ee(t,r,i,f,c){let h=O(c,i,r),b=null;if(h>0){let M=f,H=0;for(;M!=null;){if(S(i,M,c))return M;if(H+=O(c,M,t),H>h)return null;M=M.nextSibling}}return b}function te(t,r,i,f,c){let h=f,b=i.nextSibling,M=0;for(;h!=null;){if(O(c,h,t)>0)return null;if(z(i,h))return h;if(z(b,h)&&(M++,b=b.nextSibling,M>=2))return null;h=h.nextSibling}return h}function re(t){let r=new DOMParser,i=t.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(i.match(/<\/html>/)||i.match(/<\/head>/)||i.match(/<\/body>/)){let f=r.parseFromString(t,"text/html");if(i.match(/<\/html>/))return f.generatedByIdiomorph=!0,f;{let c=f.firstChild;return c?(c.generatedByIdiomorph=!0,c):null}}else{let c=r.parseFromString("<body><template>"+t+"</template></body>","text/html").body.querySelector("template").content;return c.generatedByIdiomorph=!0,c}}function ne(t){if(t==null)return document.createElement("div");if(t.generatedByIdiomorph)return t;if(t instanceof Node){let r=document.createElement("div");return r.append(t),r}else{let r=document.createElement("div");for(let i of[...t])r.append(i);return r}}function ie(t,r,i){let f=[],c=[];for(;t!=null;)f.push(t),t=t.previousSibling;for(;f.length>0;){let h=f.pop();c.push(h),r.parentElement.insertBefore(h,r)}for(c.push(r);i!=null;)f.push(i),c.push(i),i=i.nextSibling;for(;f.length>0;)r.parentElement.insertBefore(f.pop(),r.nextSibling);return c}function se(t,r,i){let f;f=t.firstChild;let c=f,h=0;for(;f;){let b=le(f,r,i);b>h&&(c=f,h=b),f=f.nextSibling}return c}function le(t,r,i){return z(t,r)?.5+O(i,t,r):0}function U(t,r){j(r,t),r.callbacks.beforeNodeRemoved(t)!==!1&&(t.remove(),r.callbacks.afterNodeRemoved(t))}function oe(t,r){return!t.deadIds.has(r)}function ae(t,r,i){return(t.idMap.get(i)||l).has(r)}function j(t,r){let i=t.idMap.get(r)||l;for(let f of i)t.deadIds.add(f)}function O(t,r,i){let f=t.idMap.get(r)||l,c=0;for(let h of f)oe(t,h)&&ae(t,h,i)&&++c;return c}function G(t,r){let i=t.parentElement,f=t.querySelectorAll("[id]");for(let c of f){let h=c;for(;h!==i&&h!=null;){let b=r.get(h);b==null&&(b=new Set,r.set(h,b)),b.add(c.id),h=h.parentElement}}}function fe(t,r){let i=new Map;return G(t,i),G(r,i),i}return{morph:s,defaults:e}}();var ce={data:""},J=l=>typeof window=="object"?((l?l.querySelector("#_goober"):window._goober)||Object.assign((l||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:l||ce,de=l=>{let e=J(l),s=e.data;return e.data="",s},he=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,pe=/\/\*[^]*?\*\/|  +/g,Z=/\n+/g,C=(l,e)=>{let s="",o="",p="";for(let d in l){let u=l[d];d[0]=="@"?d[1]=="i"?s=d+" "+u+";":o+=d[1]=="f"?C(u,d):d+"{"+C(u,d[1]=="k"?"":e)+"}":typeof u=="object"?o+=C(u,e?e.replace(/([^,])+/g,a=>d.replace(/(^:.*)|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,a):a?a+" "+m:m)):d):u!=null&&(d=/^--/.test(d)?d:d.replace(/[A-Z]/g,"-$&").toLowerCase(),p+=C.p?C.p(d,u):d+":"+u+";")}return s+(e&&p?e+"{"+p+"}":p)+o},w={},K=l=>{if(typeof l=="object"){let e="";for(let s in l)e+=s+K(l[s]);return e}return l},me=(l,e,s,o,p)=>{let d=K(l),u=w[d]||(w[d]=(m=>{let g=0,A=11;for(;g<m.length;)A=101*A+m.charCodeAt(g++)>>>0;return"go"+A})(d));if(!w[u]){let m=d!==l?l:(g=>{let A,E,R=[{}];for(;A=he.exec(g.replace(pe,""));)A[4]?R.shift():A[3]?(E=A[3].replace(Z," ").trim(),R.unshift(R[0][E]=R[0][E]||{})):R[0][A[1]]=A[2].replace(Z," ").trim();return R[0]})(l);w[u]=C(p?{["@keyframes "+u]:m}:m,s?"":"."+u)}let a=s&&w.g?w.g:null;return s&&(w.g=w[u]),((m,g,A,E)=>{E?g.data=g.data.replace(E,m):g.data.indexOf(m)===-1&&(g.data=A?m+g.data:g.data+m)})(w[u],e,o,a),u},be=(l,e,s)=>l.reduce((o,p,d)=>{let u=e[d];if(u&&u.call){let a=u(s),m=a&&a.props&&a.props.className||/^go/.test(a)&&a;u=m?"."+m:a&&typeof a=="object"?a.props?"":C(a,""):a===!1?"":a}return o+p+(u??"")},"");function P(l){let e=this||{},s=l.call?l(e.p):l;return me(s.unshift?s.raw?be(s,[].slice.call(arguments,1),e.p):s.reduce((o,p)=>Object.assign(o,p&&p.call?p(e.p):p),{}):s,J(e.target),e.g,e.o,e.k)}var Q,V,D,ge=P.bind({g:1}),ye=P.bind({k:1});function ve(l,e,s,o){C.p=e,Q=l,V=s,D=o}function Ae(l,e){let s=this||{};return function(){let o=arguments;function p(d,u){let a=Object.assign({},d),m=a.className||p.className;s.p=Object.assign({theme:V&&V()},a),s.o=/ *go\d+/.test(m),a.className=P.apply(s,o)+(m?" "+m:""),e&&(a.ref=u);let g=l;return l[0]&&(g=a.as||l,delete a.as),D&&g[0]&&D(a),Q(g,a)}return e?e(p):p}}var x={css:P,extractCss:de,glob:ge,keyframes:ye,setup:ve,styled:Ae};function W(l,e={},s){if(typeof e=="string"&&([e,s]=[s,e],e||={}),e instanceof Node&&(s=e,e={}),Array.isArray(l)&&(s=l,l="div"),(typeof e!="object"||Array.isArray(e))&&(s=e,e={}),l.includes(".")){let p=l.split(".");l=p.shift()||"div";let d=p.join(" ");e.class?e.class+=` ${d}`:e.class=d}let o=document.createElement(l);for(let[p,d]of Object.entries(e))if(typeof d=="function")o[p]=d.bind(this);else{let u=String(d).replaceAll("$$.",this.fezHtmlRoot);o.setAttribute(p,u)}if(s)if(Array.isArray(s))for(let p of s)o.appendChild(p);else s instanceof Node?o.appendChild(s):o.innerHTML=String(s);return o}var I=class{static __objects=[];static getProps(e){let s={};for(let o of e.attributes)s[o.name]=o.value;return s}static formData(e){let s=new FormData(e.closest("form")),o={};return s.forEach((p,d)=>{o[d]=p}),o}static fastBind(){return!1}constructor(){this.__int={}}n=W;get fezHtmlRoot(){return`Fez.find(this, "${this.fezName}").`}get isAttached(){return this.root?.parentNode?!0:(Object.keys(this.__int).forEach(e=>{clearInterval(this.__int[e])}),this.root.fez=null,this.root=null,!1)}prop(e){let s=this.oldRoot[e]||this.props[e];return typeof s=="function"&&(s=s.bind(this.root)),s}copy(){for(let e of Array.from(arguments)){let s=this.props[e];if(s!==void 0){if(e=="class"){let o=this.root.getAttribute(e,s);o&&(s=[o,s].join(" "))}typeof s=="string"?this.root.setAttribute(e,s):this.root[e]=s}}}slot(e,s){s||=document.createElement("template");let o=s.nodeName=="SLOT";for(;e.firstChild;)o?s.parentNode.insertBefore(e.lastChild,s.nextSibling):s.appendChild(e.firstChild);return o?s.parentNode.removeChild(s):e.innerHTML="",s}style(){console.error("call Fez static style")}connect(){console.error('Fez is missing "connect" method.',this.root)}parseHtml(e,s){if(typeof e=="object"&&(e=e[0]),e=e.replaceAll("$$.",this.fezHtmlRoot.replaceAll('"',"&quot;")),e.includes("{{"))try{e=q(e,this)()}catch(o){console.error(`Fez stache template error in "${this.fezName}"`,o)}return e}html(e,s){e||(e=this._fez_html_func||console.error(`Fez error ${this.fezName}: class template not defined (static html = '...')`)),typeof s>"u"&&(s=e,e=this.root),typeof e=="string"&&(e=this.find(e));let o=document.createElement("div");typeof s=="function"&&(s=s()),Array.isArray(s)?s[0]instanceof Node?s.forEach(u=>{o.appendChild(u)}):s=s.join(""):typeof s=="string"?o.innerHTML=this.parseHtml(s):s&&o.appendChild(s);let p=o.querySelector("slot");p&&this.slot(e,p),v.morphdom(e,o);let d=(u,a)=>{e.querySelectorAll(`*[${u}]`).forEach(m=>{let g=m.getAttribute(u);m.removeAttribute(u),g&&a.bind(this)(g,m)})};d("fez-this",(u,a)=>{this[u]=a}),d("fez-use",(u,a)=>{let m=this[u];typeof m=="function"?m(a):console.error(`Fez error: "${u}" is not a function in ${this.fezName}`)}),d("fez-class",u=>{let a=u.split(/\s+/),m=a.pop();a.forEach(g=>n.classList.add(g)),m&&setTimeout(()=>{n.classList.add(m)},1e3)})}setInterval(e,s,o){return typeof e=="number"&&([s,e]=[e,s]),o||=v.fnv1(String(e)),clearInterval(this.__int[o]),this.__int[o]=setInterval(()=>{this.isAttached&&e()},s),this.__int[o]}css(e,s){let o=v.css(e);return s&&this.root.classList.add(o),o}find(e){return this.root.querySelector(e)}val(e,s){let o=this.find(".time");["INPUT","TEXTAREA","SELECT"].includes(o.nodeName)?o.value=s:o.innerHTML=new Date}formData(e){return this.class.formData(e||this.root)}attr(e,s){return typeof s>"u"?this.root.getAttribute(e):(this.root.setAttribute(e,s),s)}childNodes(e){let s=Array.from(this.root.querySelectorAll(":scope > *"));if(e)s.forEach(e);else return s}subscribe(e,s){v._subs||={},v._subs[e]||=[],v._subs[e]=v._subs[e].filter(o=>o[0].isAttached),v._subs[e].push([this,s])}fezRegister(){this.class.css&&(typeof this.class.css=="function"&&(this.class.css=this.class.css(this)),this.class.css.includes(":")&&(this.class.css=v.css(this.class.css)),this.root.classList.add(this.class.css)),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(s=>s!=="constructor"&&typeof this[s]=="function").forEach(s=>this[s]=this[s].bind(this))}reactiveStore(e,s){e||={},s||=(p,d,u)=>{this._nextRenderTick||=window.requestAnimationFrame(()=>{v.info("reactive render"),this.html(),this._nextRenderTick=null},0)},s.bind(this);function o(p,d){return typeof p!="object"||p===null?p:new Proxy(p,{set(u,a,m,g){typeof m=="object"&&m!==null&&(m=o(m,d));let A=Reflect.set(u,a,m,g);return d(u,a,m),A},get(u,a,m){let g=Reflect.get(u,a,m);return typeof g=="object"&&g!==null?o(g,d):g}})}return o(e,s)}};setInterval(()=>{I.__objects=I.__objects.filter(l=>l.isAttached)},1e4);var _e=new MutationObserver((l,e)=>{for(let s of l)if(s.type==="attributes"){let o=s.target.fez,p=s.attributeName,d=s.target.getAttribute(p);o.props[p]=d,o.onPropsChange(p,d)}}),v=(l,e)=>{function s(){let p=this.parentNode;if(p){let d=typeof e.nodeName=="function"?e.nodeName(this):e.nodeName,u=document.createElement(d||"div");u.classList.add("fez"),u.classList.add(`fez-${l}`),p.replaceChild(u,this);let a=new e;a.oldRoot=this,a.fezName=l,a.root=u,a.props=e.getProps(this),a.class=e,a.slot(this,u),u.fez=a,window.$&&(a.$root=$(u)),a.props.id&&u.setAttribute("id",a.props.id),e.html&&(typeof e.html=="function"&&(e.html=e.html(this)),a._fez_html_func=q(e.html,a)),a.fezRegister(),a.connect(a.props),e.__objects.push(a),a._fez_html_func&&a.html(),a.onPropsChange&&_e.observe(u,{attributes:!0})}}function o(p){return typeof e.fastBind=="function"?e.fastBind(p):e.fastBind}if(!l)return I;if(typeof e!="function")return v.find(l,e);customElements.define(l,class extends HTMLElement{connectedCallback(){this.firstChild||o(this)?(v.info(`fast bind: ${l}`),s.bind(this)()):(v.info(`slow bind: ${l}`),window.requestAnimationFrame(()=>{s.bind(this)()}))}})};v.find=(l,e)=>{typeof l=="string"&&(l=document.body.querySelector(l)),typeof l.val=="function"&&(l=l[0]);let s=e?`.fez-${e}`:".fez";return l.closest(s).fez};v.globalCss=l=>{let e=v.css(l);return document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add(e)}),e};v.css=l=>x.css(l);v.info=l=>{window.DEBUG&&console.log(`Fez: ${l}`)};v.morphdom=(l,e,s={})=>{s.childrenOnly===void 0&&(s.childrenOnly=!0),Y.morph(l,e,{morphStyle:"innerHTML"})};v.htmlEscape=l=>l.replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;");v.publish=(l,...e)=>{v._subs[l]||=[],v._subs[l].forEach(s=>{s[1].bind(s[0])(...e)})};v.fnv1=l=>{var e,s,o,p,d,u;for(e=2166136261,s=16777619,o=e,p=d=0,u=l.length-1;0<=u?d<=u:d>=u;p=0<=u?++d:--d)o^=l.charCodeAt(p),o*=s;return o.toString(36).replaceAll("-","")};window.Fez=v;window.FezBase=I;})();
//# sourceMappingURL=fez.js.map
