(()=>{var Qe=Object.defineProperty;var et=(e,t)=>()=>(e&&(t=e(e=0)),t);var tt=(e,t)=>{for(var n in t)Qe(e,n,{get:t[n],enumerable:!0})};var Ge={};tt(Ge,{loadDefaults:()=>We});var We,Ue=et(()=>{We=()=>{Fez("fez-component",class{init(e){let t=document.createElement(e.name);for(t.props=e.props||e["data-props"]||e;this.root.firstChild;)this.root.parentNode.insertBefore(this.root.lastChild,t.nextSibling);this.root.innerHTML="",this.root.appendChild(t)}}),Fez("fez-include",class{init(e){Fez.fetch(e.src,t=>{let n=Fez.domRoot(t);Fez.head(n),this.root.innerHTML=n.innerHTML})}}),Fez("fez-if",class{init(e){new Function(`return (${e.if||e.test})`)()||this.root.remove()}}),Fez("fez-demo",class{init(e){this.state.ready=!1,this.state.components=[],this.state.filtered=!1,this.state.showAllUrl="";let t=new URLSearchParams(window.location.search),n=e.name||t.get("fez");if(t.get("fez")){let r=new URL(window.location.href);r.searchParams.delete("fez"),this.state.showAllUrl=r.pathname+r.search,this.state.filtered=!0}let s=()=>{if(n)Fez.index[n]?.demo?(this.state.components=[n],this.state.ready=!0):setTimeout(s,100);else{let r=Fez.index.withDemo().sort();r.length>0?(this.state.components=r,this.state.ready=!0):setTimeout(s,100)}};s()}showHtml(e){let t=Fez.index[e]?.demo||"No demo HTML";Fez.log("Demo HTML: "+e+`

`+t)}showFez(e){Fez.log("Fez source: "+e+`

`+(Fez.index[e]?.source||"Source not available"))}openSingle(e){let t=new URL(window.location.href);t.searchParams.set("fez",e),window.location.href=t.toString()}openCodePen(e){let t=Fez.index[e]?.demo||"",n=Fez.index[e]?.source||"",s=[`<link rel="stylesheet" href="//cdn.simplecss.org/simple.css" />
<script src="//dux.github.io/fez/dist/fez.js"><\/script>`,`<!-- FEZ code start -->
<xmp fez="${e}">
${n}
</xmp>
<!-- FEZ code end -->`,`<!-- HTML code start -->
${t}
<!-- HTML code end -->`],r={title:"Fez component - "+e,html:s.join(`

`),css:"body { padding-top: 50px; }",js:"",editors:"100"},o=document.createElement("form");o.method="POST",o.action="https://codepen.io/pen/define",o.target="_blank";let i=document.createElement("input");i.type="hidden",i.name="data",i.value=JSON.stringify(r),o.appendChild(i),document.body.appendChild(o),o.submit(),document.body.removeChild(o)}renderDemo(e){let t=e.dataset.name;Fez.index.apply(t,e)}renderInfo(e){let t=e.dataset.name,n=Fez.index.get(t);n.info?e.innerHTML=n.info.innerHTML:e.innerHTML="<em>No info available</em>"}CSS(){return`:fez {
        display: block;
        font-family: system-ui, -apple-system, sans-serif;
      }
      .fez-demo-item {
        margin-bottom: 40px;
      }
      .fez-demo-title {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 18px;
        font-weight: 600;
        margin: 0 0 25px 0;
        &::before {
          content: '';
          flex: 1;
          height: 1px;
          background: #ddd;
        }
        &::after {
          content: '';
          flex: 1;
          height: 1px;
          background: #ddd;
        }
        .fez-demo-show-all, .fez-demo-open-single {
          font-size: 14px;
          font-weight: normal;
          color: #666;
          text-decoration: none;
          cursor: pointer;
          &:hover { text-decoration: underline; }
        }
      }
      .fez-demo-cols {
        display: flex;
        gap: 40px;
        @media (max-width: 768px) {
          flex-direction: column;
          gap: 20px;
        }
      }
      .fez-demo-left, .fez-demo-right {
        flex: 1;
        min-width: 0;
        overflow: visible;
      }
      .fez-demo-content {
        min-height: 50px;
      }
      .fez-demo-info {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 20px;
        line-height: 1.6;
        ul { margin: 0; padding-left: 20px; }
        code { background: #e8e8e8; padding: 2px 5px; border-radius: 3px; font-size: 13px; }
      }
      .fez-demo-buttons {
        margin-top: 30px;
        display: flex;
        gap: 10px;
      }
      .fez-demo-btn {
        padding: 8px 16px;
        border: 1px solid #ccc;
        background: #fff;
        border-radius: 4px;
        cursor: pointer;
        &:hover { background: #f0f0f0; }
      }`}HTML(){return`{#if state.ready}
        {#each state.components as name}
          <div class="fez-demo-item">
            <h2 class="fez-demo-title">{name}{#if state.filtered} <a href="{state.showAllUrl}" class="fez-demo-show-all">show all</a>{:else} <a onclick="fez.openSingle('{name}')" class="fez-demo-open-single">open</a>{/if}</h2>
            <div class="fez-demo-cols">
              <div class="fez-demo-left">
                <div class="fez-demo-content" data-name={name} fez-use="renderDemo"></div>
              </div>
              <div class="fez-demo-right">
                <div class="fez-demo-info" data-name={name} fez-use="renderInfo"></div>
                <div class="fez-demo-buttons">
                  <button class="fez-demo-btn" onclick="fez.showHtml('{name}')">Demo HTML</button>
                  <button class="fez-demo-btn" onclick="fez.showFez('{name}')">Fez Component</button>
                  <button class="fez-demo-btn" onclick="fez.openCodePen('{name}')">CodePen</button>
                </div>
              </div>
            </div>
          </div>
        {/each}
      {:else}
        <div style="padding: 40px; text-align: center; color: #888;">Loading components...</div>
      {/if}`}})};typeof Fez<"u"&&Fez&&typeof document<"u"&&document.head&&We()});function Q(e,t={},n){if(typeof t=="string"&&([t,n]=[n,t],t||={}),t instanceof Node&&(n=t,t={}),Array.isArray(e)&&(n=e,e="div"),(typeof t!="object"||Array.isArray(t))&&(n=t,t={}),e.includes(".")){let r=e.split(".");e=r.shift()||"div";let o=r.join(" ");t.class?t.class+=` ${o}`:t.class=o}let s=document.createElement(e);for(let[r,o]of Object.entries(t))if(typeof o=="function")s[r]=o.bind(this);else{let i=String(o).replaceAll("fez.",this.fezHtmlRoot);s.setAttribute(r,i)}if(n)if(Array.isArray(n))for(let r of n)s.appendChild(r);else n instanceof Node?s.appendChild(n):s.innerHTML=String(n);return s}function V(e){if(e.startsWith("[")){let s=e.match(/^\[([^\]]+)\](?:\s*,\s*(\w+))?$/);if(s)return{params:s[1].split(",").map(r=>r.trim()),indexParam:s[2]||null,isDestructured:!0}}let n=e.split(",").map(s=>s.trim());return n.length===2?{params:n,indexParam:null,isDestructured:!0}:{params:n,indexParam:null,isDestructured:!1}}function pe(e){let t=V(e),n=[...t.params];return t.indexParam&&n.push(t.indexParam),t.params.length===1&&!n.includes("i")&&n.push("i"),n}function he(e){let t=V(e);return t.isDestructured&&t.params.length===2?[t.params[0]]:t.isDestructured?t.params:t.params.length>=3?t.params.slice(0,-1):t.params.length===2?[t.params[0]]:t.params}function me(e,t){let n=V(t);return n.isDestructured&&n.params.length===2?`Fez.toPairs(${e})`:n.isDestructured||n.params.length>=3?`((_c)=>Array.isArray(_c)?_c:(_c&&typeof _c==="object")?Object.entries(_c):[])(${e})`:`(${e}||[])`}function ge(e){let t=V(e);if(t.isDestructured){let s="["+t.params.join(", ")+"]",r=t.indexParam||(t.params.includes("i")?"_i":"i");return s+", "+r}if(t.params.length>=3){let s=[...t.params],r=s.pop();return"["+s.join(", ")+"], "+r}if(t.params.length===2)return t.params.join(", ");let n=t.params[0]==="i"?"_i":"i";return t.params[0]+", "+n}function be(e){return/^\s*(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/.test(e)}function ye(e,t=[],n=[]){let s=e.match(/^\s*(?:\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*(.+)$/s);if(!s)return e;let r=s[1].trim(),i=e.match(/^\s*\(?\s*([a-zA-Z_$][a-zA-Z0-9_$]*)?\s*(?:,\s*[^)]+)?\)?\s*=>/)?.[1],c=i&&["e","event","ev"].includes(i);if(n.filter(u=>new RegExp(`\\b${u}\\b`).test(r)).length>0){if(c&&i!=="event"){let u=new RegExp(`\\b${i}\\b`,"g");r=r.replace(u,"event")}return r=r.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(u,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?u:`fez.${p}(`),`\${'Fez(' + UID + ').fezGlobals.delete(' + fez.fezGlobals.set(() => ${r}) + ')()'}`}if(c&&i!=="event"){let u=new RegExp(`\\b${i}\\b`,"g");r=r.replace(u,"event")}for(let u of t){let p=new RegExp(`(?<!\\$\\{)\\b${u}\\b(?![^{]*\\})`,"g");r=r.replace(p,`\${${u}}`)}return r=r.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(u,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?u:`fez.${p}(`),r}function ze(e,t){let n=0,s=t;for(;s<e.length;){let r=e[s];if(r==="{")n++;else if(r==="}"){if(n--,n===0)return{expression:e.slice(t+1,s),endIndex:s}}else if(r==='"'||r==="'"||r==="`"){let o=r;for(s++;s<e.length&&e[s]!==o;)e[s]==="\\"&&s++,s++}s++}throw new Error(`Unmatched brace at ${t}`)}function ee(e,t){let n=t-1;for(;n>=0&&(e[n]==="{"||e[n]===" "||e[n]==="	");)n--;if(n>=0&&e[n]==="="){for(n--;n>=0&&(e[n]===" "||e[n]==="	");)n--;let s=n+1;for(;n>=0&&/[a-zA-Z0-9_:-]/.test(e[n]);)n--;let r=e.slice(n+1,s);if(r&&/^[a-zA-Z]/.test(r))return r.toLowerCase()}return null}function we(e,t){let n=ee(e,t);return n&&/^on[a-z]+$/.test(n)?n:null}function te(e,t={}){let n=t.name||"unknown";try{e=e.replaceAll("&#x60;","`").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),e=e.replace(/\bfez:([a-z]+)=/gi,"fez-$1=");let s=e.match(/<([a-z]+-[a-z][a-z0-9-]*)\b[^>]*\bfez-keep=/);s&&console.error(`FEZ: fez:keep must be on plain HTML elements, not on fez components. Found on <${s[1]}> in <${n}>`);let r={};e=e.replace(/\{@block\s+(\w+)\}([\s\S]*?)\{\/block\}/g,(A,C,z)=>(r[C]=z,"")),e=e.replace(/\{@block:(\w+)\}/g,(A,C)=>r[C]||""),e=e.replace(/:(\w+)="([^"{}]+)"/g,(A,C,z)=>/^[\w.[\]]+$/.test(z.trim())?`:${C}={\`Fez(\${UID}).fezGlobals.delete(\${fez.fezGlobals.set(${z})})\`}`:A),e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/>\s+</g,"><").trim(),e=e.replace(/<([a-z][a-z0-9]*-[a-z0-9-]*)([^>]*?)\s*\/>/gi,"<$1$2></$1>"),e=e.replace(/<slot\s*\/>/gi,"<slot></slot>");let o="",i=0,c=[],d=[],u=[],p=[],g=[],S=0;for(;i<e.length;){if(e[i]==="`"){for(o+="\\`",i++;i<e.length&&e[i]!=="`";)if(e[i]==="\\")o+="\\\\",i++,i<e.length&&(e[i]==="`"?o+="\\`":e[i]==="$"?o+="\\$":o+=e[i],i++);else if(e[i]==="$"&&e[i+1]==="{"){o+="\\${",i+=2;let A=1;for(;i<e.length&&A>0;)e[i]==="{"?A++:e[i]==="}"&&A--,A>0||e[i]!=="}"?e[i]==="`"?o+="\\`":e[i]==="\\"?o+="\\\\":o+=e[i]:o+="}",i++}else e[i]==="$"?o+="\\$":o+=e[i],i++;i<e.length&&(o+="\\`",i++);continue}if(e[i]==="\\"&&e[i+1]==="{"){o+="{",i+=2;continue}if(e[i]==="{"){let{expression:A,endIndex:C}=ze(e,i),z=A.trim();if(/^(\w+|"\w+"|'\w+')\s*:/.test(z)){o+="{"+A+"}",i=C+1;continue}if(z.startsWith("#if ")){let b=z.slice(4);o+="${("+b+") ? `",c.push(!1)}else if(z.startsWith("#unless ")){let b=z.slice(8);o+="${!("+b+") ? `",c.push(!1)}else if(z===":else")if(p.length>0&&!c.length){let b=p[p.length-1];b.hasElse=!0,o+='`).join("") : `'}else o+="` : `",c[c.length-1]=!0;else if(z.startsWith(":else if ")){let b=z.slice(9);o+="` : ("+b+") ? `"}else if(z==="/if"||z==="/unless"){let b=c.pop();o+=b?"`}":"` : ``}"}else if(z.startsWith("#each ")||z.startsWith("#for ")){let b=z.startsWith("#each "),I,x;if(b){let R=z.slice(6),j=R.indexOf(" as ");I=R.slice(0,j).trim(),x=R.slice(j+4).trim()}else{let R=z.slice(5),j=R.indexOf(" in ");x=R.slice(0,j).trim(),I=R.slice(j+4).trim()}let N=me(I,x),K=ge(x);d.push(pe(x)),u.push(he(x)),p.push({collectionExpr:N,hasElse:!1}),o+="${((_arr) => _arr.length ? _arr.map(("+K+") => `"}else if(z==="/each"||z==="/for"){d.pop(),u.pop();let b=p.pop();b.hasElse?o+="`)("+b.collectionExpr+")}":o+='`).join("") : "")('+b.collectionExpr+")}"}else if(z.startsWith("#await ")){let b=z.slice(7).trim(),I=S++;g.push({awaitId:I,promiseExpr:b,hasThen:!1,hasCatch:!1,thenVar:"_value",catchVar:"_error"}),o+='${((_aw) => _aw.status === "pending" ? `'}else if(z.startsWith(":then")){let b=g[g.length-1];b&&(b.hasThen=!0,b.thenVar=z.slice(5).trim()||"_value",o+='` : _aw.status === "resolved" ? (('+b.thenVar+") => `")}else if(z.startsWith(":catch")){let b=g[g.length-1];b&&(b.hasCatch=!0,b.catchVar=z.slice(6).trim()||"_error",b.hasThen?o+='`)(_aw.value) : _aw.status === "rejected" ? (('+b.catchVar+") => `":o+='` : _aw.status === "rejected" ? (('+b.catchVar+") => `")}else if(z==="/await"){let b=g.pop();b&&(b.hasThen&&b.hasCatch?o+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":b.hasThen?o+="`)(_aw.value) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":b.hasCatch?o+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":o+="` : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}")}else if(z.startsWith("@html ")){let b=z.slice(6);o+="${"+b+"}"}else if(z.startsWith("@json ")){let b=z.slice(6);o+='${`<pre class="json">${Fez.htmlEscape(JSON.stringify('+b+", null, 2))}</pre>`}"}else if(be(z))if(we(e,i)){let I=d.flat(),x=u.flat(),N=ye(z,I,x);N=N.replace(/"/g,"&quot;"),o+='"'+N+'"'}else o+="${"+z+"}";else ee(e,i)?o+='"${Fez.htmlEscape('+z+')}"':o+="${Fez.htmlEscape("+z+")}";i=C+1;continue}e[i]==="$"&&e[i+1]==="{"?o+="\\$":e[i]==="\\"?o+="\\\\":o+=e[i],i++}if(o=o.replace(/(<[a-z][a-z0-9-]*\s+)([^>]*?)(fez-this="([^"{}]+)")([^>]*?)>/gi,(A,C,z,b,I,x)=>{if(/\bid=/.test(z)||/\bid=/.test(x))return A;let N=I.replace(/[^a-zA-Z0-9]/g,"-");return`${C}${z}${b}${x} id="fez-\${UID}-${N}">`}),typeof Fez<"u"&&Fez.LOG){let A=o.match(/fez-this="[^"]*\{[^}]+\}[^"]*"/g);A&&console.warn(`Fez <${n}>: Dynamic fez-this values won't get auto-ID for Idiomorph matching:`,A)}let F=`
      const fez = this;
      with (this) {
        return \`${o}\`
      }
    `,E=new Function(F);return A=>{try{return E.bind(A)()}catch(C){return console.error(`FEZ svelte template runtime error in <${A.fezName||n}>:`,C.message),console.error("Template source:",o.substring(0,500)),""}}}catch(s){return console.error(`FEZ svelte template compile error in <${n}>:`,s.message),console.error("Template:",e.substring(0,200)),()=>""}}var ne=new Map;function B(e,t={}){if(ne.has(e))return ne.get(e);nt(e)&&(e=rt(e,t.name));let n=te(e,t);return ne.set(e,n),n}function nt(e){return e.includes("{{")&&e.includes("}}")||e.includes("[[")&&e.includes("]]")}function rt(e,t){return e=e.replaceAll("[[","{{").replaceAll("]]","}}"),e=e.replace(/\{\{block\s+(\w+)\s*\}\}/g,"{@block $1}"),e=e.replace(/\{\{\/block\}\}/g,"{/block}"),e=e.replace(/\{\{block:([\w\-]+)\s*\}\}/g,"{@block:$1}"),e=e.replace(/\{\{#?if\s+(.*?)\}\}/g,"{#if $1}"),e=e.replace(/\{\{\/if\}\}/g,"{/if}"),e=e.replace(/\{\{#?unless\s+(.*?)\}\}/g,"{#unless $1}"),e=e.replace(/\{\{\/unless\}\}/g,"{/unless}"),e=e.replace(/\{\{:?else\}\}/g,"{:else}"),e=e.replace(/\{\{#?for\s+(.*?)\}\}/g,"{#for $1}"),e=e.replace(/\{\{\/for\}\}/g,"{/for}"),e=e.replace(/\{\{#?each\s+(.*?)\}\}/g,"{#each $1}"),e=e.replace(/\{\{\/each\}\}/g,"{/each}"),e=e.replace(/\{\{#?(?:raw|html)\s+(.*?)\}\}/g,"{@html $1}"),e=e.replace(/\{\{json\s+(.*?)\}\}/g,"{@json $1}"),e=e.replace(/\{\{\s*(.*?)\s*\}\}/g,"{$1}"),t&&console.warn(`Fez component "${t}" uses old {{ ... }} notation, converting.`),e}var Z=new Map,_={};function ve(e,t,n){let s=null,r=null,o;typeof t=="function"?(o=e,n=t):(o=t,typeof e=="string"?s=e:r=e),Z.has(o)||Z.set(o,new Set);let i=Z.get(o);for(let d of i)d.callback===n&&d.selector===s&&d.node===r&&i.delete(d);let c={selector:s,node:r,callback:n};return i.add(c),()=>i.delete(c)}function Ee(e,...t){let n=Z.get(e);if(n)for(let s of n){let r=null;if(s.selector){if(r=document.querySelector(s.selector),!r)continue}else if(s.node){if(!s.node.isConnected){n.delete(s);continue}r=s.node}try{s.callback.call(r,...t)}catch(o){console.error(`Fez pubsub error on "${e}":`,o)}}_[e]&&_[e].forEach(([s,r])=>{s.isConnected&&r.bind(s)(...t)})}function Se(e,t,n){return _[t]||=[],_[t]=_[t].filter(([s])=>s.isConnected),_[t].push([e,n]),()=>{_[t]=_[t].filter(([s,r])=>!(s===e&&r===n))}}function Ae(e,t,...n){let s=o=>{if(_[t]){let i=_[t].find(([c])=>c===o);if(i)return i[1].bind(o)(...n),!0}return!1};if(s(e))return!0;let r=e.root?.parentElement;for(;r;){if(r.fez&&s(r.fez))return!0;r=r.parentElement}return!1}var D=class{static nodeName="div";static getProps(t,n){let s={};if(t.props)return t.props;for(let r of t.attributes)s[r.name]=r.value;for(let[r,o]of Object.entries(s))if([":"].includes(r[0])){delete s[r];try{let i=new Function(`return (${o})`).bind(n)();s[r.replace(/[\:_]/,"")]=i}catch(i){Fez.onError("attr",`<${t.tagName.toLowerCase()}> Error evaluating ${r}="${o}": ${i.message}`)}}if(s["data-props"]){let r=s["data-props"];if(typeof r=="object")return r;r[0]!="{"&&(r=decodeURIComponent(r));try{s=JSON.parse(r)}catch(o){Fez.onError("props",`<${t.tagName.toLowerCase()}> Invalid JSON in data-props: ${o.message}`)}}else if(s["data-json-template"]){let r=n.previousSibling?.textContent;if(r)try{s=JSON.parse(r),n.previousSibling.remove()}catch(o){Fez.onError("props",`<${t.tagName.toLowerCase()}> Invalid JSON in template: ${o.message}`)}}return s}static formData(t){let n=t.closest("form")||t.querySelector("form");if(!n)return Fez.consoleLog("No form found for formData()"),{};let s=new FormData(n),r={};return s.forEach((o,i)=>{r[i]=o}),r}constructor(){}n=Q;fezBlocks={};fezGlobals={_data:new Map,_counter:0,set(t){let n=this._counter++;return this._data.set(n,t),n},delete(t){let n=this._data.get(t);return this._data.delete(t),n}};fezError(t,n,s){let r=this.fezName||this.root?.tagName?.toLowerCase()||"unknown";return Fez.onError(t,`<${r}> ${n}`,s)}get fezHtmlRoot(){return`Fez(${this.UID}).`}get isConnected(){return!!this.root?.isConnected}prop(t){let n=this.oldRoot[t]||this.props[t];return typeof n=="function"&&(n=n.bind(this.root)),n}connect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}onStateChange(){}onGlobalStateChange(){}onPropsChange(){}fezOnDestroy(){this._destroyed||(this._destroyed=!0,this._onDestroyCallbacks&&(this._onDestroyCallbacks.forEach(t=>{try{t()}catch(n){this.fezError("destroy","Error in cleanup callback",n)}}),this._onDestroyCallbacks=[]),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0)}addOnDestroy(t){this._onDestroyCallbacks=this._onDestroyCallbacks||[],this._onDestroyCallbacks.push(t)}fezParseHtml(t){let n=this.fezHtmlRoot.replaceAll('"',"&quot;");return t=t.replace(/([!'"\s;])fez\.(\w)/g,`$1${n}$2`).replace(/>\s+</g,"><"),t.trim()}fezNextTick(t,n){n?(this._nextTicks||={},this._nextTicks[n]||=window.requestAnimationFrame(()=>{t.bind(this)(),this._nextTicks[n]=null},n)):window.requestAnimationFrame(t.bind(this))}fezRefresh(){this.fezNextTick(()=>this.fezRender(),"refresh")}refresh(){this.fezRefresh()}fezRender(t){if(t||=this.fezHtmlFunc||this?.class?.fezHtmlFunc,!t||!this.root)return;this._isRendering=!0,this.beforeRender();let n=typeof this.class.nodeName=="function"?this.class.nodeName(this.root):this.class.nodeName,s=document.createElement(n||"div"),r;if(Array.isArray(t))t[0]instanceof Node?t.forEach(i=>s.appendChild(i)):r=t.join("");else if(typeof t=="string"){let i=this.root?.tagName?.toLowerCase();r=B(t,{name:i})(this)}else typeof t=="function"&&(r=t(this));r&&(r instanceof DocumentFragment||r instanceof Node?s.appendChild(r):(r=r.replace(/\s\w+="undefined"/g,""),s.innerHTML=this.fezParseHtml(r))),this.fezKeepNode(s);let o=new Map;this.root.querySelectorAll("input, textarea, select").forEach(i=>{i._fezThisName&&o.set(i._fezThisName,{value:i.value,checked:i.checked})}),Fez.morphdom(this.root,s),o.forEach((i,c)=>{let d=null;this.root.querySelectorAll("input, textarea, select").forEach(u=>{u._fezThisName===c&&(d=u)}),d&&(d.value=i.value,i.checked!==void 0&&(d.checked=i.checked))}),this.fezRenderPostProcess(),this.afterRender(),this._isRendering=!1}fezRenderPostProcess(){let t=(n,s)=>{this.root.querySelectorAll(`*[${n}]`).forEach(r=>{let o=r.getAttribute(n);r.removeAttribute(n),o&&s.bind(this)(o,r)})};t("fez-this",(n,s)=>{new Function("n",`this.${n} = n`).bind(this)(s),s._fezThisName=n}),t("fez-use",(n,s)=>{if(n.includes("=>"))Fez.getFunction(n)(s);else if(n.includes("."))Fez.getFunction(n).bind(s)();else{let r=this[n];typeof r=="function"?r(s):this.fezError("fez-use",`"${n}" is not a function`)}}),t("fez-class",(n,s)=>{let r=n.split(/\s+/),o=r.pop();r.forEach(i=>s.classList.add(i)),o&&setTimeout(()=>{s.classList.add(o)},1)}),t("fez-bind",(n,s)=>{if(["INPUT","SELECT","TEXTAREA"].includes(s.nodeName)){let r=new Function(`return this.${n}`).bind(this)(),o=s.type.toLowerCase()=="checkbox",i=["SELECT"].includes(s.nodeName)||o?"onchange":"onkeyup";s.setAttribute(i,`${this.fezHtmlRoot}${n} = this.${o?"checked":"value"}`),this.val(s,r),s._fezThisName=n}else this.fezError("fez-bind",`Can't bind "${n}" to ${s.nodeName} (needs INPUT, SELECT or TEXTAREA)`)}),this.root.querySelectorAll("*[disabled]").forEach(n=>{let s=n.getAttribute("disabled");["false"].includes(s)?n.removeAttribute("disabled"):n.setAttribute("disabled","true")})}fezKeepNode(t){let n=t.querySelector(".fez-slot");n&&this._fezChildNodes&&this._fezChildNodes.forEach(s=>{n.appendChild(s)}),t.querySelectorAll(":scope > [fez-keep]").forEach(s=>{let r=s.getAttribute("fez-keep"),o=this.root.querySelector(`:scope > [fez-keep="${r}"]`);o&&(s.parentNode.replaceChild(o,s),Fez.LOG&&r!=="default-slot"&&console.log(`Fez: fez-keep="${r}" preserved element, skipped re-render`))})}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.fezReactiveStore(),this.globalState=Fez.state.createProxy(this),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(n=>n!=="constructor"&&typeof this[n]=="function").forEach(n=>this[n]=this[n].bind(this))}fezReactiveStore(t,n){t||={},n||=(r,o,i,c)=>{i!=c&&(this.onStateChange(o,i,c),!this._isRendering&&!this._isInitializing&&this.fezNextTick(this.fezRender,"fezRender"))},n.bind(this);function s(r,o){return typeof r!="object"||r===null||r instanceof Promise?r:new Proxy(r,{set(i,c,d,u){let p=Reflect.get(i,c,u);if(p!==d){typeof d=="object"&&d!==null&&!(d instanceof Promise)&&(d=s(d,o));let g=Reflect.set(i,c,d,u);return o(i,c,d,p),g}return!0},get(i,c,d){let u=Reflect.get(i,c,d);return typeof u=="object"&&u!==null&&!(u instanceof Promise)?s(u,o):u}})}return s(t,n)}find(t){return typeof t=="string"?this.root.querySelector(t):t}val(t,n){let s=this.find(t);if(s)if(["INPUT","TEXTAREA","SELECT"].includes(s.nodeName))if(typeof n<"u")s.type=="checkbox"?s.checked=!!n:s.value=n;else return s.value;else if(typeof n<"u")s.innerHTML=n;else return s.innerHTML}formData(t){return this.class.formData(t||this.root)}attr(t,n){return typeof n>"u"?this.root.getAttribute(t):(this.root.setAttribute(t,n),n)}childNodes(t){let n=this._fezChildNodes||Array.from(this.root.children);return t===!0?n=n.map(s=>{let r={html:s.innerHTML,ROOT:s};for(let o of s.attributes)r[o.name]=o.value;return r}):t&&(n=n.map(t)),n}setStyle(t,n){t&&typeof t=="object"?Object.entries(t).forEach(([s,r])=>{this.root.style.setProperty(s,r)}):this.root.style.setProperty(t,n)}copy(){for(let t of Array.from(arguments)){let n=this.props[t];if(n!==void 0){if(t=="class"){let s=this.root.getAttribute(t,n);s&&(n=[s,n].join(" "))}typeof n=="string"?this.root.setAttribute(t,n):this.root[t]=n}}}rootId(){return this.root.id||=`fez_${this.UID}`,this.root.id}dissolve(t){t&&(t.classList.add("fez"),t.classList.add(`fez-${this.fezName}`),t.fez=this,this.attr("id")&&t.setAttribute("id",this.attr("id")),this.root.innerHTML="",this.root.appendChild(t));let n=this.root,s=this.childNodes(),r=this.root.parentNode;return s.reverse().forEach(o=>r.insertBefore(o,n.nextSibling)),this.root.remove(),this.root=void 0,t&&(this.root=t),s}on(t,n,s=200){this._eventHandlers=this._eventHandlers||{},this._eventHandlers[t]&&window.removeEventListener(t,this._eventHandlers[t]);let r=Fez.throttle(()=>{this.isConnected&&n.call(this)},s);this._eventHandlers[t]=r,window.addEventListener(t,r),this.addOnDestroy(()=>{window.removeEventListener(t,r),delete this._eventHandlers[t]})}onWindowResize(t,n){this.on("resize",t,n),t()}onWindowScroll(t,n){this.on("scroll",t,n),t()}onElementResize(t,n,s=200){let r=Fez.throttle(()=>{this.isConnected&&n.call(this,t.getBoundingClientRect(),t)},s),o=new ResizeObserver(r);o.observe(t),n.call(this,t.getBoundingClientRect(),t),this.addOnDestroy(()=>{o.disconnect()})}setTimeout(t,n){let s=setTimeout(()=>{this.isConnected&&t()},n);return this.addOnDestroy(()=>clearTimeout(s)),s}setInterval(t,n,s){typeof t=="number"&&([n,t]=[t,n]),s||=Fez.fnv1(String(t)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[s]);let r=setInterval(()=>{this.isConnected&&t()},n);return this._setIntervalCache[s]=r,this.addOnDestroy(()=>{clearInterval(r),delete this._setIntervalCache[s]}),r}publish(t,...n){return Ae(this,t,...n)}subscribe(t,n){let s=Se(this,t,n);return this.addOnDestroy(s),s}fezSlot(t,n){n||=document.createElement("template");let s=n.nodeName=="SLOT";for(;t.firstChild;)s?n.parentNode.insertBefore(t.lastChild,n.nextSibling):n.appendChild(t.firstChild);return s?n.parentNode.removeChild(n):t.innerHTML="",n}};var st={data:""},Te=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||st,ot=e=>{let t=Te(e),n=t.data;return t.data="",n},it=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,lt=/\/\*[^]*?\*\/|  +/g,$e=/\n+/g,k=(e,t)=>{let n="",s="",r="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+i+";":s+=o[1]=="f"?k(i,o):o+"{"+k(i,o[1]=="k"?"":t)+"}":typeof i=="object"?s+=k(i,t?t.replace(/([^,])+/g,c=>o.replace(/(^:.*)|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=k.p?k.p(o,i):o+":"+i+";")}return n+(t&&r?t+"{"+r+"}":r)+s},O={},Ce=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Ce(e[n]);return t}return e},at=(e,t,n,s,r)=>{let o=Ce(e),i=O[o]||(O[o]=(d=>{let u=0,p=11;for(;u<d.length;)p=101*p+d.charCodeAt(u++)>>>0;return"go"+p})(o));if(!O[i]){let d=o!==e?e:(u=>{let p,g,S=[{}];for(;p=it.exec(u.replace(lt,""));)p[4]?S.shift():p[3]?(g=p[3].replace($e," ").trim(),S.unshift(S[0][g]=S[0][g]||{})):S[0][p[1]]=p[2].replace($e," ").trim();return S[0]})(e);O[i]=k(r?{["@keyframes "+i]:d}:d,n?"":"."+i)}let c=n&&O.g?O.g:null;return n&&(O.g=O[i]),((d,u,p,g)=>{g?u.data=u.data.replace(g,d):u.data.indexOf(d)===-1&&(u.data=p?d+u.data:u.data+d)})(O[i],t,s,c),i},ct=(e,t,n)=>e.reduce((s,r,o)=>{let i=t[o];if(i&&i.call){let c=i(n),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=d?"."+d:c&&typeof c=="object"?c.props?"":k(c,""):c===!1?"":c}return s+r+(i??"")},"");function X(e){let t=this||{},n=e.call?e(t.p):e;return at(n.unshift?n.raw?ct(n,[].slice.call(arguments,1),t.p):n.reduce((s,r)=>Object.assign(s,r&&r.call?r(t.p):r),{}):n,Te(t.target),t.g,t.o,t.k)}var Le,re,se,ft=X.bind({g:1}),dt=X.bind({k:1});function ut(e,t,n,s){k.p=t,Le=e,re=n,se=s}function pt(e,t){let n=this||{};return function(){let s=arguments;function r(o,i){let c=Object.assign({},o),d=c.className||r.className;n.p=Object.assign({theme:re&&re()},c),n.o=/ *go\d+/.test(d),c.className=X.apply(n,s)+(d?" "+d:""),t&&(c.ref=i);let u=e;return e[0]&&(u=c.as||e,delete c.as),se&&u[0]&&se(c),Le(u,c)}return t?t(r):r}}var xe={css:X,extractCss:ot,glob:ft,keyframes:dt,setup:ut,styled:pt};var Ie=function(){"use strict";let e=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E},head:{style:"merge",shouldPreserve:function(a){return a.getAttribute("im-preserve")==="true"},shouldReAppend:function(a){return a.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function n(a,l,f={}){a instanceof Document&&(a=a.documentElement),typeof l=="string"&&(l=K(l));let h=R(l),m=C(a,h,f);return s(a,h,m)}function s(a,l,f){if(f.head.block){let h=a.querySelector("head"),m=l.querySelector("head");if(h&&m){let y=S(m,h,f);Promise.all(y).then(function(){s(a,l,Object.assign(f,{head:{block:!1,ignore:!0}}))});return}}if(f.morphStyle==="innerHTML")return i(l,a,f),a.children;if(f.morphStyle==="outerHTML"||f.morphStyle==null){let h=Ve(l,a,f),m=h?.previousSibling,y=h?.nextSibling,w=o(a,h,f);return h?j(m,w,y):[]}else throw"Do not understand how to morph style "+f.morphStyle}function r(a,l){if(!l.ignoreActiveValue||a!==document.activeElement||a===document.body)return!1;let f=a.nodeName;return f==="INPUT"||f==="TEXTAREA"||f==="SELECT"}function o(a,l,f){if(!(f.ignoreActive&&a===document.activeElement))return l==null?f.callbacks.beforeNodeRemoved(a)===!1?a:(a.remove(),f.callbacks.afterNodeRemoved(a),null):b(a,l)?(f.callbacks.beforeNodeMorphed(a,l)===!1||(a instanceof HTMLHeadElement&&f.head.ignore||(a instanceof HTMLHeadElement&&f.head.style!=="morph"?S(l,a,f):(d(l,a,f),r(a,f)||i(l,a,f))),f.callbacks.afterNodeMorphed(a,l)),a):f.callbacks.beforeNodeRemoved(a)===!1||f.callbacks.beforeNodeAdded(l)===!1?a:(a.parentElement.replaceChild(l,a),f.callbacks.afterNodeAdded(l),f.callbacks.afterNodeRemoved(a),l)}function i(a,l,f){let h=a.firstChild,m=l.firstChild,y;for(;h;){if(y=h,h=y.nextSibling,m==null){if(f.callbacks.beforeNodeAdded(y)===!1)return;l.appendChild(y),f.callbacks.afterNodeAdded(y),P(f,y);continue}if(z(y,m,f)){o(m,y,f),m=m.nextSibling,P(f,y);continue}let w=x(a,l,y,m,f);if(w){m=I(m,w,f),o(w,y,f),P(f,y);continue}let T=N(a,l,y,m,f);if(T){m=I(m,T,f),o(T,y,f),P(f,y);continue}if(f.callbacks.beforeNodeAdded(y)===!1)return;l.insertBefore(y,m),f.callbacks.afterNodeAdded(y),P(f,y)}for(;m!==null;){let w=m;m=m.nextSibling,fe(w,f)}}function c(a,l,f,h){return a==="value"&&h.ignoreActiveValue&&l===document.activeElement?!0:h.callbacks.beforeAttributeUpdated(a,l,f)===!1}function d(a,l,f){let h=a.nodeType;if(h===1){let m=a.attributes,y=l.attributes;for(let w of m)if(!c(w.name,l,"update",f))try{l.getAttribute(w.name)!==w.value&&(w.name==="class"?u(a,l):l.setAttribute(w.name,w.value))}catch(T){console.error("Error setting attribute:",{badNode:l,badAttribute:w,error:T.message})}for(let w=y.length-1;0<=w;w--){let T=y[w];c(T.name,l,"remove",f)||a.hasAttribute(T.name)||l.removeAttribute(T.name)}}(h===8||h===3)&&l.nodeValue!==a.nodeValue&&(l.nodeValue=a.nodeValue),r(l,f)||g(a,l,f)}function u(a,l){let f=new Set(a.className.split(/\s+/).filter(Boolean)),h=new Set(l.className.split(/\s+/).filter(Boolean));for(let m of h)f.has(m)||l.classList.remove(m);for(let m of f)h.has(m)||l.classList.add(m)}function p(a,l,f,h){if(a[f]!==l[f]){let m=c(f,l,"update",h);m||(l[f]=a[f]),a[f]?m||l.setAttribute(f,a[f]):c(f,l,"remove",h)||l.removeAttribute(f)}}function g(a,l,f){if(a instanceof HTMLInputElement&&l instanceof HTMLInputElement&&a.type!=="file"){let h=a.value,m=l.value;p(a,l,"checked",f),p(a,l,"disabled",f),a.hasAttribute("value")?h!==m&&(c("value",l,"update",f)||(l.setAttribute("value",h),l.value=h)):c("value",l,"remove",f)||(l.value="",l.removeAttribute("value"))}else if(a instanceof HTMLOptionElement)p(a,l,"selected",f);else if(a instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement){let h=a.value,m=l.value;if(c("value",l,"update",f))return;h!==m&&(l.value=h),l.firstChild&&l.firstChild.nodeValue!==h&&(l.firstChild.nodeValue=h)}}function S(a,l,f){let h=[],m=[],y=[],w=[],T=f.head.style,H=new Map;for(let L of a.children)H.set(L.outerHTML,L);for(let L of l.children){let M=H.has(L.outerHTML),U=f.head.shouldReAppend(L),Y=f.head.shouldPreserve(L);M||Y?U?m.push(L):(H.delete(L.outerHTML),y.push(L)):T==="append"?U&&(m.push(L),w.push(L)):f.head.shouldRemove(L)!==!1&&m.push(L)}w.push(...H.values());let ue=[];for(let L of w){let M=document.createRange().createContextualFragment(L.outerHTML).firstChild;if(f.callbacks.beforeNodeAdded(M)!==!1){if(M.href||M.src){let U=null,Y=new Promise(function(Ye){U=Ye});M.addEventListener("load",function(){U()}),ue.push(Y)}l.appendChild(M),f.callbacks.afterNodeAdded(M),h.push(M)}}for(let L of m)f.callbacks.beforeNodeRemoved(L)!==!1&&(l.removeChild(L),f.callbacks.afterNodeRemoved(L));return f.head.afterHeadMorphed(l,{added:h,kept:y,removed:m}),ue}function F(){}function E(){}function A(a){let l={};return Object.assign(l,t),Object.assign(l,a),l.callbacks={},Object.assign(l.callbacks,t.callbacks),Object.assign(l.callbacks,a.callbacks),l.head={},Object.assign(l.head,t.head),Object.assign(l.head,a.head),l}function C(a,l,f){return f=A(f),{target:a,newContent:l,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Ke(a,l),deadIds:new Set,callbacks:f.callbacks,head:f.head}}function z(a,l,f){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName?a.id!==""&&a.id===l.id?!0:G(f,a,l)>0:!1}function b(a,l){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName}function I(a,l,f){for(;a!==l;){let h=a;a=a.nextSibling,fe(h,f)}return P(f,l),l.nextSibling}function x(a,l,f,h,m){let y=G(m,f,l),w=null;if(y>0){let T=h,H=0;for(;T!=null;){if(z(f,T,m))return T;if(H+=G(m,T,a),H>y)return null;T=T.nextSibling}}return w}function N(a,l,f,h,m){let y=h,w=f.nextSibling,T=0;for(;y!=null;){if(G(m,y,a)>0)return null;if(b(f,y))return y;if(b(w,y)&&(T++,w=w.nextSibling,T>=2))return null;y=y.nextSibling}return y}function K(a){let l=new DOMParser,f=a.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(f.match(/<\/html>/)||f.match(/<\/head>/)||f.match(/<\/body>/)){let h=l.parseFromString(a,"text/html");if(f.match(/<\/html>/))return h.generatedByIdiomorph=!0,h;{let m=h.firstChild;return m?(m.generatedByIdiomorph=!0,m):null}}else{let m=l.parseFromString("<body><template>"+a+"</template></body>","text/html").body.querySelector("template").content;return m.generatedByIdiomorph=!0,m}}function R(a){if(a==null)return document.createElement("div");if(a.generatedByIdiomorph)return a;if(a instanceof Node){let l=document.createElement("div");return l.append(a),l}else{let l=document.createElement("div");for(let f of[...a])l.append(f);return l}}function j(a,l,f){let h=[],m=[];for(;a!=null;)h.push(a),a=a.previousSibling;for(;h.length>0;){let y=h.pop();m.push(y),l.parentElement.insertBefore(y,l)}for(m.push(l);f!=null;)h.push(f),m.push(f),f=f.nextSibling;for(;h.length>0;)l.parentElement.insertBefore(h.pop(),l.nextSibling);return m}function Ve(a,l,f){let h;h=a.firstChild;let m=h,y=0;for(;h;){let w=Ze(h,l,f);w>y&&(m=h,y=w),h=h.nextSibling}return m}function Ze(a,l,f){return b(a,l)?.5+G(f,a,l):0}function fe(a,l){P(l,a),l.callbacks.beforeNodeRemoved(a)!==!1&&(a.remove(),l.callbacks.afterNodeRemoved(a))}function Xe(a,l){return!a.deadIds.has(l)}function Je(a,l,f){return(a.idMap.get(f)||e).has(l)}function P(a,l){let f=a.idMap.get(l)||e;for(let h of f)a.deadIds.add(h)}function G(a,l,f){let h=a.idMap.get(l)||e,m=0;for(let y of h)Xe(a,y)&&Je(a,y,f)&&++m;return m}function de(a,l){let f=a.parentElement,h=a.querySelectorAll("[id]");for(let m of h){let y=m;for(;y!==f&&y!=null;){let w=l.get(y);w==null&&(w=new Set,l.set(y,w)),w.add(m.id),y=y.parentElement}}}function Ke(a,l){let f=new Map;return de(a,f),de(l,f),f}return{morph:n,defaults:t}}();var ht=e=>{let t=e.split(/(<\/?[^>]+>)/g).map(r=>r.trim()).filter(r=>r),n=0,s=[];for(let r=0;r<t.length;r++){let o=t[r],i=t[r+1],c=t[r+2];if(o.startsWith("<"))if(!o.startsWith("</")&&!o.endsWith("/>")&&i&&!i.startsWith("<")&&c&&c.startsWith("</")){let d=Math.max(0,n);s.push("  ".repeat(d)+o+i+c),r+=2}else if(o.startsWith("</")){n--;let d=Math.max(0,n);s.push("  ".repeat(d)+o)}else if(o.endsWith("/>")||o.includes(" />")){let d=Math.max(0,n);s.push("  ".repeat(d)+o)}else{let d=Math.max(0,n);s.push("  ".repeat(d)+o),n++}else if(o){let d=Math.max(0,n);s.push("  ".repeat(d)+o)}}return s.join(`
`)},oe=(()=>{let e=[],t=[],n=0,s=null;document.addEventListener("keydown",i=>{if(i.key==="Escape"){i.preventDefault();let c=document.getElementById("dump-dialog"),d=document.getElementById("log-reopen-button");c?(c.remove(),r()):d&&(d.remove(),o())}else(i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="ArrowUp"||i.key==="ArrowDown")&&document.getElementById("dump-dialog")&&e.length>0&&(i.preventDefault(),i.key==="ArrowLeft"&&n>0?(n--,localStorage.setItem("_LOG_INDEX",n),s()):i.key==="ArrowRight"&&n<e.length-1?(n++,localStorage.setItem("_LOG_INDEX",n),s()):i.key==="ArrowUp"&&n>0?(n=Math.max(0,n-5),localStorage.setItem("_LOG_INDEX",n),s()):i.key==="ArrowDown"&&n<e.length-1&&(n=Math.min(e.length-1,n+5),localStorage.setItem("_LOG_INDEX",n),s()))});let r=()=>{let i=document.getElementById("log-reopen-button");i||(i=document.body.appendChild(document.createElement("button")),i.id="log-reopen-button",i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>LOG',i.style.cssText="position:fixed; top: 10px; right: 10px;padding:10px 20px;background:#ff3333;color:#fff;border:none;cursor:pointer;font:14px/1.4 monospace;z-index:2147483647;border-radius:8px;display:flex;align-items:center;opacity:1;visibility:visible;box-shadow:0 4px 12px rgba(255,51,51,0.3)",i.onclick=()=>{i.remove(),o()})},o=()=>{let i=document.getElementById("log-reopen-button");i&&i.remove();let c=document.getElementById("dump-dialog");c||(c=document.body.appendChild(document.createElement("div")),c.id="dump-dialog",c.style.cssText="position:fixed; top:20px; left:20px; right:20px; max-height:calc(100vh - 40px);background:#fff; border:1px solid #333; box-shadow:0 0 10px rgba(0,0,0,0.5);padding:20px; overflow:auto; z-index:2147483646; font:13px/1.4 monospace;white-space:pre; display:block; opacity:1; visibility:visible");let d=parseInt(localStorage.getItem("_LOG_INDEX"));!isNaN(d)&&d>=0&&d<e.length?n=d:n=e.length-1,s=()=>{let u=e.map((p,g)=>{let S="#f0f0f0";return g!==n&&(t[g]==="object"?S="#d6e3ef":t[g]==="array"&&(S="#d8d5ef")),`<button style="font-size: 14px; font-weight: 400; padding:2px 6px; margin: 0 2px 2px 0;cursor:pointer;background:${g===n?"#333":S};color:${g===n?"#fff":"#000"}" data-index="${g}">${g+1}</button>`}).join("");c.innerHTML='<div style="display:flex;flex-direction:column;height:100%"><div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div style="display:flex;flex-wrap:wrap;gap:4px;flex:1;margin-right:10px">'+u+'</div><button style="padding:4px 8px;cursor:pointer;flex-shrink:0">&times;</button></div><xmp style="font-family:monospace;flex:1;overflow:auto;margin:0;padding:0;color:#000;background:#fff;font-size:14px;line-height:22px">'+e[n]+"</xmp></div>",c.querySelector('button[style*="flex-shrink:0"]').onclick=()=>{c.remove(),r()},c.querySelectorAll("button[data-index]").forEach(p=>{p.onclick=()=>{n=parseInt(p.dataset.index),localStorage.setItem("_LOG_INDEX",n),s()}})},s()};return i=>{if(!document.body){window.requestAnimationFrame(()=>oe(i));return}let c=typeof i;i instanceof Node&&(i.nodeType===Node.TEXT_NODE?i=i.textContent||String(i):i=ht(i.outerHTML)),i===void 0&&(i="undefined"),i===null&&(i="null"),Array.isArray(i)?c="array":typeof i=="object"&&i!==null&&(c="object"),typeof i!="string"&&(i=JSON.stringify(i,(u,p)=>typeof p=="function"?String(p):p,2).replaceAll("<","&lt;")),i=i.trim(),e.push(i+`

type: ${c}`),t.push(c),!!document.getElementById("dump-dialog")?(n=e.length-1,localStorage.setItem("_LOG_INDEX",n),s&&s()):o()}})();typeof window<"u"&&!window.LOG&&(window.LOG=oe);var Me=oe;var _e=()=>{let e=parseInt(window.location.port)||80;if(!(Fez.DEV===!0||e>2999&&Fez.DEV!==!1))return;let t=document.querySelectorAll(".fez-highlight-overlay");if(t.length>0){t.forEach(s=>s.remove());return}document.querySelectorAll(".fez, .svelte").forEach(s=>{let r=null,o=null;if(s.classList.contains("fez")&&s.fez&&s.fez.fezName?(r=s.fez.fezName,o="fez"):s.classList.contains("svelte")&&s.svelte&&s.svelte.svelteName&&(r=s.svelte.svelteName,o="svelte"),r){let i=document.createElement("div");i.className="fez-highlight-overlay";let c=s.getBoundingClientRect(),d=window.pageYOffset||document.documentElement.scrollTop,u=window.pageXOffset||document.documentElement.scrollLeft;i.style.cssText=`
        position: absolute;
        top: ${c.top+d}px;
        left: ${c.left+u}px;
        width: ${c.width}px;
        height: ${c.height}px;
        border: 1px solid ${o==="svelte"?"blue":"red"};
        pointer-events: none;
        z-index: 9999;
      `;let p=document.createElement("div");p.textContent=r,p.style.cssText=`
        position: absolute;
        top: -20px;
        left: 0;
        background: ${o==="svelte"?"blue":"red"};
        color: white;
        padding: 4px 6px 2px 6px;
        font-size: 14px;
        font-family: monospace;
        line-height: 1;
        white-space: nowrap;
        cursor: pointer;
        pointer-events: auto;
        text-transform: uppercase;
      `,p.addEventListener("click",g=>{g.stopPropagation(),Fez.log(s)}),i.appendChild(p),document.body.appendChild(i)}})};document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="e"&&(e.target.closest("form")||(e.preventDefault(),_e()))});var Fe=_e;var mt=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),gt=new MutationObserver(e=>{for(let t of e)if(t.type==="attributes"){let n=t.target.fez;if(n){let s=t.attributeName,r=t.target.getAttribute(s);n.props[s]=r,n.onPropsChange(s,r)}}});function ie(e,t){let n=globalThis.window?.Fez||globalThis.Fez;if(!e.includes("-")){console.error(`Fez: Invalid name "${e}". Must contain a dash.`);return}t=bt(n,e,t),t.html&&(t.html=t.html.replace(/<slot(\s[^>]*)?>/,'<div class="fez-slot" fez-keep="default-slot"$1>').replace("</slot>","</div>"),t.fezHtmlFunc=B(t.html,{name:e})),t.css&&(t.css=n.globalCss(t.css,{name:e})),n.index.ensure(e).class=t,customElements.get(e)||customElements.define(e,class extends HTMLElement{connectedCallback(){yt(this,t)?Re(e,this):requestAnimationFrame(()=>Re(e,this))}})}function bt(e,t,n){if(n.prototype instanceof D)return n.html&&(n.html=Ne(n.html)),n;let s=new n,r=class extends D{},o=[...Object.getOwnPropertyNames(s),...Object.getOwnPropertyNames(n.prototype)].filter(c=>c!=="constructor"&&c!=="prototype");for(let c of o)r.prototype[c]=s[c];let i={FAST:"FAST",GLOBAL:"GLOBAL",NAME:"nodeName"};for(let[c,d]of Object.entries(i))s[c]&&(r[d]=s[c]);if(s.CSS&&(r.css=typeof s.CSS=="function"?s.CSS():s.CSS),s.HTML){let c=typeof s.HTML=="function"?s.HTML():s.HTML;r.html=Ne(c)}return s.META&&(r.META=s.META,e.index.ensure(t).meta=s.META),s.GLOBAL&&e.onReady(()=>document.body.appendChild(document.createElement(t))),e.consoleLog(`${t} compiled`),r}function Ne(e){return e.replace(/<([a-z-]+)\b([^>]*)\/>/g,(t,n,s)=>mt.has(n)?t:`<${n}${s}></${n}>`)}function yt(e,t){let n=e.getAttribute("fez-fast");if(n==="false")return!1;let s=typeof t.FAST=="function"?t.FAST(e):t.FAST;return!!(n||s||e.childNodes[0]||e.nextSibling)}function Re(e,t){if(!t.isConnected||t.classList?.contains("fez"))return;let n=Fez.index[e]?.class,s=typeof n.nodeName=="function"?n.nodeName(t):n.nodeName,r=document.createElement(s||"div");if(r.classList.add("fez",`fez-${e}`),!t.parentNode){console.warn(`Fez: ${e} has no parent, skipping`);return}t.parentNode.replaceChild(r,t);let o=new n;o.UID=++Fez.instanceCount,Fez.instances.set(o.UID,o),o.oldRoot=t,o.fezName=e,o.root=r,o.props=n.getProps(t,r),o.class=n,o.fezSlot(t,r),r.fez=o,n.GLOBAL&&n.GLOBAL!==!0&&(window[n.GLOBAL]||=o),window.$&&(o.$root=$(r)),o.props.id&&r.setAttribute("id",o.props.id);let i=t.getAttribute("fez-keep");if(i&&r.setAttribute("fez-keep",i),o.fezRegister(),o.root.childNodes.length&&(o._fezChildNodes=Array.from(o.root.childNodes)),o._isInitializing=!0,(o.onInit||o.init||o.created||o.connect).call(o,o.props),o.fezRender(),o._isInitializing=!1,o.onMount(o.props),o.onSubmit){let d=o.root.nodeName==="FORM"?o.root:o.find("form");d&&(d.onsubmit=u=>{u.preventDefault(),o.onSubmit(o.formData())})}if(o.onPropsChange){gt.observe(r,{attributes:!0});for(let[d,u]of Object.entries(o.props))o.onPropsChange(d,u)}}function Oe(e){let t=e.split(`
`),n=t.filter(r=>r.trim());if(!n.length)return e;let s=Math.min(...n.map(r=>r.match(/^(\s*)/)[1].length));return s===0?e:t.map(r=>r.slice(s)).join(`
`)}function zt(e){if(!e)return!1;let t=e.replace(/<demo>[\s\S]*?<\/demo>/gi,"");return/<(xmp|template)\s+fez\s*=/i.test(t)}function q(e,t){if(arguments.length===1)return le(e);if(zt(t)){if(e){let s=ae(t);s.info?.trim()&&(Fez.index.ensure(e).info=s.info),s.demo?.trim()&&(Fez.index.ensure(e).demo=s.demo)}return le(t)}if(e&&!e.includes("-")&&!e.includes(".")&&!e.includes("/")){console.error(`Fez: Invalid name "${e}". Must contain a dash (e.g., 'my-element').`);return}Fez.index.ensure(e).source=t;let n=Et(e,ae(t));At(e),St(e,n)}function le(e){if(e instanceof Node){let n=e;n.remove();let s=n.getAttribute("fez");if(s?.includes(".")||s?.includes("/"))return wt(s);if(s&&!s.includes("-")){console.error(`Fez: Invalid name "${s}". Must contain a dash.`);return}return q(s,n.innerHTML)}(e?Fez.domRoot(e):document.body).querySelectorAll("template[fez], xmp[fez]").forEach(n=>le(n))}function wt(e){if(Fez.consoleLog(`Loading from ${e}`),e.endsWith(".txt")){Fez.head({fez:e});return}Fez.fetch(e).then(t=>{let s=new DOMParser().parseFromString(t,"text/html").querySelectorAll("template[fez], xmp[fez]");if(s.length>0){let r=e.split("/").pop().split(".")[0],o=ae(t);o.info?.trim()&&(Fez.index.ensure(r).info=o.info),o.demo?.trim()&&(Fez.index.ensure(r).demo=o.demo),s.forEach(i=>{let c=i.getAttribute("fez");if(c&&!c.includes("-")&&!c.includes(".")&&!c.includes("/")){console.error(`Fez: Invalid name "${c}". Must contain a dash.`);return}q(c,i.innerHTML)})}else{let r=e.split("/").pop().split(".")[0];q(r,t)}}).catch(t=>{Fez.onError("compile",`Load error for "${e}": ${t.message}`)})}function ae(e){let t={script:"",style:"",html:"",head:"",demo:"",info:""},n=e.split(`
`),s=[],r="";for(let o of n){let i=o.trim();i.startsWith("<demo")&&!t.demo&&!r?r="demo":i.startsWith("<info")&&!t.info&&!r?r="info":i.startsWith("<script")&&!t.script&&r!=="head"&&r!=="demo"&&r!=="info"?r="script":i.startsWith("<head")&&!t.script&&r!=="demo"&&r!=="info"?r="head":i.startsWith("<style")&&r!=="demo"&&r!=="info"?r="style":i.endsWith("</demo>")&&r==="demo"?(t.demo=Oe(s.join(`
`)),s=[],r=""):i.endsWith("</info>")&&r==="info"?(t.info=Oe(s.join(`
`)),s=[],r=""):i.endsWith("<\/script>")&&r==="script"&&!t.script?(t.script=s.join(`
`),s=[],r=""):i.endsWith("</style>")&&r==="style"?(t.style=s.join(`
`),s=[],r=""):(i.endsWith("</head>")||i.endsWith("</header>"))&&r==="head"?(t.head=s.join(`
`),s=[],r=""):r?s.push(r==="demo"||r==="info"?o:i):t.html+=i+`
`}return t.head&&vt(t.head),t}function vt(e){let t=Fez.domRoot(e);Array.from(t.children).forEach(n=>{if(n.tagName==="SCRIPT"){let s=document.createElement("script");Array.from(n.attributes).forEach(r=>{s.setAttribute(r.name,r.value)}),s.type||="text/javascript",n.src?document.head.appendChild(s):(s.type.includes("javascript")||s.type==="module")&&(s.textContent=n.textContent,document.head.appendChild(s))}else document.head.appendChild(n.cloneNode(!0))})}function Et(e,t){let n=t.script;if(/class\s+\{/.test(n)||(n=`class {
${n}
}`),String(t.style).includes(":")){let o=Fez.cssMixin(t.style);o=o.includes(":fez")||/(?:^|\s)body\s*\{/.test(o)?o:`:fez {
${o}
}`,n=n.replace(/\}\s*$/,`
  CSS = \`${o}\`
}`)}if(/\w/.test(String(t.html))){let o=t.html.replaceAll("`","&#x60;").replaceAll("$","\\$");n=n.replace(/\}\s*$/,`
  HTML = \`${o}\`
}`)}t.demo?.trim()&&(Fez.index.ensure(e).demo=t.demo),t.info?.trim()&&(Fez.index.ensure(e).info=t.info);let[s,r]=n.split(/class\s+\{/,2);return`${s};

window.Fez('${e}', class {
${r})`}function St(e,t){if(t.includes("import ")){let n=/Fez\.head\(\s*\{\s*importmap\s*:\s*(\{[\s\S]*?\})\s*\}\s*\)\s*;?/g,s;for(;(s=n.exec(t))!==null;)try{let r=new Function(`return ${s[1]}`)(),o=Object.entries(r).sort((i,c)=>c[0].length-i[0].length);for(let[i,c]of o){let d=i.replace(/[.*+?^${}()|[\]\\\/]/g,"\\$&");t=t.replace(new RegExp(`(from\\s+['"])${d}`,"g"),`$1${c}`)}}catch(r){Fez.consoleError(`importmap parse error: ${r.message}`)}t=t.replace(n,""),Fez.head({script:t}),setTimeout(()=>{Fez.index[e]?.class||Fez.consoleError(`Template "${e}" possible compile error.`)},2e3)}else try{new Function(t)()}catch(n){Fez.consoleError(`Template "${e}" compile error: ${n.message}`),console.log(t)}}function At(e){if(!e)return;let t=document.getElementById("fez-hidden-styles");t||(t=document.createElement("style"),t.id="fez-hidden-styles",document.head.appendChild(t));let n=[...Fez.index.names(),e].sort().join(", ");t.textContent=`${n} { display: none; }
`}var $t={data:{},listeners:new Map,subscribers:new Map,globalSubscribers:new Set,notify(e,t,n){Fez.consoleLog(`Global state change for ${e}: ${t} (from ${n})`);let s=this.listeners.get(e);s&&s.forEach(o=>{if(o.isConnected)try{o.onGlobalStateChange(e,t,n),o.fezRender()}catch(i){console.error(`Error in component listener for key ${e}:`,i)}else s.delete(o)});let r=this.subscribers.get(e);r&&r.forEach(o=>{try{o(t,n,e)}catch(i){console.error(`Error in subscriber for key ${e}:`,i)}}),this.globalSubscribers.forEach(o=>{try{o(e,t,n)}catch(i){console.error("Error in global subscriber:",i)}})},createProxy(e){return e.addOnDestroy(()=>{for(let[t,n]of this.listeners)n.delete(e);e._globalStateKeys?.clear()}),new Proxy({},{get:(t,n)=>{if(typeof n!="symbol")return e._globalStateKeys||=new Set,e._globalStateKeys.has(n)||(e._globalStateKeys.add(n),this.listeners.has(n)||this.listeners.set(n,new Set),this.listeners.get(n).add(e)),this.data[n]},set:(t,n,s)=>{if(typeof n=="symbol")return!0;let r=this.data[n];return r!==s&&(this.data[n]=s,this.notify(n,s,r)),!0}})},set(e,t){let n=this.data[e];n!==t&&(this.data[e]=t,this.notify(e,t,n))},get(e){return this.data[e]},forEach(e,t){let n=this.listeners.get(e);n&&n.forEach(s=>{s.isConnected?t(s):n.delete(s)})},subscribe(e,t){if(typeof e=="function")return this.globalSubscribers.add(e),()=>this.globalSubscribers.delete(e);{let n=e;return this.subscribers.has(n)||this.subscribers.set(n,new Set),this.subscribers.get(n).add(t),()=>{let s=this.subscribers.get(n);s&&(s.delete(t),s.size===0&&this.subscribers.delete(n))}}}},De=$t;var J=()=>globalThis.localStorage||window.localStorage;function Tt(e,t){try{J().setItem(e,JSON.stringify(t))}catch(n){console.error(`Fez localStorage: Failed to set "${e}"`,n)}}function Ct(e,t=null){try{let n=J().getItem(e);return n===null?t:JSON.parse(n)}catch(n){return console.error(`Fez localStorage: Failed to get "${e}"`,n),t}}function Lt(e){J().removeItem(e)}function xt(){J().clear()}var ke={set:Tt,get:Ct,remove:Lt,clear:xt};function ce(e,t,n){e._awaitStates||=new Map;let s=e._awaitStates.get(t);if(!n||typeof n.then!="function")return{status:"resolved",value:n,error:null};if(s&&s.promise===n)return s;let r={status:"pending",value:null,error:null,promise:n};return e._awaitStates.set(t,r),n.then(o=>{let i=e._awaitStates.get(t);i&&i.promise===n&&(i.status="resolved",i.value=o,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}).catch(o=>{let i=e._awaitStates.get(t);i&&i.promise===n&&(i.status="rejected",i.error=o,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}),r}function je(e){let t=document.createElement("div");return t.innerHTML=e,t}var It={ensure(e){return(!this[e]||typeof this[e]!="object"||!("class"in this[e]))&&(this[e]={class:null,meta:null,demo:null,info:null,source:null}),this[e]},get(e){let t=this[e];return!t||typeof t!="object"||!("class"in t)?{class:null,meta:null,demo:null,info:null,source:null}:{class:t.class,meta:t.meta,source:t.source,demo:t.demo?je(t.demo):null,info:t.info?je(t.info):null}},apply(e,t){let n=this[e];if(!n?.demo||!t)return!1;let s=document.createElement("div");return s.innerHTML=n.demo,s.querySelectorAll(":scope > script").forEach(r=>{let o=r.textContent;if(o.trim())try{new Function(o)()}catch(i){console.error(`Fez.index.apply("${e}") script error:`,i.message)}r.remove()}),t.innerHTML=s.innerHTML,!0},names(){return Object.keys(this).filter(e=>typeof this[e]=="object"&&this[e]!==null&&"class"in this[e])},withDemo(){return this.names().filter(e=>this[e].demo)},all(){let e={};for(let t of this.names())e[t]=this.get(t);return e},info(){console.log("Fez components:",this.names())}},Pe=It;var He=e=>{e.head=(r,o)=>{if(r.nodeName){r.nodeName=="SCRIPT"?(e.head({script:r.innerText}),r.remove()):(r.querySelectorAll("script").forEach(g=>e.head(g)),r.querySelectorAll("template[fez], xmp[fez], script[fez]").forEach(g=>e.compile(g)));return}if(typeof r!="object"||r===null)throw new Error("head requires an object parameter");let i,c={},d;if(r.fez){let g=r.fez;if(g.endsWith(".txt")){e.fetch(g).then(S=>{let F=g.substring(0,g.lastIndexOf("/")+1),E=S.split(`
`).map(z=>z.trim()).filter(z=>z&&!z.startsWith("#")),A=0,C=E.length;E.forEach(z=>{let b;if(z.startsWith("/"))b=z;else{let x=z.endsWith(".fez")?z:z+".fez";b=F+x}let I=b.split("/").pop().split(".")[0];e.fetch(b).then(x=>{e.compile(I,x),A++,A===C&&o&&o()})})});return}e.fetch(g).then(S=>{let F=g.split("/").pop().split(".")[0];e.compile(F,S),o&&o()});return}if(r.script){if(r.script.includes("import ")){o&&e.consoleError("Fez.head callback is not supported when script with import is passed (module context).");let g=document.createElement("script");g.type="module",g.textContent=r.script,document.head.appendChild(g),requestAnimationFrame(()=>g.remove())}else try{new Function(r.script)(),o&&o()}catch(g){e.consoleError("Error executing script:",g),console.log(r.script)}return}else if(r.js){i=r.js,d="script";for(let[g,S]of Object.entries(r))g!=="js"&&g!=="module"&&(c[g]=S);r.module&&(c.type="module")}else if(r.css){i=r.css,d="link",c.rel="stylesheet";for(let[g,S]of Object.entries(r))g!=="css"&&(c[g]=S)}else throw new Error('head requires either "script", "js" or "css" property');let u=document.querySelector(`${d}[src="${i}"], ${d}[href="${i}"]`);if(u)return o&&o(),u;let p=document.createElement(d);d==="link"?p.href=i:p.src=i;for(let[g,S]of Object.entries(c))p.setAttribute(g,S);return(o||r.module)&&(p.onload=()=>{r.module&&d==="script"&&import(i).then(g=>{window[r.module]=g.default||g[r.module]||g}).catch(g=>{console.error(`Error importing module ${r.module}:`,g)}),o&&o()}),document.head.appendChild(p),p};let t=5*60*1e3,n=100;e.fetch=function(...r){e._fetchCache||=new Map;let o="GET",i,c;typeof r[0]=="string"&&/^[A-Z]+$/.test(r[0])&&(o=r.shift()),i=r.shift();let d={},u=null;if(typeof r[0]=="object"&&(u=r.shift()),typeof r[0]=="function"&&(c=r.shift()),u){if(o==="GET"){let E=new URLSearchParams(u);i+=(i.includes("?")?"&":"?")+E.toString()}else if(o==="POST"){let E=new FormData;for(let[A,C]of Object.entries(u))E.append(A,C);d.body=E}}d.method=o;let p=`${o}:${i}:${JSON.stringify(d)}`,g=e._fetchCache.get(p);if(g&&Date.now()-g.timestamp<t){if(e.consoleLog(`fetch cache hit: ${o} ${i}`),c){c(g.data);return}return Promise.resolve(g.data)}e.consoleLog(`fetch live: ${o} ${i}`);let S=E=>E.headers.get("content-type")?.includes("application/json")?E.json():E.text(),F=(E,A)=>{if(e._fetchCache.size>=n){let C=e._fetchCache.keys().next().value;e._fetchCache.delete(C)}e._fetchCache.set(E,{data:A,timestamp:Date.now()})};if(c){fetch(i,d).then(S).then(E=>{F(p,E),c(E)}).catch(E=>e.onError("fetch",E));return}return fetch(i,d).then(S).then(E=>(F(p,E),E))},e.clearFetchCache=()=>{e._fetchCache?.clear()},e.darkenColor=(r,o=20)=>{let i=parseInt(r.replace("#",""),16),c=Math.round(2.55*o),d=(i>>16)-c,u=(i>>8&255)-c,p=(i&255)-c;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(u<255?u<1?0:u:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.lightenColor=(r,o=20)=>{let i=parseInt(r.replace("#",""),16),c=Math.round(2.55*o),d=(i>>16)+c,u=(i>>8&255)+c,p=(i&255)+c;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(u<255?u<1?0:u:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.htmlEscape=r=>typeof r=="string"?r.replace(/font-family\s*:\s*(?:&[^;]+;|[^;])*?;/gi,"").replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;"):r===void 0?"":r,e.domRoot=(r,o="div")=>{if(r instanceof Node)return r;{let i=document.createElement(o);return i.innerHTML=r,i}},e.activateNode=(r,o="active")=>{!r||!r.parentElement||(Array.from(r.parentElement.children).forEach(i=>{i.classList.remove(o)}),r.classList.add(o))},e.isTrue=r=>["1","true","on"].includes(String(r).toLowerCase()),e.UID=111,e.uid=()=>"fez_uid_"+(++e.UID).toString(32),e.POINTER_SEQ=0,e.POINTER={},e.pointer=(r,o={})=>{if(typeof r=="function"){let i=++e.POINTER_SEQ;return o.persist?e.POINTER[i]=r:e.POINTER[i]=(...c)=>{let d=r(...c);return delete e.POINTER[i],d},`Fez.POINTER[${i}]`}},e.clearPointers=()=>{e.POINTER={}},e.getFunction=r=>{if(r){if(typeof r=="function")return r;if(typeof r=="string"){let o=/^\s*\(?\s*\w+(\s*,\s*\w+)*\s*\)?\s*=>/,i=/^\s*function\s*\(/;return o.test(r)||i.test(r)?new Function("return "+r)():r.includes(".")&&!r.includes("(")?new Function(`return function() { return ${r}(); }`):new Function(r)}}else return()=>{}},e.onReady=r=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{r()},{once:!0}):r()},e.fnv1=r=>{var o,i,c,d,u,p;for(o=2166136261,i=16777619,c=o,d=u=0,p=r.length-1;0<=p?u<=p:u>=p;d=0<=p?++u:--u)c^=r.charCodeAt(d),c*=i;return c.toString(36).replaceAll("-","")},e.tag=(r,o={},i="")=>{let c=encodeURIComponent(JSON.stringify(o));return`<${r} data-props="${c}">${i}</${r}>`},e.untilTrue=(r,o)=>{o||=200,r()||setTimeout(()=>{e.untilTrue(r,o)},o)};let s=200;e.throttle=(r,o=s)=>{let i=0,c;return function(...d){let u=Date.now();u-i>=o?(r.apply(this,d),i=u):(clearTimeout(c),c=setTimeout(()=>{r.apply(this,d),i=Date.now()},o-(u-i)))}},e.toPairs=r=>Array.isArray(r)?r.map((o,i)=>[o,i]):r&&typeof r=="object"?Object.entries(r):[],e.typeof=r=>{if(r==null)return"u";if(Array.isArray(r))return"a";let o=typeof r;return o==="function"?"f":o==="string"?"s":o==="number"?Number.isInteger(r)?"i":"n":o==="object"?"o":o[0]}};var Be={},qe=e=>{e.cssMixin=(t,n)=>{if(n)Be[t]=n;else return Object.entries(Be).forEach(([s,r])=>{t=t.replaceAll(`:${s} `,`${r} `),t=t.replaceAll(`@include ${s} `,`${r} `)}),t},e.cssMixin("mobile","@media (max-width: 767px)"),e.cssMixin("tablet","@media (min-width: 768px) and (max-width: 1023px)"),e.cssMixin("desktop","@media (min-width:  1200px)")};var v=(e,t)=>{if(typeof e=="number"){let s=v.instances.get(e);if(s)return s;v.consoleError(`Instance with UID "${e}" not found.`);return}if(!e){v.consoleError("Fez() ?");return}if(t){if(typeof t=="function"&&!/^\s*class/.test(t.toString())&&!/\b(this|new)\b/.test(t.toString())){let r=Array.from(document.querySelectorAll(`.fez.fez-${e}`)).filter(o=>o.fez);return r.forEach(o=>t(o.fez)),r}return typeof t!="function"?v.find(e,t):ie(e,t)}let n=e.nodeName?e.closest(".fez"):document.querySelector(e.includes("#")?e:`.fez.fez-${e}`);if(!n){v.consoleError(`node "${e}" not found.`);return}if(!n.fez){v.consoleError(`node "${e}" has no Fez attached.`);return}return n.fez};v.index=Pe;v.instanceCount=0;v.instances=new Map;v.find=(e,t)=>{let n=typeof e=="string"?document.body.querySelector(e):e;typeof n.val=="function"&&(n=n[0]);let s=t?`.fez.fez-${t}`:".fez",r=n.closest(s);if(r?.fez)return r.fez;v.onError("find","Node connector not found",{original:e,resolved:n})};v.cssClass=e=>{try{return xe.css(e)}catch{let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return"fez-"+Math.abs(t).toString(36)}};v.globalCss=(e,t={})=>{if(typeof e=="function"&&(e=e()),e.includes(":")){let n=e.split(`
`).filter(s=>!/^\s*\/\//.test(s)).join(`
`);t.wrap&&(n=`:fez { ${n} }`),n=n.replace(/\:fez|\:host/,`.fez.fez-${t.name}`),e=v.cssClass(n)}return v.onReady(()=>document.body.parentElement.classList.add(e)),e};v.morphdom=(e,t)=>{Array.from(e.attributes).forEach(s=>{t.setAttribute(s.name,s.value)}),Ie.morph(e,t,{morphStyle:"outerHTML",ignoreActiveValue:!0,callbacks:{beforeNodeMorphed:(s,r)=>s!==e&&s.classList?.contains("fez")&&s.fez&&!s.fez._destroyed?(v.LOG&&console.log(`Fez: preserved child component ${s.fez.fezName} (UID ${s.fez.UID})`),!1):!0,beforeNodeRemoved:s=>(s.classList?.contains("fez")&&s.fez&&s.fez.fezOnDestroy(),!0)}});let n=e.nextSibling;n?.nodeType===Node.TEXT_NODE&&!n.textContent.trim()&&n.remove()};v.subscribe=ve;v.publish=Ee;v.localStorage=ke;v.fezAwait=ce;v.consoleError=(e,t)=>{if(e=`Fez: ${e}`,console.error(e),t)return`<span style="border: 1px solid red; font-size: 14px; padding: 3px 7px; background: #fee; border-radius: 4px;">${e}</span>`};v.consoleLog=e=>{v.LOG&&console.log(`Fez: ${String(e).substring(0,180)}`)};v.onError=(e,t,n)=>{let s=`Fez ${e}: ${t?.toString?.()||t}`;return console.error(s,n||""),s};He(v);qe(v);v.compile=q;v.createTemplate=B;v.state=De;v.log=Me;v.highlightAll=Fe;v.onReady(()=>v.consoleLog("Fez.LOG === true, logging enabled."));var W=v;typeof window<"u"&&(window.FezBase=D,window.Fez=W);Promise.resolve().then(()=>Ue());var Mt=new MutationObserver(e=>{for(let{addedNodes:t,removedNodes:n}of e)t.forEach(s=>{s.nodeType===1&&(s.matches?.("template[fez], xmp[fez], script[fez]")&&(W.compile(s),s.remove()),s.querySelectorAll?.("template[fez], xmp[fez], script[fez]").forEach(r=>{W.compile(r),r.remove()}))}),n.forEach(s=>{if(s.nodeType!==1)return;let r=o=>{o.fez&&!o.fez._destroyed&&queueMicrotask(()=>{!o.isConnected&&o.fez&&!o.fez._destroyed&&(W.instances.delete(o.fez.UID),o.fez.fezOnDestroy())})};r(s),s.querySelectorAll?.(".fez")?.forEach(r)})});Mt.observe(document.documentElement,{childList:!0,subtree:!0});var Ln=W;})();
//# sourceMappingURL=fez.js.map
