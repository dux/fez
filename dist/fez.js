(()=>{var Xe=Object.defineProperty;var Ke=(e,r)=>()=>(e&&(r=e(e=0)),r);var Je=(e,r)=>{for(var t in r)Xe(e,t,{get:r[t],enumerable:!0})};var Pe={};Je(Pe,{loadDefaults:()=>xe});var xe,He=Ke(()=>{xe=()=>{Fez("fez-component",class{init(e){let r=document.createElement(e.name);for(r.props=e.props||e["data-props"]||e;this.root.firstChild;)this.root.parentNode.insertBefore(this.root.lastChild,r.nextSibling);this.root.innerHTML="",this.root.appendChild(r)}}),Fez("fez-include",class{init(e){Fez.fetch(e.src,r=>{let t=Fez.domRoot(r);Fez.head(t),this.root.innerHTML=t.innerHTML})}}),Fez("fez-for",class{FAST=!0;init(e){let r=this.root?.innerHTML?.trim();if(!r)return;let t=e.divider||",";if(e.list){let n=e.list.split(t).map((s,i)=>r.replace(/KEY/g,s.trim()).replace(/INDEX/g,i)).join("");this.root.innerHTML=n}else if(e.object){let n=e.object.split(";").map(s=>{let[i,...o]=s.split(":"),c=i.trim();return c?r.replace(/KEY/g,c).replace(/VALUE/g,o.join(":").trim()):""}).join("");this.root.innerHTML=n}}}),Fez("fez-if",class{init(e){new Function(`return (${e.if||e.test})`)()||this.root.remove()}})};typeof Fez<"u"&&Fez&&xe()});function Y(e,r={},t){if(typeof r=="string"&&([r,t]=[t,r],r||={}),r instanceof Node&&(t=r,r={}),Array.isArray(e)&&(t=e,e="div"),(typeof r!="object"||Array.isArray(r))&&(t=r,r={}),e.includes(".")){let s=e.split(".");e=s.shift()||"div";let i=s.join(" ");r.class?r.class+=` ${i}`:r.class=i}let n=document.createElement(e);for(let[s,i]of Object.entries(r))if(typeof i=="function")n[s]=i.bind(this);else{let o=String(i).replaceAll("fez.",this.fezHtmlRoot);n.setAttribute(s,o)}if(t)if(Array.isArray(t))for(let s of t)n.appendChild(s);else t instanceof Node?n.appendChild(t):n.innerHTML=String(t);return n}function W(e){if(e.startsWith("[")){let n=e.match(/^\[([^\]]+)\](?:\s*,\s*(\w+))?$/);if(n)return{params:n[1].split(",").map(s=>s.trim()),indexParam:n[2]||null,isDestructured:!0}}let t=e.split(",").map(n=>n.trim());return t.length===2?{params:t,indexParam:null,isDestructured:!0}:{params:t,indexParam:null,isDestructured:!1}}function ue(e){let r=W(e),t=[...r.params];return r.indexParam&&t.push(r.indexParam),r.params.length===1&&!t.includes("i")&&t.push("i"),t}function de(e){let r=W(e);return r.isDestructured&&r.params.length===2?[r.params[0]]:r.isDestructured?r.params:r.params.length>=3?r.params.slice(0,-1):r.params.length===2?[r.params[0]]:r.params}function pe(e,r){let t=W(r);return t.isDestructured&&t.params.length===2?`Fez.toPairs(${e})`:t.isDestructured||t.params.length>=3?`((_c)=>Array.isArray(_c)?_c:(_c&&typeof _c==="object")?Object.entries(_c):[])(${e})`:`(${e}||[])`}function he(e){let r=W(e);if(r.isDestructured){let n="["+r.params.join(", ")+"]",s=r.indexParam||(r.params.includes("i")?"_i":"i");return n+", "+s}if(r.params.length>=3){let n=[...r.params],s=n.pop();return"["+n.join(", ")+"], "+s}if(r.params.length===2)return r.params.join(", ");let t=r.params[0]==="i"?"_i":"i";return r.params[0]+", "+t}function me(e){return/^\s*(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/.test(e)}function ge(e,r=[],t=[]){let n=e.match(/^\s*(?:\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*(.+)$/s);if(!n)return e;let s=n[1].trim(),o=e.match(/^\s*\(?\s*([a-zA-Z_$][a-zA-Z0-9_$]*)?\s*(?:,\s*[^)]+)?\)?\s*=>/)?.[1],c=o&&["e","event","ev"].includes(o);if(t.filter(d=>new RegExp(`\\b${d}\\b`).test(s)).length>0){if(c&&o!=="event"){let d=new RegExp(`\\b${o}\\b`,"g");s=s.replace(d,"event")}return s=s.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(d,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?d:`fez.${p}(`),`\${'Fez(' + UID + ').fezGlobals.delete(' + fez.fezGlobals.set(() => ${s}) + ')()'}`}if(c&&o!=="event"){let d=new RegExp(`\\b${o}\\b`,"g");s=s.replace(d,"event")}for(let d of r){let p=new RegExp(`(?<!\\$\\{)\\b${d}\\b(?![^{]*\\})`,"g");s=s.replace(p,`\${${d}}`)}return s=s.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(d,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?d:`fez.${p}(`),s}function be(e,r){let t=0,n=r;for(;n<e.length;){let s=e[n];if(s==="{")t++;else if(s==="}"){if(t--,t===0)return{expression:e.slice(r+1,n),endIndex:n}}else if(s==='"'||s==="'"||s==="`"){let i=s;for(n++;n<e.length&&e[n]!==i;)e[n]==="\\"&&n++,n++}n++}throw new Error(`Unmatched brace at ${r}`)}function Q(e,r){let t=r-1;for(;t>=0&&(e[t]==="{"||e[t]===" "||e[t]==="	");)t--;if(t>=0&&e[t]==="="){for(t--;t>=0&&(e[t]===" "||e[t]==="	");)t--;let n=t+1;for(;t>=0&&/[a-zA-Z0-9_:-]/.test(e[t]);)t--;let s=e.slice(t+1,n);if(s&&/^[a-zA-Z]/.test(s))return s.toLowerCase()}return null}function ye(e,r){let t=Q(e,r);return t&&/^on[a-z]+$/.test(t)?t:null}function ee(e,r={}){let t=r.name||"unknown";try{e=e.replaceAll("&#x60;","`").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&");let n={};e=e.replace(/\{@block\s+(\w+)\}([\s\S]*?)\{\/block\}/g,(v,C,z)=>(n[C]=z,"")),e=e.replace(/\{@block:(\w+)\}/g,(v,C)=>n[C]||""),e=e.replace(/:(\w+)="([^"{}]+)"/g,(v,C,z)=>/^[\w.[\]]+$/.test(z.trim())?`:${C}={\`Fez(\${UID}).fezGlobals.delete(\${fez.fezGlobals.set(${z})})\`}`:v),e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/>\s+</g,"><").trim(),e=e.replace(/<([a-z][a-z0-9]*-[a-z0-9-]*)([^>]*?)\s*\/>/gi,"<$1$2></$1>"),e=e.replace(/<slot\s*\/>/gi,"<slot></slot>");let s="",i=0,o=[],c=[],u=[],d=[],p=[],y=0;for(;i<e.length;){if(e[i]==="`"){for(s+="\\`",i++;i<e.length&&e[i]!=="`";)if(e[i]==="\\")s+="\\\\",i++,i<e.length&&(e[i]==="`"?s+="\\`":e[i]==="$"?s+="\\$":s+=e[i],i++);else if(e[i]==="$"&&e[i+1]==="{"){s+="\\${",i+=2;let v=1;for(;i<e.length&&v>0;)e[i]==="{"?v++:e[i]==="}"&&v--,v>0||e[i]!=="}"?e[i]==="`"?s+="\\`":e[i]==="\\"?s+="\\\\":s+=e[i]:s+="}",i++}else e[i]==="$"?s+="\\$":s+=e[i],i++;i<e.length&&(s+="\\`",i++);continue}if(e[i]==="\\"&&e[i+1]==="{"){s+="{",i+=2;continue}if(e[i]==="{"){let{expression:v,endIndex:C}=be(e,i),z=v.trim();if(/^(\w+|"\w+"|'\w+')\s*:/.test(z)){s+="{"+v+"}",i=C+1;continue}if(z.startsWith("#if ")){let b=z.slice(4);s+="${("+b+") ? `",o.push(!1)}else if(z.startsWith("#unless ")){let b=z.slice(8);s+="${!("+b+") ? `",o.push(!1)}else if(z===":else")if(d.length>0&&!o.length){let b=d[d.length-1];b.hasElse=!0,s+='`).join("") : `'}else s+="` : `",o[o.length-1]=!0;else if(z.startsWith(":else if ")){let b=z.slice(9);s+="` : ("+b+") ? `"}else if(z==="/if"||z==="/unless"){let b=o.pop();s+=b?"`}":"` : ``}"}else if(z.startsWith("#each ")||z.startsWith("#for ")){let b=z.startsWith("#each "),L,_;if(b){let N=z.slice(6),D=N.indexOf(" as ");L=N.slice(0,D).trim(),_=N.slice(D+4).trim()}else{let N=z.slice(5),D=N.indexOf(" in ");_=N.slice(0,D).trim(),L=N.slice(D+4).trim()}let k=pe(L,_),K=he(_);c.push(ue(_)),u.push(de(_)),d.push({collectionExpr:k,hasElse:!1}),s+="${((_arr) => _arr.length ? _arr.map(("+K+") => `"}else if(z==="/each"||z==="/for"){c.pop(),u.pop();let b=d.pop();b.hasElse?s+="`)("+b.collectionExpr+")}":s+='`).join("") : "")('+b.collectionExpr+")}"}else if(z.startsWith("#await ")){let b=z.slice(7).trim(),L=y++;p.push({awaitId:L,promiseExpr:b,hasThen:!1,hasCatch:!1,thenVar:"_value",catchVar:"_error"}),s+='${((_aw) => _aw.status === "pending" ? `'}else if(z.startsWith(":then")){let b=p[p.length-1];b&&(b.hasThen=!0,b.thenVar=z.slice(5).trim()||"_value",s+='` : _aw.status === "resolved" ? (('+b.thenVar+") => `")}else if(z.startsWith(":catch")){let b=p[p.length-1];b&&(b.hasCatch=!0,b.catchVar=z.slice(6).trim()||"_error",b.hasThen?s+='`)(_aw.value) : _aw.status === "rejected" ? (('+b.catchVar+") => `":s+='` : _aw.status === "rejected" ? (('+b.catchVar+") => `")}else if(z==="/await"){let b=p.pop();b&&(b.hasThen&&b.hasCatch?s+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":b.hasThen?s+="`)(_aw.value) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":b.hasCatch?s+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}":s+="` : ``)(Fez.fezAwait(fez, "+b.awaitId+", "+b.promiseExpr+"))}")}else if(z.startsWith("@html ")){let b=z.slice(6);s+="${"+b+"}"}else if(z.startsWith("@json ")){let b=z.slice(6);s+='${`<pre class="json">${Fez.htmlEscape(JSON.stringify('+b+", null, 2))}</pre>`}"}else if(me(z))if(ye(e,i)){let L=c.flat(),_=u.flat(),k=ge(z,L,_);k=k.replace(/"/g,"&quot;"),s+='"'+k+'"'}else s+="${"+z+"}";else Q(e,i)?s+='"${Fez.htmlEscape('+z+')}"':s+="${Fez.htmlEscape("+z+")}";i=C+1;continue}e[i]==="$"&&e[i+1]==="{"?s+="\\$":e[i]==="\\"?s+="\\\\":s+=e[i],i++}let S=`
      const fez = this;
      with (this) {
        return \`${s}\`
      }
    `,q=new Function(S);return v=>{try{return q.bind(v)()}catch(C){return console.error(`FEZ svelte template runtime error in <${v.fezName||t}>:`,C.message),console.error("Template source:",s.substring(0,500)),""}}}catch(n){return console.error(`FEZ svelte template compile error in <${t}>:`,n.message),console.error("Template:",e.substring(0,200)),()=>""}}var te=new Map;function P(e,r={}){if(te.has(e))return te.get(e);Ye(e)&&(e=Qe(e,r.name));let t=ee(e,r);return te.set(e,t),t}function Ye(e){return e.includes("{{")&&e.includes("}}")||e.includes("[[")&&e.includes("]]")}function Qe(e,r){return e=e.replaceAll("[[","{{").replaceAll("]]","}}"),e=e.replace(/\{\{block\s+(\w+)\s*\}\}/g,"{@block $1}"),e=e.replace(/\{\{\/block\}\}/g,"{/block}"),e=e.replace(/\{\{block:([\w\-]+)\s*\}\}/g,"{@block:$1}"),e=e.replace(/\{\{#?if\s+(.*?)\}\}/g,"{#if $1}"),e=e.replace(/\{\{\/if\}\}/g,"{/if}"),e=e.replace(/\{\{#?unless\s+(.*?)\}\}/g,"{#unless $1}"),e=e.replace(/\{\{\/unless\}\}/g,"{/unless}"),e=e.replace(/\{\{:?else\}\}/g,"{:else}"),e=e.replace(/\{\{#?for\s+(.*?)\}\}/g,"{#for $1}"),e=e.replace(/\{\{\/for\}\}/g,"{/for}"),e=e.replace(/\{\{#?each\s+(.*?)\}\}/g,"{#each $1}"),e=e.replace(/\{\{\/each\}\}/g,"{/each}"),e=e.replace(/\{\{#?(?:raw|html)\s+(.*?)\}\}/g,"{@html $1}"),e=e.replace(/\{\{json\s+(.*?)\}\}/g,"{@json $1}"),e=e.replace(/\{\{\s*(.*?)\s*\}\}/g,"{$1}"),r&&console.warn(`Fez component "${r}" uses old {{ ... }} notation, converting.`),e}var U=new Map,M={};function ze(e,r,t){let n=null,s=null,i;typeof r=="function"?(i=e,t=r):(i=r,typeof e=="string"?n=e:s=e),U.has(i)||U.set(i,new Set);let o=U.get(i);for(let u of o)u.callback===t&&u.selector===n&&u.node===s&&o.delete(u);let c={selector:n,node:s,callback:t};return o.add(c),()=>o.delete(c)}function ve(e,...r){let t=U.get(e);if(t)for(let n of t){let s=null;if(n.selector){if(s=document.querySelector(n.selector),!s)continue}else if(n.node){if(!n.node.isConnected){t.delete(n);continue}s=n.node}try{n.callback.call(s,...r)}catch(i){console.error(`Fez pubsub error on "${e}":`,i)}}M[e]&&M[e].forEach(([n,s])=>{n.isConnected&&s.bind(n)(...r)})}function we(e,r,t){return M[r]||=[],M[r]=M[r].filter(([n])=>n.isConnected),M[r].push([e,t]),()=>{M[r]=M[r].filter(([n,s])=>!(n===e&&s===t))}}function Ee(e,r,...t){let n=i=>{if(M[r]){let o=M[r].find(([c])=>c===i);if(o)return o[1].bind(i)(...t),!0}return!1};if(n(e))return!0;let s=e.root?.parentElement;for(;s;){if(s.fez&&n(s.fez))return!0;s=s.parentElement}return!1}var R=class{static nodeName="div";static getProps(r,t){let n={};if(r.props)return r.props;for(let s of r.attributes)n[s.name]=s.value;for(let[s,i]of Object.entries(n))if([":"].includes(s[0])){delete n[s];try{let o=new Function(`return (${i})`).bind(t)();n[s.replace(/[\:_]/,"")]=o}catch(o){Fez.onError("attr",`<${r.tagName.toLowerCase()}> Error evaluating ${s}="${i}": ${o.message}`)}}if(n["data-props"]){let s=n["data-props"];if(typeof s=="object")return s;s[0]!="{"&&(s=decodeURIComponent(s));try{n=JSON.parse(s)}catch(i){Fez.onError("props",`<${r.tagName.toLowerCase()}> Invalid JSON in data-props: ${i.message}`)}}else if(n["data-json-template"]){let s=t.previousSibling?.textContent;if(s)try{n=JSON.parse(s),t.previousSibling.remove()}catch(i){Fez.onError("props",`<${r.tagName.toLowerCase()}> Invalid JSON in template: ${i.message}`)}}return n}static formData(r){let t=r.closest("form")||r.querySelector("form");if(!t)return Fez.consoleLog("No form found for formData()"),{};let n=new FormData(t),s={};return n.forEach((i,o)=>{s[o]=i}),s}constructor(){}n=Y;fezBlocks={};fezGlobals={_data:new Map,_counter:0,set(r){let t=this._counter++;return this._data.set(t,r),t},delete(r){let t=this._data.get(r);return this._data.delete(r),t}};fezError(r,t,n){let s=this.fezName||this.root?.tagName?.toLowerCase()||"unknown";return Fez.onError(r,`<${s}> ${t}`,n)}get fezHtmlRoot(){return`Fez(${this.UID}).`}get isConnected(){return!!this.root?.isConnected}prop(r){let t=this.oldRoot[r]||this.props[r];return typeof t=="function"&&(t=t.bind(this.root)),t}connect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}onStateChange(){}onGlobalStateChange(){}onPropsChange(){}fezOnDestroy(){this._destroyed||(this._destroyed=!0,this._onDestroyCallbacks&&(this._onDestroyCallbacks.forEach(r=>{try{r()}catch(t){this.fezError("destroy","Error in cleanup callback",t)}}),this._onDestroyCallbacks=[]),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0)}addOnDestroy(r){this._onDestroyCallbacks=this._onDestroyCallbacks||[],this._onDestroyCallbacks.push(r)}fezParseHtml(r){let t=this.fezHtmlRoot.replaceAll('"',"&quot;");return r=r.replace(/([!'"\s;])fez\.(\w)/g,`$1${t}$2`).replace(/>\s+</g,"><"),r.trim()}fezNextTick(r,t){t?(this._nextTicks||={},this._nextTicks[t]||=window.requestAnimationFrame(()=>{r.bind(this)(),this._nextTicks[t]=null},t)):window.requestAnimationFrame(r.bind(this))}fezRefresh(){this.fezNextTick(()=>this.fezRender(),"refresh")}refresh(){this.fezRefresh()}fezRender(r){if(r||=this.fezHtmlFunc||this?.class?.fezHtmlFunc,!r||!this.root)return;this._isRendering=!0,this.beforeRender();let t=typeof this.class.nodeName=="function"?this.class.nodeName(this.root):this.class.nodeName,n=document.createElement(t||"div"),s;if(Array.isArray(r))r[0]instanceof Node?r.forEach(o=>n.appendChild(o)):s=r.join("");else if(typeof r=="string"){let o=this.root?.tagName?.toLowerCase();s=P(r,{name:o})(this)}else typeof r=="function"&&(s=r(this));s&&(s instanceof DocumentFragment||s instanceof Node?n.appendChild(s):(s=s.replace(/\s\w+="undefined"/g,""),n.innerHTML=this.fezParseHtml(s))),this.fezKeepNode(n);let i=new Map;this.root.querySelectorAll("input, textarea, select").forEach(o=>{o._fezThisName&&i.set(o._fezThisName,{value:o.value,checked:o.checked})}),Fez.morphdom(this.root,n),i.forEach((o,c)=>{let u=null;this.root.querySelectorAll("input, textarea, select").forEach(d=>{d._fezThisName===c&&(u=d)}),u&&(u.value=o.value,o.checked!==void 0&&(u.checked=o.checked))}),this.fezRenderPostProcess(),this.afterRender(),this._isRendering=!1}fezRenderPostProcess(){let r=(t,n)=>{this.root.querySelectorAll(`*[${t}]`).forEach(s=>{let i=s.getAttribute(t);s.removeAttribute(t),i&&n.bind(this)(i,s)})};r("fez-this",(t,n)=>{new Function("n",`this.${t} = n`).bind(this)(n),n._fezThisName=t}),r("fez-use",(t,n)=>{if(t.includes("=>"))Fez.getFunction(t)(n);else if(t.includes("."))Fez.getFunction(t).bind(n)();else{let s=this[t];typeof s=="function"?s(n):this.fezError("fez-use",`"${t}" is not a function`)}}),r("fez-class",(t,n)=>{let s=t.split(/\s+/),i=s.pop();s.forEach(o=>n.classList.add(o)),i&&setTimeout(()=>{n.classList.add(i)},1)}),r("fez-bind",(t,n)=>{if(["INPUT","SELECT","TEXTAREA"].includes(n.nodeName)){let s=new Function(`return this.${t}`).bind(this)(),i=n.type.toLowerCase()=="checkbox",o=["SELECT"].includes(n.nodeName)||i?"onchange":"onkeyup";n.setAttribute(o,`${this.fezHtmlRoot}${t} = this.${i?"checked":"value"}`),this.val(n,s),n._fezThisName=t}else this.fezError("fez-bind",`Can't bind "${t}" to ${n.nodeName} (needs INPUT, SELECT or TEXTAREA)`)}),this.root.querySelectorAll("*[disabled]").forEach(t=>{let n=t.getAttribute("disabled");["false"].includes(n)?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})}fezKeepNode(r){r.querySelectorAll("[fez-keep]").forEach(t=>{let n=t.getAttribute("fez-keep"),s=n==="default-slot"||n.startsWith("slot-"),i;if(s){let o=this.root.querySelectorAll(`[fez-keep="${n}"]`);for(let c of o){let u=c.parentElement,d=!1;for(;u&&u!==this.root;){if(u.classList.contains("fez")){d=!0;break}u=u.parentElement}if(!d){i=c;break}}}else i=this.root.querySelector(`[fez-keep="${n}"]`);if(i)t.parentNode.replaceChild(i,t);else if(s)if(t.getAttribute("hide")){this.state=null;let o=t.parentNode;Array.from(this.root.childNodes).forEach(c=>{o.insertBefore(c,t)}),t.remove()}else Array.from(this.root.childNodes).forEach(c=>{t.appendChild(c)})})}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.fezReactiveStore(),this.globalState=Fez.state.createProxy(this),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(t=>t!=="constructor"&&typeof this[t]=="function").forEach(t=>this[t]=this[t].bind(this))}fezReactiveStore(r,t){r||={},t||=(s,i,o,c)=>{o!=c&&(this.onStateChange(i,o,c),!this._isRendering&&!this._isInitializing&&this.fezNextTick(this.fezRender,"fezRender"))},t.bind(this);function n(s,i){return typeof s!="object"||s===null?s:new Proxy(s,{set(o,c,u,d){let p=Reflect.get(o,c,d);if(p!==u){typeof u=="object"&&u!==null&&(u=n(u,i));let y=Reflect.set(o,c,u,d);return i(o,c,u,p),y}return!0},get(o,c,u){let d=Reflect.get(o,c,u);return typeof d=="object"&&d!==null?n(d,i):d}})}return n(r,t)}find(r){return typeof r=="string"?this.root.querySelector(r):r}val(r,t){let n=this.find(r);if(n)if(["INPUT","TEXTAREA","SELECT"].includes(n.nodeName))if(typeof t<"u")n.type=="checkbox"?n.checked=!!t:n.value=t;else return n.value;else if(typeof t<"u")n.innerHTML=t;else return n.innerHTML}formData(r){return this.class.formData(r||this.root)}attr(r,t){return typeof t>"u"?this.root.getAttribute(r):(this.root.setAttribute(r,t),t)}childNodes(r){let t=this._fezChildNodes||Array.from(this.root.children);return r===!0?t=t.map(n=>{let s={html:n.innerHTML,ROOT:n};for(let i of n.attributes)s[i.name]=i.value;return s}):r&&(t=t.map(r)),t}setStyle(r,t){r&&typeof r=="object"?Object.entries(r).forEach(([n,s])=>{this.root.style.setProperty(n,s)}):this.root.style.setProperty(r,t)}copy(){for(let r of Array.from(arguments)){let t=this.props[r];if(t!==void 0){if(r=="class"){let n=this.root.getAttribute(r,t);n&&(t=[n,t].join(" "))}typeof t=="string"?this.root.setAttribute(r,t):this.root[r]=t}}}rootId(){return this.root.id||=`fez_${this.UID}`,this.root.id}dissolve(r){r&&(r.classList.add("fez"),r.classList.add(`fez-${this.fezName}`),r.fez=this,this.attr("id")&&r.setAttribute("id",this.attr("id")),this.root.innerHTML="",this.root.appendChild(r));let t=this.root,n=this.childNodes(),s=this.root.parentNode;return n.reverse().forEach(i=>s.insertBefore(i,t.nextSibling)),this.root.remove(),this.root=void 0,r&&(this.root=r),n}on(r,t,n=200){this._eventHandlers=this._eventHandlers||{},this._eventHandlers[r]&&window.removeEventListener(r,this._eventHandlers[r]);let s=Fez.throttle(()=>{this.isConnected&&t.call(this)},n);this._eventHandlers[r]=s,window.addEventListener(r,s),this.addOnDestroy(()=>{window.removeEventListener(r,s),delete this._eventHandlers[r]})}onWindowResize(r,t){this.on("resize",r,t),r()}onWindowScroll(r,t){this.on("scroll",r,t),r()}onElementResize(r,t,n=200){let s=Fez.throttle(()=>{this.isConnected&&t.call(this,r.getBoundingClientRect(),r)},n),i=new ResizeObserver(s);i.observe(r),t.call(this,r.getBoundingClientRect(),r),this.addOnDestroy(()=>{i.disconnect()})}setTimeout(r,t){let n=setTimeout(()=>{this.isConnected&&r()},t);return this.addOnDestroy(()=>clearTimeout(n)),n}setInterval(r,t,n){typeof r=="number"&&([t,r]=[r,t]),n||=Fez.fnv1(String(r)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[n]);let s=setInterval(()=>{this.isConnected&&r()},t);return this._setIntervalCache[n]=s,this.addOnDestroy(()=>{clearInterval(s),delete this._setIntervalCache[n]}),s}publish(r,...t){return Ee(this,r,...t)}subscribe(r,t){let n=we(this,r,t);return this.addOnDestroy(n),n}fezSlot(r,t){t||=document.createElement("template");let n=t.nodeName=="SLOT";for(;r.firstChild;)n?t.parentNode.insertBefore(r.lastChild,t.nextSibling):t.appendChild(r.firstChild);return n?t.parentNode.removeChild(t):r.innerHTML="",t}};var et={data:""},Se=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||et,tt=e=>{let r=Se(e),t=r.data;return r.data="",t},rt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,st=/\/\*[^]*?\*\/|  +/g,Ae=/\n+/g,O=(e,r)=>{let t="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":n+=i[1]=="f"?O(o,i):i+"{"+O(o,i[1]=="k"?"":r)+"}":typeof o=="object"?n+=O(o,r?r.replace(/([^,])+/g,c=>i.replace(/(^:.*)|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=O.p?O.p(i,o):i+":"+o+";")}return t+(r&&s?r+"{"+s+"}":s)+n},F={},$e=e=>{if(typeof e=="object"){let r="";for(let t in e)r+=t+$e(e[t]);return r}return e},nt=(e,r,t,n,s)=>{let i=$e(e),o=F[i]||(F[i]=(u=>{let d=0,p=11;for(;d<u.length;)p=101*p+u.charCodeAt(d++)>>>0;return"go"+p})(i));if(!F[o]){let u=i!==e?e:(d=>{let p,y,S=[{}];for(;p=rt.exec(d.replace(st,""));)p[4]?S.shift():p[3]?(y=p[3].replace(Ae," ").trim(),S.unshift(S[0][y]=S[0][y]||{})):S[0][p[1]]=p[2].replace(Ae," ").trim();return S[0]})(e);F[o]=O(s?{["@keyframes "+o]:u}:u,t?"":"."+o)}let c=t&&F.g?F.g:null;return t&&(F.g=F[o]),((u,d,p,y)=>{y?d.data=d.data.replace(y,u):d.data.indexOf(u)===-1&&(d.data=p?u+d.data:d.data+u)})(F[o],r,n,c),o},it=(e,r,t)=>e.reduce((n,s,i)=>{let o=r[i];if(o&&o.call){let c=o(t),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=u?"."+u:c&&typeof c=="object"?c.props?"":O(c,""):c===!1?"":c}return n+s+(o??"")},"");function Z(e){let r=this||{},t=e.call?e(r.p):e;return nt(t.unshift?t.raw?it(t,[].slice.call(arguments,1),r.p):t.reduce((n,s)=>Object.assign(n,s&&s.call?s(r.p):s),{}):t,Se(r.target),r.g,r.o,r.k)}var Te,re,se,ot=Z.bind({g:1}),lt=Z.bind({k:1});function at(e,r,t,n){O.p=r,Te=e,re=t,se=n}function ct(e,r){let t=this||{};return function(){let n=arguments;function s(i,o){let c=Object.assign({},i),u=c.className||s.className;t.p=Object.assign({theme:re&&re()},c),t.o=/ *go\d+/.test(u),c.className=Z.apply(t,n)+(u?" "+u:""),r&&(c.ref=o);let d=e;return e[0]&&(d=c.as||e,delete c.as),se&&d[0]&&se(c),Te(d,c)}return r?r(s):s}}var Ce={css:Z,extractCss:tt,glob:ot,keyframes:lt,setup:at,styled:ct};var Le=function(){"use strict";let e=new Set,r={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:v,afterNodeAdded:v,beforeNodeMorphed:v,afterNodeMorphed:v,beforeNodeRemoved:v,afterNodeRemoved:v,beforeAttributeUpdated:v},head:{style:"merge",shouldPreserve:function(a){return a.getAttribute("im-preserve")==="true"},shouldReAppend:function(a){return a.getAttribute("im-re-append")==="true"},shouldRemove:v,afterHeadMorphed:v}};function t(a,l,f={}){a instanceof Document&&(a=a.documentElement),typeof l=="string"&&(l=N(l));let h=D(l),m=z(a,h,f);return n(a,h,m)}function n(a,l,f){if(f.head.block){let h=a.querySelector("head"),m=l.querySelector("head");if(h&&m){let g=S(m,h,f);Promise.all(g).then(function(){n(a,l,Object.assign(f,{head:{block:!1,ignore:!0}}))});return}}if(f.morphStyle==="innerHTML")return o(l,a,f),a.children;if(f.morphStyle==="outerHTML"||f.morphStyle==null){let h=qe(l,a,f),m=h?.previousSibling,g=h?.nextSibling,w=i(a,h,f);return h?Be(m,w,g):[]}else throw"Do not understand how to morph style "+f.morphStyle}function s(a,l){return l.ignoreActiveValue&&a===document.activeElement&&a!==document.body}function i(a,l,f){if(!(f.ignoreActive&&a===document.activeElement))return l==null?f.callbacks.beforeNodeRemoved(a)===!1?a:(a.remove(),f.callbacks.afterNodeRemoved(a),null):L(a,l)?(f.callbacks.beforeNodeMorphed(a,l)===!1||(a instanceof HTMLHeadElement&&f.head.ignore||(a instanceof HTMLHeadElement&&f.head.style!=="morph"?S(l,a,f):(u(l,a,f),s(a,f)||o(l,a,f))),f.callbacks.afterNodeMorphed(a,l)),a):f.callbacks.beforeNodeRemoved(a)===!1||f.callbacks.beforeNodeAdded(l)===!1?a:(a.parentElement.replaceChild(l,a),f.callbacks.afterNodeAdded(l),f.callbacks.afterNodeRemoved(a),l)}function o(a,l,f){let h=a.firstChild,m=l.firstChild,g;for(;h;){if(g=h,h=g.nextSibling,m==null){if(f.callbacks.beforeNodeAdded(g)===!1)return;l.appendChild(g),f.callbacks.afterNodeAdded(g),j(f,g);continue}if(b(g,m,f)){i(m,g,f),m=m.nextSibling,j(f,g);continue}let w=k(a,l,g,m,f);if(w){m=_(m,w,f),i(w,g,f),j(f,g);continue}let A=K(a,l,g,m,f);if(A){m=_(m,A,f),i(A,g,f),j(f,g);continue}if(f.callbacks.beforeNodeAdded(g)===!1)return;l.insertBefore(g,m),f.callbacks.afterNodeAdded(g),j(f,g)}for(;m!==null;){let w=m;m=m.nextSibling,ae(w,f)}}function c(a,l,f,h){return a==="value"&&h.ignoreActiveValue&&l===document.activeElement?!0:h.callbacks.beforeAttributeUpdated(a,l,f)===!1}function u(a,l,f){let h=a.nodeType;if(h===1){let m=a.attributes,g=l.attributes;for(let w of m)if(!c(w.name,l,"update",f))try{l.getAttribute(w.name)!==w.value&&(w.name==="class"?d(a,l):l.setAttribute(w.name,w.value))}catch(A){console.error("Error setting attribute:",{badNode:l,badAttribute:w,error:A.message})}for(let w=g.length-1;0<=w;w--){let A=g[w];c(A.name,l,"remove",f)||a.hasAttribute(A.name)||l.removeAttribute(A.name)}}(h===8||h===3)&&l.nodeValue!==a.nodeValue&&(l.nodeValue=a.nodeValue),s(l,f)||y(a,l,f)}function d(a,l){let f=new Set(a.className.split(/\s+/).filter(Boolean)),h=new Set(l.className.split(/\s+/).filter(Boolean));for(let m of h)f.has(m)||l.classList.remove(m);for(let m of f)h.has(m)||l.classList.add(m)}function p(a,l,f,h){if(a[f]!==l[f]){let m=c(f,l,"update",h);m||(l[f]=a[f]),a[f]?m||l.setAttribute(f,a[f]):c(f,l,"remove",h)||l.removeAttribute(f)}}function y(a,l,f){if(a instanceof HTMLInputElement&&l instanceof HTMLInputElement&&a.type!=="file"){let h=a.value,m=l.value;p(a,l,"checked",f),p(a,l,"disabled",f),a.hasAttribute("value")?h!==m&&(c("value",l,"update",f)||(l.setAttribute("value",h),l.value=h)):c("value",l,"remove",f)||(l.value="",l.removeAttribute("value"))}else if(a instanceof HTMLOptionElement)p(a,l,"selected",f);else if(a instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement){let h=a.value,m=l.value;if(c("value",l,"update",f))return;h!==m&&(l.value=h),l.firstChild&&l.firstChild.nodeValue!==h&&(l.firstChild.nodeValue=h)}}function S(a,l,f){let h=[],m=[],g=[],w=[],A=f.head.style,x=new Map;for(let T of a.children)x.set(T.outerHTML,T);for(let T of l.children){let I=x.has(T.outerHTML),V=f.head.shouldReAppend(T),J=f.head.shouldPreserve(T);I||J?V?m.push(T):(x.delete(T.outerHTML),g.push(T)):A==="append"?V&&(m.push(T),w.push(T)):f.head.shouldRemove(T)!==!1&&m.push(T)}w.push(...x.values());let fe=[];for(let T of w){let I=document.createRange().createContextualFragment(T.outerHTML).firstChild;if(f.callbacks.beforeNodeAdded(I)!==!1){if(I.href||I.src){let V=null,J=new Promise(function(Ze){V=Ze});I.addEventListener("load",function(){V()}),fe.push(J)}l.appendChild(I),f.callbacks.afterNodeAdded(I),h.push(I)}}for(let T of m)f.callbacks.beforeNodeRemoved(T)!==!1&&(l.removeChild(T),f.callbacks.afterNodeRemoved(T));return f.head.afterHeadMorphed(l,{added:h,kept:g,removed:m}),fe}function q(){}function v(){}function C(a){let l={};return Object.assign(l,r),Object.assign(l,a),l.callbacks={},Object.assign(l.callbacks,r.callbacks),Object.assign(l.callbacks,a.callbacks),l.head={},Object.assign(l.head,r.head),Object.assign(l.head,a.head),l}function z(a,l,f){return f=C(f),{target:a,newContent:l,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Ue(a,l),deadIds:new Set,callbacks:f.callbacks,head:f.head}}function b(a,l,f){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName?a.id!==""&&a.id===l.id?!0:G(f,a,l)>0:!1}function L(a,l){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName}function _(a,l,f){for(;a!==l;){let h=a;a=a.nextSibling,ae(h,f)}return j(f,l),l.nextSibling}function k(a,l,f,h,m){let g=G(m,f,l),w=null;if(g>0){let A=h,x=0;for(;A!=null;){if(b(f,A,m))return A;if(x+=G(m,A,a),x>g)return null;A=A.nextSibling}}return w}function K(a,l,f,h,m){let g=h,w=f.nextSibling,A=0;for(;g!=null;){if(G(m,g,a)>0)return null;if(L(f,g))return g;if(L(w,g)&&(A++,w=w.nextSibling,A>=2))return null;g=g.nextSibling}return g}function N(a){let l=new DOMParser,f=a.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(f.match(/<\/html>/)||f.match(/<\/head>/)||f.match(/<\/body>/)){let h=l.parseFromString(a,"text/html");if(f.match(/<\/html>/))return h.generatedByIdiomorph=!0,h;{let m=h.firstChild;return m?(m.generatedByIdiomorph=!0,m):null}}else{let m=l.parseFromString("<body><template>"+a+"</template></body>","text/html").body.querySelector("template").content;return m.generatedByIdiomorph=!0,m}}function D(a){if(a==null)return document.createElement("div");if(a.generatedByIdiomorph)return a;if(a instanceof Node){let l=document.createElement("div");return l.append(a),l}else{let l=document.createElement("div");for(let f of[...a])l.append(f);return l}}function Be(a,l,f){let h=[],m=[];for(;a!=null;)h.push(a),a=a.previousSibling;for(;h.length>0;){let g=h.pop();m.push(g),l.parentElement.insertBefore(g,l)}for(m.push(l);f!=null;)h.push(f),m.push(f),f=f.nextSibling;for(;h.length>0;)l.parentElement.insertBefore(h.pop(),l.nextSibling);return m}function qe(a,l,f){let h;h=a.firstChild;let m=h,g=0;for(;h;){let w=Ge(h,l,f);w>g&&(m=h,g=w),h=h.nextSibling}return m}function Ge(a,l,f){return L(a,l)?.5+G(f,a,l):0}function ae(a,l){j(l,a),l.callbacks.beforeNodeRemoved(a)!==!1&&(a.remove(),l.callbacks.afterNodeRemoved(a))}function Ve(a,l){return!a.deadIds.has(l)}function We(a,l,f){return(a.idMap.get(f)||e).has(l)}function j(a,l){let f=a.idMap.get(l)||e;for(let h of f)a.deadIds.add(h)}function G(a,l,f){let h=a.idMap.get(l)||e,m=0;for(let g of h)Ve(a,g)&&We(a,g,f)&&++m;return m}function ce(a,l){let f=a.parentElement,h=a.querySelectorAll("[id]");for(let m of h){let g=m;for(;g!==f&&g!=null;){let w=l.get(g);w==null&&(w=new Set,l.set(g,w)),w.add(m.id),g=g.parentElement}}}function Ue(a,l){let f=new Map;return ce(a,f),ce(l,f),f}return{morph:t,defaults:r}}();var ft=e=>{let r=e.split(/(<\/?[^>]+>)/g).map(s=>s.trim()).filter(s=>s),t=0,n=[];for(let s=0;s<r.length;s++){let i=r[s],o=r[s+1],c=r[s+2];if(i.startsWith("<"))if(!i.startsWith("</")&&!i.endsWith("/>")&&o&&!o.startsWith("<")&&c&&c.startsWith("</")){let u=Math.max(0,t);n.push("  ".repeat(u)+i+o+c),s+=2}else if(i.startsWith("</")){t--;let u=Math.max(0,t);n.push("  ".repeat(u)+i)}else if(i.endsWith("/>")||i.includes(" />")){let u=Math.max(0,t);n.push("  ".repeat(u)+i)}else{let u=Math.max(0,t);n.push("  ".repeat(u)+i),t++}else if(i){let u=Math.max(0,t);n.push("  ".repeat(u)+i)}}return n.join(`
`)},ne=(()=>{let e=[],r=[],t=0,n=null;document.addEventListener("keydown",o=>{if(o.key==="Escape"){o.preventDefault();let c=document.getElementById("dump-dialog"),u=document.getElementById("log-reopen-button");c?(c.remove(),s()):u&&(u.remove(),i())}else(o.key==="ArrowLeft"||o.key==="ArrowRight"||o.key==="ArrowUp"||o.key==="ArrowDown")&&document.getElementById("dump-dialog")&&e.length>0&&(o.preventDefault(),o.key==="ArrowLeft"&&t>0?(t--,localStorage.setItem("_LOG_INDEX",t),n()):o.key==="ArrowRight"&&t<e.length-1?(t++,localStorage.setItem("_LOG_INDEX",t),n()):o.key==="ArrowUp"&&t>0?(t=Math.max(0,t-5),localStorage.setItem("_LOG_INDEX",t),n()):o.key==="ArrowDown"&&t<e.length-1&&(t=Math.min(e.length-1,t+5),localStorage.setItem("_LOG_INDEX",t),n()))});let s=()=>{let o=document.getElementById("log-reopen-button");o||(o=document.body.appendChild(document.createElement("button")),o.id="log-reopen-button",o.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>LOG',o.style.cssText="position:fixed; top: 10px; right: 10px;padding:10px 20px;background:#ff3333;color:#fff;border:none;cursor:pointer;font:14px/1.4 monospace;z-index:2147483647;border-radius:8px;display:flex;align-items:center;opacity:1;visibility:visible;box-shadow:0 4px 12px rgba(255,51,51,0.3)",o.onclick=()=>{o.remove(),i()})},i=()=>{let o=document.getElementById("dump-dialog");o||(o=document.body.appendChild(document.createElement("div")),o.id="dump-dialog",o.style.cssText="position:fixed; top:20px; left:20px; right:20px; max-height:calc(100vh - 40px);background:#fff; border:1px solid #333; box-shadow:0 0 10px rgba(0,0,0,0.5);padding:20px; overflow:auto; z-index:2147483646; font:13px/1.4 monospace;white-space:pre; display:block; opacity:1; visibility:visible");let c=parseInt(localStorage.getItem("_LOG_INDEX"));!isNaN(c)&&c>=0&&c<e.length?t=c:t=e.length-1,n=()=>{let u=e.map((d,p)=>{let y="#f0f0f0";return p!==t&&(r[p]==="object"?y="#d6e3ef":r[p]==="array"&&(y="#d8d5ef")),`<button style="font-size: 14px; font-weight: 400; padding:2px 6px; margin: 0 2px 2px 0;cursor:pointer;background:${p===t?"#333":y};color:${p===t?"#fff":"#000"}" data-index="${p}">${p+1}</button>`}).join("");o.innerHTML='<div style="display:flex;flex-direction:column;height:100%"><div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div style="display:flex;flex-wrap:wrap;gap:4px;flex:1;margin-right:10px">'+u+'</div><button style="padding:4px 8px;cursor:pointer;flex-shrink:0">&times;</button></div><xmp style="font-family:monospace;flex:1;overflow:auto;margin:0;padding:0;color:#000;background:#fff;font-size:14px;line-height:22px">'+e[t]+"</xmp></div>",o.querySelector('button[style*="flex-shrink:0"]').onclick=()=>{o.remove(),s()},o.querySelectorAll("button[data-index]").forEach(d=>{d.onclick=()=>{t=parseInt(d.dataset.index),localStorage.setItem("_LOG_INDEX",t),n()}})},n()};return o=>{if(!document.body){window.requestAnimationFrame(()=>ne(o));return}let c=typeof o;o instanceof Node&&(o.nodeType===Node.TEXT_NODE?o=o.textContent||String(o):o=ft(o.outerHTML)),o===void 0&&(o="undefined"),o===null&&(o="null"),Array.isArray(o)?c="array":typeof o=="object"&&o!==null&&(c="object"),typeof o!="string"&&(o=JSON.stringify(o,(d,p)=>typeof p=="function"?String(p):p,2).replaceAll("<","&lt;")),o=o.trim(),e.push(o+`

type: ${c}`),r.push(c),!!document.getElementById("dump-dialog")?(t=e.length-1,localStorage.setItem("_LOG_INDEX",t),n&&n()):i()}})();typeof window<"u"&&!window.LOG&&(window.LOG=ne);var _e=ne;var Ie=()=>{let e=parseInt(window.location.port)||80;if(!(Fez.DEV===!0||e>2999&&Fez.DEV!==!1))return;let r=document.querySelectorAll(".fez-highlight-overlay");if(r.length>0){r.forEach(n=>n.remove());return}document.querySelectorAll(".fez, .svelte").forEach(n=>{let s=null,i=null;if(n.classList.contains("fez")&&n.fez&&n.fez.fezName?(s=n.fez.fezName,i="fez"):n.classList.contains("svelte")&&n.svelte&&n.svelte.svelteName&&(s=n.svelte.svelteName,i="svelte"),s){let o=document.createElement("div");o.className="fez-highlight-overlay";let c=n.getBoundingClientRect(),u=window.pageYOffset||document.documentElement.scrollTop,d=window.pageXOffset||document.documentElement.scrollLeft;o.style.cssText=`
        position: absolute;
        top: ${c.top+u}px;
        left: ${c.left+d}px;
        width: ${c.width}px;
        height: ${c.height}px;
        border: 1px solid ${i==="svelte"?"blue":"red"};
        pointer-events: none;
        z-index: 9999;
      `;let p=document.createElement("div");p.textContent=s,p.style.cssText=`
        position: absolute;
        top: -20px;
        left: 0;
        background: ${i==="svelte"?"blue":"red"};
        color: white;
        padding: 4px 6px 2px 6px;
        font-size: 14px;
        font-family: monospace;
        line-height: 1;
        white-space: nowrap;
        cursor: pointer;
        pointer-events: auto;
        text-transform: uppercase;
      `,p.addEventListener("click",y=>{y.stopPropagation(),Fez.log(n)}),o.appendChild(p),document.body.appendChild(o)}})};document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="e"&&(e.target.closest("form")||(e.preventDefault(),Ie()))});var Me=Ie;var ut=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),dt=new MutationObserver(e=>{for(let r of e)if(r.type==="attributes"){let t=r.target.fez;if(t){let n=r.attributeName,s=r.target.getAttribute(n);t.props[n]=s,t.onPropsChange(n,s)}}});function ie(e,r){let t=globalThis.window?.Fez||globalThis.Fez;if(!e.includes("-")){console.error(`Fez: Invalid name "${e}". Must contain a dash.`);return}if(r=pt(t,e,r),r.html){let n=r.SLOT||"div";r.html=r.html.replace(/<slot(\s[^>]*)?>/,`<${n} class="fez-slot fez-slot-${e}" fez-keep="slot-${e}"$1>`).replace("</slot>",`</${n}>`),r.fezHtmlFunc=P(r.html,{name:e})}r.css&&(r.css=t.globalCss(r.css,{name:e})),t.classes[e]=r,customElements.get(e)||customElements.define(e,class extends HTMLElement{connectedCallback(){ht(this,r)?Fe(e,this):requestAnimationFrame(()=>Fe(e,this))}})}function pt(e,r,t){if(t.prototype instanceof R)return t.html&&(t.html=Ne(t.html)),t;let n=new t,s=class extends R{},i=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertyNames(t.prototype)].filter(c=>c!=="constructor"&&c!=="prototype");for(let c of i)s.prototype[c]=n[c];let o={FAST:"FAST",GLOBAL:"GLOBAL",CSS:"css",NAME:"nodeName"};for(let[c,u]of Object.entries(o))n[c]&&(s[u]=n[c]);return n.HTML&&(s.html=Ne(n.HTML)),n.GLOBAL&&e.onReady(()=>document.body.appendChild(document.createElement(r))),e.consoleLog(`${r} compiled`),s}function Ne(e){return e.replace(/<([a-z-]+)\b([^>]*)\/>/g,(r,t,n)=>ut.has(t)?r:`<${t}${n}></${t}>`)}function ht(e,r){let t=e.getAttribute("fez-fast");if(t==="false")return!1;let n=typeof r.FAST=="function"?r.FAST(e):r.FAST;return!!(t||n||e.childNodes[0]||e.nextSibling)}function Fe(e,r){if(!r.isConnected||r.classList?.contains("fez"))return;let t=Fez.classes[e],n=typeof t.nodeName=="function"?t.nodeName(r):t.nodeName,s=document.createElement(n||"div");if(s.classList.add("fez",`fez-${e}`),!r.parentNode){console.warn(`Fez: ${e} has no parent, skipping`);return}r.parentNode.replaceChild(s,r);let i=new t;if(i.UID=++Fez.instanceCount,Fez.instances.set(i.UID,i),i.oldRoot=r,i.fezName=e,i.root=s,i.props=t.getProps(r,s),i.class=t,i.fezSlot(r,s),s.fez=i,t.GLOBAL&&t.GLOBAL!==!0&&(window[t.GLOBAL]||=i),window.$&&(i.$root=$(s)),i.props.id&&s.setAttribute("id",i.props.id),i.fezRegister(),i.root.children.length&&(i._fezChildNodes=Array.from(i.root.children)),i._isInitializing=!0,(i.onInit||i.init||i.created||i.connect).call(i,i.props),i.fezRender(),i.onMount(i.props),i._isInitializing=!1,i.onSubmit){let c=i.root.nodeName==="FORM"?i.root:i.find("form");c&&(c.onsubmit=u=>{u.preventDefault(),i.onSubmit(i.formData())})}if(i.onPropsChange){dt.observe(s,{attributes:!0});for(let[c,u]of Object.entries(i.props))i.onPropsChange(c,u)}}function H(e,r){if(arguments.length===1)return oe(e);if(r?.includes("</xmp>"))return oe(r);if(e&&!e.includes("-")&&!e.includes(".")&&!e.includes("/")){console.error(`Fez: Invalid name "${e}". Must contain a dash (e.g., 'my-element').`);return}let t=yt(e,gt(r));vt(e),zt(e,t)}function oe(e){if(e instanceof Node){let t=e;t.remove();let n=t.getAttribute("fez");if(n?.includes(".")||n?.includes("/"))return mt(n);if(n&&!n.includes("-")){console.error(`Fez: Invalid name "${n}". Must contain a dash.`);return}return H(n,t.innerHTML)}(e?Fez.domRoot(e):document.body).querySelectorAll("template[fez], xmp[fez]").forEach(t=>oe(t))}function mt(e){Fez.consoleLog(`Loading from ${e}`),Fez.fetch(e).then(r=>{let n=new DOMParser().parseFromString(r,"text/html").querySelectorAll("template[fez], xmp[fez]");if(n.length>0)n.forEach(s=>{let i=s.getAttribute("fez");if(i&&!i.includes("-")&&!i.includes(".")&&!i.includes("/")){console.error(`Fez: Invalid name "${i}". Must contain a dash.`);return}H(i,s.innerHTML)});else{let s=e.split("/").pop().split(".")[0];H(s,r)}}).catch(r=>{Fez.onError("compile",`Load error for "${e}": ${r.message}`)})}function gt(e){let r={script:"",style:"",html:"",head:""},t=e.split(`
`),n=[],s="";for(let i of t)i=i.trim(),i.startsWith("<script")&&!r.script&&s!=="head"?s="script":i.startsWith("<head")&&!r.script?s="head":i.startsWith("<style")?s="style":i.endsWith("<\/script>")&&s==="script"&&!r.script?(r.script=n.join(`
`),n=[],s=""):i.endsWith("</style>")&&s==="style"?(r.style=n.join(`
`),n=[],s=""):(i.endsWith("</head>")||i.endsWith("</header>"))&&s==="head"?(r.head=n.join(`
`),n=[],s=""):s?n.push(i):r.html+=i+`
`;return r.head&&bt(r.head),r}function bt(e){let r=Fez.domRoot(e);Array.from(r.children).forEach(t=>{if(t.tagName==="SCRIPT"){let n=document.createElement("script");Array.from(t.attributes).forEach(s=>{n.setAttribute(s.name,s.value)}),n.type||="text/javascript",t.src?document.head.appendChild(n):(n.type.includes("javascript")||n.type==="module")&&(n.textContent=t.textContent,document.head.appendChild(n))}else document.head.appendChild(t.cloneNode(!0))})}function yt(e,r){let t=r.script;if(/class\s+\{/.test(t)||(t=`class {
${t}
}`),String(r.style).includes(":")){let i=Fez.cssMixin(r.style);i=i.includes(":fez")||/(?:^|\s)body\s*\{/.test(i)?i:`:fez {
${i}
}`,t=t.replace(/\}\s*$/,`
  CSS = \`${i}\`
}`)}if(/\w/.test(String(r.html))){let i=r.html.replaceAll("`","&#x60;").replaceAll("$","\\$");t=t.replace(/\}\s*$/,`
  HTML = \`${i}\`
}`)}let[n,s]=t.split(/class\s+\{/,2);return`${n};

window.Fez('${e}', class {
${s})`}function zt(e,r){if(r.includes("import "))Fez.head({script:r}),setTimeout(()=>{Fez.classes[e]||Fez.consoleError(`Template "${e}" possible compile error.`)},2e3);else try{new Function(r)()}catch(t){Fez.consoleError(`Template "${e}" compile error: ${t.message}`),console.log(r)}}function vt(e){if(!e)return;let r=document.getElementById("fez-hidden-styles");r||(r=document.createElement("style"),r.id="fez-hidden-styles",document.head.appendChild(r));let t=[...Object.keys(Fez.classes),e].sort().join(", ");r.textContent=`${t} { display: none; }
`}var wt={data:{},listeners:new Map,subscribers:new Map,globalSubscribers:new Set,notify(e,r,t){Fez.consoleLog(`Global state change for ${e}: ${r} (from ${t})`);let n=this.listeners.get(e);n&&n.forEach(i=>{if(i.isConnected)try{i.onGlobalStateChange(e,r,t),i.fezRender()}catch(o){console.error(`Error in component listener for key ${e}:`,o)}else n.delete(i)});let s=this.subscribers.get(e);s&&s.forEach(i=>{try{i(r,t,e)}catch(o){console.error(`Error in subscriber for key ${e}:`,o)}}),this.globalSubscribers.forEach(i=>{try{i(e,r,t)}catch(o){console.error("Error in global subscriber:",o)}})},createProxy(e){return e.addOnDestroy(()=>{for(let[r,t]of this.listeners)t.delete(e);e._globalStateKeys?.clear()}),new Proxy({},{get:(r,t)=>{if(typeof t!="symbol")return e._globalStateKeys||=new Set,e._globalStateKeys.has(t)||(e._globalStateKeys.add(t),this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)),this.data[t]},set:(r,t,n)=>{if(typeof t=="symbol")return!0;let s=this.data[t];return s!==n&&(this.data[t]=n,this.notify(t,n,s)),!0}})},set(e,r){let t=this.data[e];t!==r&&(this.data[e]=r,this.notify(e,r,t))},get(e){return this.data[e]},forEach(e,r){let t=this.listeners.get(e);t&&t.forEach(n=>{n.isConnected?r(n):t.delete(n)})},subscribe(e,r){if(typeof e=="function")return this.globalSubscribers.add(e),()=>this.globalSubscribers.delete(e);{let t=e;return this.subscribers.has(t)||this.subscribers.set(t,new Set),this.subscribers.get(t).add(r),()=>{let n=this.subscribers.get(t);n&&(n.delete(r),n.size===0&&this.subscribers.delete(t))}}}},Re=wt;var X=()=>globalThis.localStorage||window.localStorage;function Et(e,r){try{X().setItem(e,JSON.stringify(r))}catch(t){console.error(`Fez localStorage: Failed to set "${e}"`,t)}}function At(e,r=null){try{let t=X().getItem(e);return t===null?r:JSON.parse(t)}catch(t){return console.error(`Fez localStorage: Failed to get "${e}"`,t),r}}function St(e){X().removeItem(e)}function $t(){X().clear()}var Oe={set:Et,get:At,remove:St,clear:$t};function le(e,r,t){e._awaitStates||=new Map;let n=e._awaitStates.get(r);if(!t||typeof t.then!="function")return{status:"resolved",value:t,error:null};if(n&&n.promise===t)return n;let s={status:"pending",value:null,error:null,promise:t};return e._awaitStates.set(r,s),t.then(i=>{let o=e._awaitStates.get(r);o&&o.promise===t&&(o.status="resolved",o.value=i,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}).catch(i=>{let o=e._awaitStates.get(r);o&&o.promise===t&&(o.status="rejected",o.error=i,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}),s}var ke=e=>{e.head=(s,i)=>{if(s.nodeName){s.nodeName=="SCRIPT"?(e.head({script:s.innerText}),s.remove()):(s.querySelectorAll("script").forEach(y=>e.head(y)),s.querySelectorAll("template[fez], xmp[fez], script[fez]").forEach(y=>e.compile(y)));return}if(typeof s!="object"||s===null)throw new Error("head requires an object parameter");let o,c={},u;if(s.script){if(s.script.includes("import ")){i&&e.consoleError("Fez.head callback is not supported when script with import is passed (module context).");let y=document.createElement("script");y.type="module",y.textContent=s.script,document.head.appendChild(y),requestAnimationFrame(()=>y.remove())}else try{new Function(s.script)(),i&&i()}catch(y){e.consoleError("Error executing script:",y),console.log(s.script)}return}else if(s.js){o=s.js,u="script";for(let[y,S]of Object.entries(s))y!=="js"&&y!=="module"&&(c[y]=S);s.module&&(c.type="module")}else if(s.css){o=s.css,u="link",c.rel="stylesheet";for(let[y,S]of Object.entries(s))y!=="css"&&(c[y]=S)}else throw new Error('head requires either "script", "js" or "css" property');let d=document.querySelector(`${u}[src="${o}"], ${u}[href="${o}"]`);if(d)return i&&i(),d;let p=document.createElement(u);u==="link"?p.href=o:p.src=o;for(let[y,S]of Object.entries(c))p.setAttribute(y,S);return(i||s.module)&&(p.onload=()=>{s.module&&u==="script"&&import(o).then(y=>{window[s.module]=y.default||y[s.module]||y}).catch(y=>{console.error(`Error importing module ${s.module}:`,y)}),i&&i()}),document.head.appendChild(p),p};let r=5*60*1e3,t=100;e.fetch=function(...s){e._fetchCache||=new Map;let i="GET",o,c;typeof s[0]=="string"&&/^[A-Z]+$/.test(s[0])&&(i=s.shift()),o=s.shift();let u={},d=null;if(typeof s[0]=="object"&&(d=s.shift()),typeof s[0]=="function"&&(c=s.shift()),d){if(i==="GET"){let v=new URLSearchParams(d);o+=(o.includes("?")?"&":"?")+v.toString()}else if(i==="POST"){let v=new FormData;for(let[C,z]of Object.entries(d))v.append(C,z);u.body=v}}u.method=i;let p=`${i}:${o}:${JSON.stringify(u)}`,y=e._fetchCache.get(p);if(y&&Date.now()-y.timestamp<r){if(e.consoleLog(`fetch cache hit: ${i} ${o}`),c){c(y.data);return}return Promise.resolve(y.data)}e.consoleLog(`fetch live: ${i} ${o}`);let S=v=>v.headers.get("content-type")?.includes("application/json")?v.json():v.text(),q=(v,C)=>{if(e._fetchCache.size>=t){let z=e._fetchCache.keys().next().value;e._fetchCache.delete(z)}e._fetchCache.set(v,{data:C,timestamp:Date.now()})};if(c){fetch(o,u).then(S).then(v=>{q(p,v),c(v)}).catch(v=>e.onError("fetch",v));return}return fetch(o,u).then(S).then(v=>(q(p,v),v))},e.clearFetchCache=()=>{e._fetchCache?.clear()},e.darkenColor=(s,i=20)=>{let o=parseInt(s.replace("#",""),16),c=Math.round(2.55*i),u=(o>>16)-c,d=(o>>8&255)-c,p=(o&255)-c;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(d<255?d<1?0:d:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.lightenColor=(s,i=20)=>{let o=parseInt(s.replace("#",""),16),c=Math.round(2.55*i),u=(o>>16)+c,d=(o>>8&255)+c,p=(o&255)+c;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(d<255?d<1?0:d:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.htmlEscape=s=>typeof s=="string"?s.replace(/font-family\s*:\s*(?:&[^;]+;|[^;])*?;/gi,"").replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;"):s===void 0?"":s,e.domRoot=(s,i="div")=>{if(s instanceof Node)return s;{let o=document.createElement(i);return o.innerHTML=s,o}},e.activateNode=(s,i="active")=>{!s||!s.parentElement||(Array.from(s.parentElement.children).forEach(o=>{o.classList.remove(i)}),s.classList.add(i))},e.isTrue=s=>["1","true","on"].includes(String(s).toLowerCase()),e.UID=111,e.uid=()=>"fez_uid_"+(++e.UID).toString(32),e.POINTER_SEQ=0,e.POINTER={},e.pointer=(s,i={})=>{if(typeof s=="function"){let o=++e.POINTER_SEQ;return i.persist?e.POINTER[o]=s:e.POINTER[o]=(...c)=>{let u=s(...c);return delete e.POINTER[o],u},`Fez.POINTER[${o}]`}},e.clearPointers=()=>{e.POINTER={}},e.getFunction=s=>{if(s){if(typeof s=="function")return s;if(typeof s=="string"){let i=/^\s*\(?\s*\w+(\s*,\s*\w+)*\s*\)?\s*=>/,o=/^\s*function\s*\(/;return i.test(s)||o.test(s)?new Function("return "+s)():s.includes(".")&&!s.includes("(")?new Function(`return function() { return ${s}(); }`):new Function(s)}}else return()=>{}},e.onReady=s=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{s()},{once:!0}):s()},e.fnv1=s=>{var i,o,c,u,d,p;for(i=2166136261,o=16777619,c=i,u=d=0,p=s.length-1;0<=p?d<=p:d>=p;u=0<=p?++d:--d)c^=s.charCodeAt(u),c*=o;return c.toString(36).replaceAll("-","")},e.tag=(s,i={},o="")=>{let c=encodeURIComponent(JSON.stringify(i));return`<${s} data-props="${c}">${o}</${s}>`},e.untilTrue=(s,i)=>{i||=200,s()||setTimeout(()=>{e.untilTrue(s,i)},i)};let n=200;e.throttle=(s,i=n)=>{let o=0,c;return function(...u){let d=Date.now();d-o>=i?(s.apply(this,u),o=d):(clearTimeout(c),c=setTimeout(()=>{s.apply(this,u),o=Date.now()},i-(d-o)))}},e.toPairs=s=>Array.isArray(s)?s.map((i,o)=>[i,o]):s&&typeof s=="object"?Object.entries(s):[],e.typeof=s=>{if(s==null)return"u";if(Array.isArray(s))return"a";let i=typeof s;return i==="function"?"f":i==="string"?"s":i==="number"?Number.isInteger(s)?"i":"n":i==="object"?"o":i[0]}};var De={},je=e=>{e.cssMixin=(r,t)=>{if(t)De[r]=t;else return Object.entries(De).forEach(([n,s])=>{r=r.replaceAll(`:${n} `,`${s} `),r=r.replaceAll(`@include ${n} `,`${s} `)}),r},e.cssMixin("mobile","@media (max-width: 767px)"),e.cssMixin("tablet","@media (min-width: 768px) and (max-width: 1023px)"),e.cssMixin("desktop","@media (min-width:  1200px)")};var E=(e,r)=>{if(typeof e=="number"){let n=E.instances.get(e);if(n)return n;E.consoleError(`Instance with UID "${e}" not found.`);return}if(!e){E.consoleError("Fez() ?");return}if(r){if(typeof r=="function"&&!/^\s*class/.test(r.toString())&&!/\b(this|new)\b/.test(r.toString())){let s=Array.from(document.querySelectorAll(`.fez.fez-${e}`)).filter(i=>i.fez);return s.forEach(i=>r(i.fez)),s}return typeof r!="function"?E.find(e,r):ie(e,r)}let t=e.nodeName?e.closest(".fez"):document.querySelector(e.includes("#")?e:`.fez.fez-${e}`);if(!t){E.consoleError(`node "${e}" not found.`);return}if(!t.fez){E.consoleError(`node "${e}" has no Fez attached.`);return}return t.fez};E.classes={};E.instanceCount=0;E.instances=new Map;E.find=(e,r)=>{let t=typeof e=="string"?document.body.querySelector(e):e;typeof t.val=="function"&&(t=t[0]);let n=r?`.fez.fez-${r}`:".fez",s=t.closest(n);if(s?.fez)return s.fez;E.onError("find","Node connector not found",{original:e,resolved:t})};E.info=()=>console.log("Fez components:",Object.keys(E.classes||{}));E.cssClass=e=>Ce.css(e);E.globalCss=(e,r={})=>{if(typeof e=="function"&&(e=e()),e.includes(":")){let t=e.split(`
`).filter(n=>!/^\s*\/\//.test(n)).join(`
`);r.wrap&&(t=`:fez { ${t} }`),t=t.replace(/\:fez|\:host/,`.fez.fez-${r.name}`),e=E.cssClass(t)}return E.onReady(()=>document.body.parentElement.classList.add(e)),e};function Tt(e,r){if(e===r)return!0;if(!e||!r)return!1;let t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(let s of t)if(e[s]!==r[s])return!1;return!0}E.morphdom=(e,r)=>{Array.from(e.attributes).forEach(n=>{r.setAttribute(n.name,n.value)}),Le.morph(e,r,{morphStyle:"outerHTML",ignoreActiveValue:!0,callbacks:{beforeNodeMorphed:(n,s)=>{if(n!==e&&n.classList?.contains("fez")&&n.fez&&!n.fez._destroyed){E.consoleLog(`Preserving child component ${n.fez.fezName} (UID ${n.fez.UID})`);let i=E.classes[n.fez.fezName]?.getProps?.(s,n)||{},o=n.fez.props||{};return Tt(o,i)||(n.fez.props=i,n.fez.onPropsChange?.(i,o),n.fez.fezNextTick(n.fez.fezRender,"fezRender")),!1}return!0},beforeNodeRemoved:n=>(n.classList?.contains("fez")&&n.fez&&n.fez.fezOnDestroy(),!0)}});let t=e.nextSibling;t?.nodeType===Node.TEXT_NODE&&!t.textContent.trim()&&t.remove()};E.subscribe=ze;E.publish=ve;E.localStorage=Oe;E.fezAwait=le;E.consoleError=(e,r)=>{if(e=`Fez: ${e}`,console.error(e),r)return`<span style="border: 1px solid red; font-size: 14px; padding: 3px 7px; background: #fee; border-radius: 4px;">${e}</span>`};E.consoleLog=e=>{E.LOG&&console.log(`Fez: ${String(e).substring(0,180)}`)};E.onError=(e,r,t)=>{let n=`Fez ${e}: ${r?.toString?.()||r}`;return console.error(n,t||""),n};ke(E);je(E);E.compile=H;E.createTemplate=P;E.state=Re;E.log=_e;E.highlightAll=Me;E.onReady(()=>E.consoleLog("Fez.LOG === true, logging enabled."));var B=E;typeof window<"u"&&(window.FezBase=R,window.Fez=B);Promise.resolve().then(()=>He());var Ct=new MutationObserver(e=>{for(let{addedNodes:r,removedNodes:t}of e)r.forEach(n=>{n.nodeType===1&&(n.matches?.("template[fez], xmp[fez], script[fez]")&&(B.compile(n),n.remove()),n.querySelectorAll?.("template[fez], xmp[fez], script[fez]").forEach(s=>{B.compile(s),s.remove()}))}),t.forEach(n=>{if(n.nodeType!==1)return;let s=i=>{i.fez&&!i.fez._destroyed&&queueMicrotask(()=>{!i.isConnected&&i.fez&&!i.fez._destroyed&&(B.instances.delete(i.fez.UID),i.fez.fezOnDestroy())})};s(n),n.querySelectorAll?.(".fez")?.forEach(s)})});Ct.observe(document.documentElement,{childList:!0,subtree:!0});var wr=B;})();
//# sourceMappingURL=fez.js.map
