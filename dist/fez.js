(()=>{var Ye=Object.defineProperty;var Qe=(e,t)=>()=>(e&&(t=e(e=0)),t);var et=(e,t)=>{for(var r in t)Ye(e,r,{get:t[r],enumerable:!0})};var qe={};et(qe,{loadDefaults:()=>Be});var Be,We=Qe(()=>{Be=()=>{Fez("fez-component",class{init(e){let t=document.createElement(e.name);for(t.props=e.props||e["data-props"]||e;this.root.firstChild;)this.root.parentNode.insertBefore(this.root.lastChild,t.nextSibling);this.root.innerHTML="",this.root.appendChild(t)}}),Fez("fez-include",class{init(e){Fez.fetch(e.src,t=>{let r=Fez.domRoot(t);Fez.head(r),this.root.innerHTML=r.innerHTML})}}),Fez("fez-if",class{init(e){new Function(`return (${e.if||e.test})`)()||this.root.remove()}}),Fez("fez-demo",class{init(e){this.state.ready=!1,this.state.components=[],this.state.filtered=!1,this.state.showAllUrl="";let t=new URLSearchParams(window.location.search),r=e.name||t.get("fez");if(t.get("fez")){let n=new URL(window.location.href);n.searchParams.delete("fez"),this.state.showAllUrl=n.pathname+n.search,this.state.filtered=!0}let s=()=>{if(r)Fez.demo.list[r]?(this.state.components=[r],this.state.ready=!0):setTimeout(s,100);else{let n=Object.keys(Fez.demo.list).sort();n.length>0?(this.state.components=n,this.state.ready=!0):setTimeout(s,100)}};s()}showHtml(e){let t=Fez.demo.list[e]||"No demo HTML";Fez.log("Demo HTML: "+e+`

`+t)}showFez(e){Fez.log("Fez source: "+e+`

`+(Fez.demo.sourceList[e]||"Source not available"))}openSingle(e){let t=new URL(window.location.href);t.searchParams.set("fez",e),window.location.href=t.toString()}openCodePen(e){let t=Fez.demo.list[e]||"",r=Fez.demo.sourceList[e]||"",s=[`<link rel="stylesheet" href="//cdn.simplecss.org/simple.css" />
<script src="//dux.github.io/fez/dist/fez.js"><\/script>`,`<!-- FEZ code start -->
<xmp fez="${e}">
${r}
</xmp>
<!-- FEZ code end -->`,`<!-- HTML code start -->
${t}
<!-- HTML code end -->`],n={title:"Fez component - "+e,html:s.join(`

`),css:"body { padding-top: 50px; }",js:"",editors:"100"},o=document.createElement("form");o.method="POST",o.action="https://codepen.io/pen/define",o.target="_blank";let i=document.createElement("input");i.type="hidden",i.name="data",i.value=JSON.stringify(n),o.appendChild(i),document.body.appendChild(o),o.submit(),document.body.removeChild(o)}renderDemo(e){let t=e.dataset.name;Fez.demo.apply(t,e)}renderInfo(e){let t=e.dataset.name,r=Fez.demo.get(t);r.info?e.innerHTML=r.info.innerHTML:e.innerHTML="<em>No info available</em>"}CSS(){return`:fez {
        display: block;
        font-family: system-ui, -apple-system, sans-serif;
      }
      .fez-demo-item {
        margin-bottom: 40px;
      }
      .fez-demo-title {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 18px;
        font-weight: 600;
        margin: 0 0 25px 0;
        &::before {
          content: '';
          flex: 1;
          height: 1px;
          background: #ddd;
        }
        &::after {
          content: '';
          flex: 1;
          height: 1px;
          background: #ddd;
        }
        .fez-demo-show-all, .fez-demo-open-single {
          font-size: 14px;
          font-weight: normal;
          color: #666;
          text-decoration: none;
          cursor: pointer;
          &:hover { text-decoration: underline; }
        }
      }
      .fez-demo-cols {
        display: flex;
        gap: 40px;
        @media (max-width: 768px) {
          flex-direction: column;
          gap: 20px;
        }
      }
      .fez-demo-left, .fez-demo-right {
        flex: 1;
        min-width: 0;
        overflow: hidden;
      }
      .fez-demo-content {
        min-height: 50px;
      }
      .fez-demo-info {
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 6px;
        padding: 20px;
        line-height: 1.6;
        ul { margin: 0; padding-left: 20px; }
        code { background: #e8e8e8; padding: 2px 5px; border-radius: 3px; font-size: 13px; }
      }
      .fez-demo-buttons {
        margin-top: 30px;
        display: flex;
        gap: 10px;
      }
      .fez-demo-btn {
        padding: 8px 16px;
        border: 1px solid #ccc;
        background: #fff;
        border-radius: 4px;
        cursor: pointer;
        &:hover { background: #f0f0f0; }
      }`}HTML(){return`{#if state.ready}
        {#each state.components as name}
          <div class="fez-demo-item">
            <h2 class="fez-demo-title">{name}{#if state.filtered} <a href="{state.showAllUrl}" class="fez-demo-show-all">show all</a>{:else} <a onclick="fez.openSingle('{name}')" class="fez-demo-open-single">open</a>{/if}</h2>
            <div class="fez-demo-cols">
              <div class="fez-demo-left">
                <div class="fez-demo-content" data-name={name} fez-use="renderDemo"></div>
              </div>
              <div class="fez-demo-right">
                <div class="fez-demo-info" data-name={name} fez-use="renderInfo"></div>
                <div class="fez-demo-buttons">
                  <button class="fez-demo-btn" onclick="fez.showHtml('{name}')">Demo HTML</button>
                  <button class="fez-demo-btn" onclick="fez.showFez('{name}')">Fez Component</button>
                  <button class="fez-demo-btn" onclick="fez.openCodePen('{name}')">CodePen</button>
                </div>
              </div>
            </div>
          </div>
        {/each}
      {:else}
        <div style="padding: 40px; text-align: center; color: #888;">Loading components...</div>
      {/if}`}})};typeof Fez<"u"&&Fez&&typeof document<"u"&&document.head&&Be()});function Q(e,t={},r){if(typeof t=="string"&&([t,r]=[r,t],t||={}),t instanceof Node&&(r=t,t={}),Array.isArray(e)&&(r=e,e="div"),(typeof t!="object"||Array.isArray(t))&&(r=t,t={}),e.includes(".")){let n=e.split(".");e=n.shift()||"div";let o=n.join(" ");t.class?t.class+=` ${o}`:t.class=o}let s=document.createElement(e);for(let[n,o]of Object.entries(t))if(typeof o=="function")s[n]=o.bind(this);else{let i=String(o).replaceAll("fez.",this.fezHtmlRoot);s.setAttribute(n,i)}if(r)if(Array.isArray(r))for(let n of r)s.appendChild(n);else r instanceof Node?s.appendChild(r):s.innerHTML=String(r);return s}function V(e){if(e.startsWith("[")){let s=e.match(/^\[([^\]]+)\](?:\s*,\s*(\w+))?$/);if(s)return{params:s[1].split(",").map(n=>n.trim()),indexParam:s[2]||null,isDestructured:!0}}let r=e.split(",").map(s=>s.trim());return r.length===2?{params:r,indexParam:null,isDestructured:!0}:{params:r,indexParam:null,isDestructured:!1}}function pe(e){let t=V(e),r=[...t.params];return t.indexParam&&r.push(t.indexParam),t.params.length===1&&!r.includes("i")&&r.push("i"),r}function he(e){let t=V(e);return t.isDestructured&&t.params.length===2?[t.params[0]]:t.isDestructured?t.params:t.params.length>=3?t.params.slice(0,-1):t.params.length===2?[t.params[0]]:t.params}function me(e,t){let r=V(t);return r.isDestructured&&r.params.length===2?`Fez.toPairs(${e})`:r.isDestructured||r.params.length>=3?`((_c)=>Array.isArray(_c)?_c:(_c&&typeof _c==="object")?Object.entries(_c):[])(${e})`:`(${e}||[])`}function ge(e){let t=V(e);if(t.isDestructured){let s="["+t.params.join(", ")+"]",n=t.indexParam||(t.params.includes("i")?"_i":"i");return s+", "+n}if(t.params.length>=3){let s=[...t.params],n=s.pop();return"["+s.join(", ")+"], "+n}if(t.params.length===2)return t.params.join(", ");let r=t.params[0]==="i"?"_i":"i";return t.params[0]+", "+r}function be(e){return/^\s*(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/.test(e)}function ye(e,t=[],r=[]){let s=e.match(/^\s*(?:\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*(.+)$/s);if(!s)return e;let n=s[1].trim(),i=e.match(/^\s*\(?\s*([a-zA-Z_$][a-zA-Z0-9_$]*)?\s*(?:,\s*[^)]+)?\)?\s*=>/)?.[1],a=i&&["e","event","ev"].includes(i);if(r.filter(u=>new RegExp(`\\b${u}\\b`).test(n)).length>0){if(a&&i!=="event"){let u=new RegExp(`\\b${i}\\b`,"g");n=n.replace(u,"event")}return n=n.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(u,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?u:`fez.${p}(`),`\${'Fez(' + UID + ').fezGlobals.delete(' + fez.fezGlobals.set(() => ${n}) + ')()'}`}if(a&&i!=="event"){let u=new RegExp(`\\b${i}\\b`,"g");n=n.replace(u,"event")}for(let u of t){let p=new RegExp(`(?<!\\$\\{)\\b${u}\\b(?![^{]*\\})`,"g");n=n.replace(p,`\${${u}}`)}return n=n.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(u,p)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(p)?u:`fez.${p}(`),n}function ze(e,t){let r=0,s=t;for(;s<e.length;){let n=e[s];if(n==="{")r++;else if(n==="}"){if(r--,r===0)return{expression:e.slice(t+1,s),endIndex:s}}else if(n==='"'||n==="'"||n==="`"){let o=n;for(s++;s<e.length&&e[s]!==o;)e[s]==="\\"&&s++,s++}s++}throw new Error(`Unmatched brace at ${t}`)}function ee(e,t){let r=t-1;for(;r>=0&&(e[r]==="{"||e[r]===" "||e[r]==="	");)r--;if(r>=0&&e[r]==="="){for(r--;r>=0&&(e[r]===" "||e[r]==="	");)r--;let s=r+1;for(;r>=0&&/[a-zA-Z0-9_:-]/.test(e[r]);)r--;let n=e.slice(r+1,s);if(n&&/^[a-zA-Z]/.test(n))return n.toLowerCase()}return null}function we(e,t){let r=ee(e,t);return r&&/^on[a-z]+$/.test(r)?r:null}function te(e,t={}){let r=t.name||"unknown";try{e=e.replaceAll("&#x60;","`").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&");let s={};e=e.replace(/\{@block\s+(\w+)\}([\s\S]*?)\{\/block\}/g,(z,C,w)=>(s[C]=w,"")),e=e.replace(/\{@block:(\w+)\}/g,(z,C)=>s[C]||""),e=e.replace(/:(\w+)="([^"{}]+)"/g,(z,C,w)=>/^[\w.[\]]+$/.test(w.trim())?`:${C}={\`Fez(\${UID}).fezGlobals.delete(\${fez.fezGlobals.set(${w})})\`}`:z),e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/>\s+</g,"><").trim(),e=e.replace(/<([a-z][a-z0-9]*-[a-z0-9-]*)([^>]*?)\s*\/>/gi,"<$1$2></$1>"),e=e.replace(/<slot\s*\/>/gi,"<slot></slot>");let n="",o=0,i=[],a=[],d=[],u=[],p=[],b=0;for(;o<e.length;){if(e[o]==="`"){for(n+="\\`",o++;o<e.length&&e[o]!=="`";)if(e[o]==="\\")n+="\\\\",o++,o<e.length&&(e[o]==="`"?n+="\\`":e[o]==="$"?n+="\\$":n+=e[o],o++);else if(e[o]==="$"&&e[o+1]==="{"){n+="\\${",o+=2;let z=1;for(;o<e.length&&z>0;)e[o]==="{"?z++:e[o]==="}"&&z--,z>0||e[o]!=="}"?e[o]==="`"?n+="\\`":e[o]==="\\"?n+="\\\\":n+=e[o]:n+="}",o++}else e[o]==="$"?n+="\\$":n+=e[o],o++;o<e.length&&(n+="\\`",o++);continue}if(e[o]==="\\"&&e[o+1]==="{"){n+="{",o+=2;continue}if(e[o]==="{"){let{expression:z,endIndex:C}=ze(e,o),w=z.trim();if(/^(\w+|"\w+"|'\w+')\s*:/.test(w)){n+="{"+z+"}",o=C+1;continue}if(w.startsWith("#if ")){let g=w.slice(4);n+="${("+g+") ? `",i.push(!1)}else if(w.startsWith("#unless ")){let g=w.slice(8);n+="${!("+g+") ? `",i.push(!1)}else if(w===":else")if(u.length>0&&!i.length){let g=u[u.length-1];g.hasElse=!0,n+='`).join("") : `'}else n+="` : `",i[i.length-1]=!0;else if(w.startsWith(":else if ")){let g=w.slice(9);n+="` : ("+g+") ? `"}else if(w==="/if"||w==="/unless"){let g=i.pop();n+=g?"`}":"` : ``}"}else if(w.startsWith("#each ")||w.startsWith("#for ")){let g=w.startsWith("#each "),L,_;if(g){let N=w.slice(6),P=N.indexOf(" as ");L=N.slice(0,P).trim(),_=N.slice(P+4).trim()}else{let N=w.slice(5),P=N.indexOf(" in ");_=N.slice(0,P).trim(),L=N.slice(P+4).trim()}let I=me(L,_),K=ge(_);a.push(pe(_)),d.push(he(_)),u.push({collectionExpr:I,hasElse:!1}),n+="${((_arr) => _arr.length ? _arr.map(("+K+") => `"}else if(w==="/each"||w==="/for"){a.pop(),d.pop();let g=u.pop();g.hasElse?n+="`)("+g.collectionExpr+")}":n+='`).join("") : "")('+g.collectionExpr+")}"}else if(w.startsWith("#await ")){let g=w.slice(7).trim(),L=b++;p.push({awaitId:L,promiseExpr:g,hasThen:!1,hasCatch:!1,thenVar:"_value",catchVar:"_error"}),n+='${((_aw) => _aw.status === "pending" ? `'}else if(w.startsWith(":then")){let g=p[p.length-1];g&&(g.hasThen=!0,g.thenVar=w.slice(5).trim()||"_value",n+='` : _aw.status === "resolved" ? (('+g.thenVar+") => `")}else if(w.startsWith(":catch")){let g=p[p.length-1];g&&(g.hasCatch=!0,g.catchVar=w.slice(6).trim()||"_error",g.hasThen?n+='`)(_aw.value) : _aw.status === "rejected" ? (('+g.catchVar+") => `":n+='` : _aw.status === "rejected" ? (('+g.catchVar+") => `")}else if(w==="/await"){let g=p.pop();g&&(g.hasThen&&g.hasCatch?n+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+g.awaitId+", "+g.promiseExpr+"))}":g.hasThen?n+="`)(_aw.value) : ``)(Fez.fezAwait(fez, "+g.awaitId+", "+g.promiseExpr+"))}":g.hasCatch?n+="`)(_aw.error) : ``)(Fez.fezAwait(fez, "+g.awaitId+", "+g.promiseExpr+"))}":n+="` : ``)(Fez.fezAwait(fez, "+g.awaitId+", "+g.promiseExpr+"))}")}else if(w.startsWith("@html ")){let g=w.slice(6);n+="${"+g+"}"}else if(w.startsWith("@json ")){let g=w.slice(6);n+='${`<pre class="json">${Fez.htmlEscape(JSON.stringify('+g+", null, 2))}</pre>`}"}else if(be(w))if(we(e,o)){let L=a.flat(),_=d.flat(),I=ye(w,L,_);I=I.replace(/"/g,"&quot;"),n+='"'+I+'"'}else n+="${"+w+"}";else ee(e,o)?n+='"${Fez.htmlEscape('+w+')}"':n+="${Fez.htmlEscape("+w+")}";o=C+1;continue}e[o]==="$"&&e[o+1]==="{"?n+="\\$":e[o]==="\\"?n+="\\\\":n+=e[o],o++}let S=`
      const fez = this;
      with (this) {
        return \`${n}\`
      }
    `,R=new Function(S);return z=>{try{return R.bind(z)()}catch(C){return console.error(`FEZ svelte template runtime error in <${z.fezName||r}>:`,C.message),console.error("Template source:",n.substring(0,500)),""}}}catch(s){return console.error(`FEZ svelte template compile error in <${r}>:`,s.message),console.error("Template:",e.substring(0,200)),()=>""}}var re=new Map;function B(e,t={}){if(re.has(e))return re.get(e);tt(e)&&(e=rt(e,t.name));let r=te(e,t);return re.set(e,r),r}function tt(e){return e.includes("{{")&&e.includes("}}")||e.includes("[[")&&e.includes("]]")}function rt(e,t){return e=e.replaceAll("[[","{{").replaceAll("]]","}}"),e=e.replace(/\{\{block\s+(\w+)\s*\}\}/g,"{@block $1}"),e=e.replace(/\{\{\/block\}\}/g,"{/block}"),e=e.replace(/\{\{block:([\w\-]+)\s*\}\}/g,"{@block:$1}"),e=e.replace(/\{\{#?if\s+(.*?)\}\}/g,"{#if $1}"),e=e.replace(/\{\{\/if\}\}/g,"{/if}"),e=e.replace(/\{\{#?unless\s+(.*?)\}\}/g,"{#unless $1}"),e=e.replace(/\{\{\/unless\}\}/g,"{/unless}"),e=e.replace(/\{\{:?else\}\}/g,"{:else}"),e=e.replace(/\{\{#?for\s+(.*?)\}\}/g,"{#for $1}"),e=e.replace(/\{\{\/for\}\}/g,"{/for}"),e=e.replace(/\{\{#?each\s+(.*?)\}\}/g,"{#each $1}"),e=e.replace(/\{\{\/each\}\}/g,"{/each}"),e=e.replace(/\{\{#?(?:raw|html)\s+(.*?)\}\}/g,"{@html $1}"),e=e.replace(/\{\{json\s+(.*?)\}\}/g,"{@json $1}"),e=e.replace(/\{\{\s*(.*?)\s*\}\}/g,"{$1}"),t&&console.warn(`Fez component "${t}" uses old {{ ... }} notation, converting.`),e}var Z=new Map,x={};function ve(e,t,r){let s=null,n=null,o;typeof t=="function"?(o=e,r=t):(o=t,typeof e=="string"?s=e:n=e),Z.has(o)||Z.set(o,new Set);let i=Z.get(o);for(let d of i)d.callback===r&&d.selector===s&&d.node===n&&i.delete(d);let a={selector:s,node:n,callback:r};return i.add(a),()=>i.delete(a)}function Ee(e,...t){let r=Z.get(e);if(r)for(let s of r){let n=null;if(s.selector){if(n=document.querySelector(s.selector),!n)continue}else if(s.node){if(!s.node.isConnected){r.delete(s);continue}n=s.node}try{s.callback.call(n,...t)}catch(o){console.error(`Fez pubsub error on "${e}":`,o)}}x[e]&&x[e].forEach(([s,n])=>{s.isConnected&&n.bind(s)(...t)})}function Se(e,t,r){return x[t]||=[],x[t]=x[t].filter(([s])=>s.isConnected),x[t].push([e,r]),()=>{x[t]=x[t].filter(([s,n])=>!(s===e&&n===r))}}function Ae(e,t,...r){let s=o=>{if(x[t]){let i=x[t].find(([a])=>a===o);if(i)return i[1].bind(o)(...r),!0}return!1};if(s(e))return!0;let n=e.root?.parentElement;for(;n;){if(n.fez&&s(n.fez))return!0;n=n.parentElement}return!1}var k=class{static nodeName="div";static getProps(t,r){let s={};if(t.props)return t.props;for(let n of t.attributes)s[n.name]=n.value;for(let[n,o]of Object.entries(s))if([":"].includes(n[0])){delete s[n];try{let i=new Function(`return (${o})`).bind(r)();s[n.replace(/[\:_]/,"")]=i}catch(i){Fez.onError("attr",`<${t.tagName.toLowerCase()}> Error evaluating ${n}="${o}": ${i.message}`)}}if(s["data-props"]){let n=s["data-props"];if(typeof n=="object")return n;n[0]!="{"&&(n=decodeURIComponent(n));try{s=JSON.parse(n)}catch(o){Fez.onError("props",`<${t.tagName.toLowerCase()}> Invalid JSON in data-props: ${o.message}`)}}else if(s["data-json-template"]){let n=r.previousSibling?.textContent;if(n)try{s=JSON.parse(n),r.previousSibling.remove()}catch(o){Fez.onError("props",`<${t.tagName.toLowerCase()}> Invalid JSON in template: ${o.message}`)}}return s}static formData(t){let r=t.closest("form")||t.querySelector("form");if(!r)return Fez.consoleLog("No form found for formData()"),{};let s=new FormData(r),n={};return s.forEach((o,i)=>{n[i]=o}),n}constructor(){}n=Q;fezBlocks={};fezGlobals={_data:new Map,_counter:0,set(t){let r=this._counter++;return this._data.set(r,t),r},delete(t){let r=this._data.get(t);return this._data.delete(t),r}};fezError(t,r,s){let n=this.fezName||this.root?.tagName?.toLowerCase()||"unknown";return Fez.onError(t,`<${n}> ${r}`,s)}get fezHtmlRoot(){return`Fez(${this.UID}).`}get isConnected(){return!!this.root?.isConnected}prop(t){let r=this.oldRoot[t]||this.props[t];return typeof r=="function"&&(r=r.bind(this.root)),r}connect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}onStateChange(){}onGlobalStateChange(){}onPropsChange(){}fezOnDestroy(){this._destroyed||(this._destroyed=!0,this._onDestroyCallbacks&&(this._onDestroyCallbacks.forEach(t=>{try{t()}catch(r){this.fezError("destroy","Error in cleanup callback",r)}}),this._onDestroyCallbacks=[]),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0)}addOnDestroy(t){this._onDestroyCallbacks=this._onDestroyCallbacks||[],this._onDestroyCallbacks.push(t)}fezParseHtml(t){let r=this.fezHtmlRoot.replaceAll('"',"&quot;");return t=t.replace(/([!'"\s;])fez\.(\w)/g,`$1${r}$2`).replace(/>\s+</g,"><"),t.trim()}fezNextTick(t,r){r?(this._nextTicks||={},this._nextTicks[r]||=window.requestAnimationFrame(()=>{t.bind(this)(),this._nextTicks[r]=null},r)):window.requestAnimationFrame(t.bind(this))}fezRefresh(){this.fezNextTick(()=>this.fezRender(),"refresh")}refresh(){this.fezRefresh()}fezRender(t){if(t||=this.fezHtmlFunc||this?.class?.fezHtmlFunc,!t||!this.root)return;this._isRendering=!0,this.beforeRender();let r=typeof this.class.nodeName=="function"?this.class.nodeName(this.root):this.class.nodeName,s=document.createElement(r||"div"),n;if(Array.isArray(t))t[0]instanceof Node?t.forEach(i=>s.appendChild(i)):n=t.join("");else if(typeof t=="string"){let i=this.root?.tagName?.toLowerCase();n=B(t,{name:i})(this)}else typeof t=="function"&&(n=t(this));n&&(n instanceof DocumentFragment||n instanceof Node?s.appendChild(n):(n=n.replace(/\s\w+="undefined"/g,""),s.innerHTML=this.fezParseHtml(n))),this.fezKeepNode(s);let o=new Map;this.root.querySelectorAll("input, textarea, select").forEach(i=>{i._fezThisName&&o.set(i._fezThisName,{value:i.value,checked:i.checked})}),Fez.morphdom(this.root,s),o.forEach((i,a)=>{let d=null;this.root.querySelectorAll("input, textarea, select").forEach(u=>{u._fezThisName===a&&(d=u)}),d&&(d.value=i.value,i.checked!==void 0&&(d.checked=i.checked))}),this.fezRenderPostProcess(),this.afterRender(),this._isRendering=!1}fezRenderPostProcess(){let t=(r,s)=>{this.root.querySelectorAll(`*[${r}]`).forEach(n=>{let o=n.getAttribute(r);n.removeAttribute(r),o&&s.bind(this)(o,n)})};t("fez-this",(r,s)=>{new Function("n",`this.${r} = n`).bind(this)(s),s._fezThisName=r}),t("fez-use",(r,s)=>{if(r.includes("=>"))Fez.getFunction(r)(s);else if(r.includes("."))Fez.getFunction(r).bind(s)();else{let n=this[r];typeof n=="function"?n(s):this.fezError("fez-use",`"${r}" is not a function`)}}),t("fez-class",(r,s)=>{let n=r.split(/\s+/),o=n.pop();n.forEach(i=>s.classList.add(i)),o&&setTimeout(()=>{s.classList.add(o)},1)}),t("fez-bind",(r,s)=>{if(["INPUT","SELECT","TEXTAREA"].includes(s.nodeName)){let n=new Function(`return this.${r}`).bind(this)(),o=s.type.toLowerCase()=="checkbox",i=["SELECT"].includes(s.nodeName)||o?"onchange":"onkeyup";s.setAttribute(i,`${this.fezHtmlRoot}${r} = this.${o?"checked":"value"}`),this.val(s,n),s._fezThisName=r}else this.fezError("fez-bind",`Can't bind "${r}" to ${s.nodeName} (needs INPUT, SELECT or TEXTAREA)`)}),this.root.querySelectorAll("*[disabled]").forEach(r=>{let s=r.getAttribute("disabled");["false"].includes(s)?r.removeAttribute("disabled"):r.setAttribute("disabled","true")})}fezKeepNode(t){t.querySelectorAll("[fez-keep]").forEach(r=>{let s=r.getAttribute("fez-keep"),n=s==="default-slot"||s.startsWith("slot-"),o;if(n){let i=this.root.querySelectorAll(`[fez-keep="${s}"]`);for(let a of i){let d=a.parentElement,u=!1;for(;d&&d!==this.root;){if(d.classList.contains("fez")){u=!0;break}d=d.parentElement}if(!u){o=a;break}}}else o=this.root.querySelector(`[fez-keep="${s}"]`);if(o)r.parentNode.replaceChild(o,r);else if(n)if(r.getAttribute("hide")){this.state=null;let i=r.parentNode;Array.from(this.root.childNodes).forEach(a=>{i.insertBefore(a,r)}),r.remove()}else Array.from(this.root.childNodes).forEach(a=>{r.appendChild(a)})})}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.fezReactiveStore(),this.globalState=Fez.state.createProxy(this),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(r=>r!=="constructor"&&typeof this[r]=="function").forEach(r=>this[r]=this[r].bind(this))}fezReactiveStore(t,r){t||={},r||=(n,o,i,a)=>{i!=a&&(this.onStateChange(o,i,a),!this._isRendering&&!this._isInitializing&&this.fezNextTick(this.fezRender,"fezRender"))},r.bind(this);function s(n,o){return typeof n!="object"||n===null||n instanceof Promise?n:new Proxy(n,{set(i,a,d,u){let p=Reflect.get(i,a,u);if(p!==d){typeof d=="object"&&d!==null&&!(d instanceof Promise)&&(d=s(d,o));let b=Reflect.set(i,a,d,u);return o(i,a,d,p),b}return!0},get(i,a,d){let u=Reflect.get(i,a,d);return typeof u=="object"&&u!==null&&!(u instanceof Promise)?s(u,o):u}})}return s(t,r)}find(t){return typeof t=="string"?this.root.querySelector(t):t}val(t,r){let s=this.find(t);if(s)if(["INPUT","TEXTAREA","SELECT"].includes(s.nodeName))if(typeof r<"u")s.type=="checkbox"?s.checked=!!r:s.value=r;else return s.value;else if(typeof r<"u")s.innerHTML=r;else return s.innerHTML}formData(t){return this.class.formData(t||this.root)}attr(t,r){return typeof r>"u"?this.root.getAttribute(t):(this.root.setAttribute(t,r),r)}childNodes(t){let r=this._fezChildNodes||Array.from(this.root.children);return t===!0?r=r.map(s=>{let n={html:s.innerHTML,ROOT:s};for(let o of s.attributes)n[o.name]=o.value;return n}):t&&(r=r.map(t)),r}setStyle(t,r){t&&typeof t=="object"?Object.entries(t).forEach(([s,n])=>{this.root.style.setProperty(s,n)}):this.root.style.setProperty(t,r)}copy(){for(let t of Array.from(arguments)){let r=this.props[t];if(r!==void 0){if(t=="class"){let s=this.root.getAttribute(t,r);s&&(r=[s,r].join(" "))}typeof r=="string"?this.root.setAttribute(t,r):this.root[t]=r}}}rootId(){return this.root.id||=`fez_${this.UID}`,this.root.id}dissolve(t){t&&(t.classList.add("fez"),t.classList.add(`fez-${this.fezName}`),t.fez=this,this.attr("id")&&t.setAttribute("id",this.attr("id")),this.root.innerHTML="",this.root.appendChild(t));let r=this.root,s=this.childNodes(),n=this.root.parentNode;return s.reverse().forEach(o=>n.insertBefore(o,r.nextSibling)),this.root.remove(),this.root=void 0,t&&(this.root=t),s}on(t,r,s=200){this._eventHandlers=this._eventHandlers||{},this._eventHandlers[t]&&window.removeEventListener(t,this._eventHandlers[t]);let n=Fez.throttle(()=>{this.isConnected&&r.call(this)},s);this._eventHandlers[t]=n,window.addEventListener(t,n),this.addOnDestroy(()=>{window.removeEventListener(t,n),delete this._eventHandlers[t]})}onWindowResize(t,r){this.on("resize",t,r),t()}onWindowScroll(t,r){this.on("scroll",t,r),t()}onElementResize(t,r,s=200){let n=Fez.throttle(()=>{this.isConnected&&r.call(this,t.getBoundingClientRect(),t)},s),o=new ResizeObserver(n);o.observe(t),r.call(this,t.getBoundingClientRect(),t),this.addOnDestroy(()=>{o.disconnect()})}setTimeout(t,r){let s=setTimeout(()=>{this.isConnected&&t()},r);return this.addOnDestroy(()=>clearTimeout(s)),s}setInterval(t,r,s){typeof t=="number"&&([r,t]=[t,r]),s||=Fez.fnv1(String(t)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[s]);let n=setInterval(()=>{this.isConnected&&t()},r);return this._setIntervalCache[s]=n,this.addOnDestroy(()=>{clearInterval(n),delete this._setIntervalCache[s]}),n}publish(t,...r){return Ae(this,t,...r)}subscribe(t,r){let s=Se(this,t,r);return this.addOnDestroy(s),s}fezSlot(t,r){r||=document.createElement("template");let s=r.nodeName=="SLOT";for(;t.firstChild;)s?r.parentNode.insertBefore(t.lastChild,r.nextSibling):r.appendChild(t.firstChild);return s?r.parentNode.removeChild(r):t.innerHTML="",r}};var nt={data:""},Te=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||nt,st=e=>{let t=Te(e),r=t.data;return t.data="",r},ot=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,it=/\/\*[^]*?\*\/|  +/g,$e=/\n+/g,D=(e,t)=>{let r="",s="",n="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?r=o+" "+i+";":s+=o[1]=="f"?D(i,o):o+"{"+D(i,o[1]=="k"?"":t)+"}":typeof i=="object"?s+=D(i,t?t.replace(/([^,])+/g,a=>o.replace(/(^:.*)|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,a):a?a+" "+d:d)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=D.p?D.p(o,i):o+":"+i+";")}return r+(t&&n?t+"{"+n+"}":n)+s},O={},Ce=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Ce(e[r]);return t}return e},lt=(e,t,r,s,n)=>{let o=Ce(e),i=O[o]||(O[o]=(d=>{let u=0,p=11;for(;u<d.length;)p=101*p+d.charCodeAt(u++)>>>0;return"go"+p})(o));if(!O[i]){let d=o!==e?e:(u=>{let p,b,S=[{}];for(;p=ot.exec(u.replace(it,""));)p[4]?S.shift():p[3]?(b=p[3].replace($e," ").trim(),S.unshift(S[0][b]=S[0][b]||{})):S[0][p[1]]=p[2].replace($e," ").trim();return S[0]})(e);O[i]=D(n?{["@keyframes "+i]:d}:d,r?"":"."+i)}let a=r&&O.g?O.g:null;return r&&(O.g=O[i]),((d,u,p,b)=>{b?u.data=u.data.replace(b,d):u.data.indexOf(d)===-1&&(u.data=p?d+u.data:u.data+d)})(O[i],t,s,a),i},at=(e,t,r)=>e.reduce((s,n,o)=>{let i=t[o];if(i&&i.call){let a=i(r),d=a&&a.props&&a.props.className||/^go/.test(a)&&a;i=d?"."+d:a&&typeof a=="object"?a.props?"":D(a,""):a===!1?"":a}return s+n+(i??"")},"");function X(e){let t=this||{},r=e.call?e(t.p):e;return lt(r.unshift?r.raw?at(r,[].slice.call(arguments,1),t.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(t.p):n),{}):r,Te(t.target),t.g,t.o,t.k)}var Le,ne,se,ct=X.bind({g:1}),ft=X.bind({k:1});function dt(e,t,r,s){D.p=t,Le=e,ne=r,se=s}function ut(e,t){let r=this||{};return function(){let s=arguments;function n(o,i){let a=Object.assign({},o),d=a.className||n.className;r.p=Object.assign({theme:ne&&ne()},a),r.o=/ *go\d+/.test(d),a.className=X.apply(r,s)+(d?" "+d:""),t&&(a.ref=i);let u=e;return e[0]&&(u=a.as||e,delete a.as),se&&u[0]&&se(a),Le(u,a)}return t?t(n):n}}var _e={css:X,extractCss:st,glob:ct,keyframes:ft,setup:dt,styled:ut};var Ie=function(){"use strict";let e=new Set,t={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:z,afterNodeAdded:z,beforeNodeMorphed:z,afterNodeMorphed:z,beforeNodeRemoved:z,afterNodeRemoved:z,beforeAttributeUpdated:z},head:{style:"merge",shouldPreserve:function(c){return c.getAttribute("im-preserve")==="true"},shouldReAppend:function(c){return c.getAttribute("im-re-append")==="true"},shouldRemove:z,afterHeadMorphed:z}};function r(c,l,f={}){c instanceof Document&&(c=c.documentElement),typeof l=="string"&&(l=N(l));let h=P(l),m=w(c,h,f);return s(c,h,m)}function s(c,l,f){if(f.head.block){let h=c.querySelector("head"),m=l.querySelector("head");if(h&&m){let y=S(m,h,f);Promise.all(y).then(function(){s(c,l,Object.assign(f,{head:{block:!1,ignore:!0}}))});return}}if(f.morphStyle==="innerHTML")return i(l,c,f),c.children;if(f.morphStyle==="outerHTML"||f.morphStyle==null){let h=Ue(l,c,f),m=h?.previousSibling,y=h?.nextSibling,E=o(c,h,f);return h?Ge(m,E,y):[]}else throw"Do not understand how to morph style "+f.morphStyle}function n(c,l){return l.ignoreActiveValue&&c===document.activeElement&&c!==document.body}function o(c,l,f){if(!(f.ignoreActive&&c===document.activeElement))return l==null?f.callbacks.beforeNodeRemoved(c)===!1?c:(c.remove(),f.callbacks.afterNodeRemoved(c),null):L(c,l)?(f.callbacks.beforeNodeMorphed(c,l)===!1||(c instanceof HTMLHeadElement&&f.head.ignore||(c instanceof HTMLHeadElement&&f.head.style!=="morph"?S(l,c,f):(d(l,c,f),n(c,f)||i(l,c,f))),f.callbacks.afterNodeMorphed(c,l)),c):f.callbacks.beforeNodeRemoved(c)===!1||f.callbacks.beforeNodeAdded(l)===!1?c:(c.parentElement.replaceChild(l,c),f.callbacks.afterNodeAdded(l),f.callbacks.afterNodeRemoved(c),l)}function i(c,l,f){let h=c.firstChild,m=l.firstChild,y;for(;h;){if(y=h,h=y.nextSibling,m==null){if(f.callbacks.beforeNodeAdded(y)===!1)return;l.appendChild(y),f.callbacks.afterNodeAdded(y),H(f,y);continue}if(g(y,m,f)){o(m,y,f),m=m.nextSibling,H(f,y);continue}let E=I(c,l,y,m,f);if(E){m=_(m,E,f),o(E,y,f),H(f,y);continue}let A=K(c,l,y,m,f);if(A){m=_(m,A,f),o(A,y,f),H(f,y);continue}if(f.callbacks.beforeNodeAdded(y)===!1)return;l.insertBefore(y,m),f.callbacks.afterNodeAdded(y),H(f,y)}for(;m!==null;){let E=m;m=m.nextSibling,fe(E,f)}}function a(c,l,f,h){return c==="value"&&h.ignoreActiveValue&&l===document.activeElement?!0:h.callbacks.beforeAttributeUpdated(c,l,f)===!1}function d(c,l,f){let h=c.nodeType;if(h===1){let m=c.attributes,y=l.attributes;for(let E of m)if(!a(E.name,l,"update",f))try{l.getAttribute(E.name)!==E.value&&(E.name==="class"?u(c,l):l.setAttribute(E.name,E.value))}catch(A){console.error("Error setting attribute:",{badNode:l,badAttribute:E,error:A.message})}for(let E=y.length-1;0<=E;E--){let A=y[E];a(A.name,l,"remove",f)||c.hasAttribute(A.name)||l.removeAttribute(A.name)}}(h===8||h===3)&&l.nodeValue!==c.nodeValue&&(l.nodeValue=c.nodeValue),n(l,f)||b(c,l,f)}function u(c,l){let f=new Set(c.className.split(/\s+/).filter(Boolean)),h=new Set(l.className.split(/\s+/).filter(Boolean));for(let m of h)f.has(m)||l.classList.remove(m);for(let m of f)h.has(m)||l.classList.add(m)}function p(c,l,f,h){if(c[f]!==l[f]){let m=a(f,l,"update",h);m||(l[f]=c[f]),c[f]?m||l.setAttribute(f,c[f]):a(f,l,"remove",h)||l.removeAttribute(f)}}function b(c,l,f){if(c instanceof HTMLInputElement&&l instanceof HTMLInputElement&&c.type!=="file"){let h=c.value,m=l.value;p(c,l,"checked",f),p(c,l,"disabled",f),c.hasAttribute("value")?h!==m&&(a("value",l,"update",f)||(l.setAttribute("value",h),l.value=h)):a("value",l,"remove",f)||(l.value="",l.removeAttribute("value"))}else if(c instanceof HTMLOptionElement)p(c,l,"selected",f);else if(c instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement){let h=c.value,m=l.value;if(a("value",l,"update",f))return;h!==m&&(l.value=h),l.firstChild&&l.firstChild.nodeValue!==h&&(l.firstChild.nodeValue=h)}}function S(c,l,f){let h=[],m=[],y=[],E=[],A=f.head.style,j=new Map;for(let T of c.children)j.set(T.outerHTML,T);for(let T of l.children){let M=j.has(T.outerHTML),U=f.head.shouldReAppend(T),Y=f.head.shouldPreserve(T);M||Y?U?m.push(T):(j.delete(T.outerHTML),y.push(T)):A==="append"?U&&(m.push(T),E.push(T)):f.head.shouldRemove(T)!==!1&&m.push(T)}E.push(...j.values());let ue=[];for(let T of E){let M=document.createRange().createContextualFragment(T.outerHTML).firstChild;if(f.callbacks.beforeNodeAdded(M)!==!1){if(M.href||M.src){let U=null,Y=new Promise(function(Ke){U=Ke});M.addEventListener("load",function(){U()}),ue.push(Y)}l.appendChild(M),f.callbacks.afterNodeAdded(M),h.push(M)}}for(let T of m)f.callbacks.beforeNodeRemoved(T)!==!1&&(l.removeChild(T),f.callbacks.afterNodeRemoved(T));return f.head.afterHeadMorphed(l,{added:h,kept:y,removed:m}),ue}function R(){}function z(){}function C(c){let l={};return Object.assign(l,t),Object.assign(l,c),l.callbacks={},Object.assign(l.callbacks,t.callbacks),Object.assign(l.callbacks,c.callbacks),l.head={},Object.assign(l.head,t.head),Object.assign(l.head,c.head),l}function w(c,l,f){return f=C(f),{target:c,newContent:l,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:Je(c,l),deadIds:new Set,callbacks:f.callbacks,head:f.head}}function g(c,l,f){return c==null||l==null?!1:c.nodeType===l.nodeType&&c.tagName===l.tagName?c.id!==""&&c.id===l.id?!0:G(f,c,l)>0:!1}function L(c,l){return c==null||l==null?!1:c.nodeType===l.nodeType&&c.tagName===l.tagName}function _(c,l,f){for(;c!==l;){let h=c;c=c.nextSibling,fe(h,f)}return H(f,l),l.nextSibling}function I(c,l,f,h,m){let y=G(m,f,l),E=null;if(y>0){let A=h,j=0;for(;A!=null;){if(g(f,A,m))return A;if(j+=G(m,A,c),j>y)return null;A=A.nextSibling}}return E}function K(c,l,f,h,m){let y=h,E=f.nextSibling,A=0;for(;y!=null;){if(G(m,y,c)>0)return null;if(L(f,y))return y;if(L(E,y)&&(A++,E=E.nextSibling,A>=2))return null;y=y.nextSibling}return y}function N(c){let l=new DOMParser,f=c.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(f.match(/<\/html>/)||f.match(/<\/head>/)||f.match(/<\/body>/)){let h=l.parseFromString(c,"text/html");if(f.match(/<\/html>/))return h.generatedByIdiomorph=!0,h;{let m=h.firstChild;return m?(m.generatedByIdiomorph=!0,m):null}}else{let m=l.parseFromString("<body><template>"+c+"</template></body>","text/html").body.querySelector("template").content;return m.generatedByIdiomorph=!0,m}}function P(c){if(c==null)return document.createElement("div");if(c.generatedByIdiomorph)return c;if(c instanceof Node){let l=document.createElement("div");return l.append(c),l}else{let l=document.createElement("div");for(let f of[...c])l.append(f);return l}}function Ge(c,l,f){let h=[],m=[];for(;c!=null;)h.push(c),c=c.previousSibling;for(;h.length>0;){let y=h.pop();m.push(y),l.parentElement.insertBefore(y,l)}for(m.push(l);f!=null;)h.push(f),m.push(f),f=f.nextSibling;for(;h.length>0;)l.parentElement.insertBefore(h.pop(),l.nextSibling);return m}function Ue(c,l,f){let h;h=c.firstChild;let m=h,y=0;for(;h;){let E=Ve(h,l,f);E>y&&(m=h,y=E),h=h.nextSibling}return m}function Ve(c,l,f){return L(c,l)?.5+G(f,c,l):0}function fe(c,l){H(l,c),l.callbacks.beforeNodeRemoved(c)!==!1&&(c.remove(),l.callbacks.afterNodeRemoved(c))}function Ze(c,l){return!c.deadIds.has(l)}function Xe(c,l,f){return(c.idMap.get(f)||e).has(l)}function H(c,l){let f=c.idMap.get(l)||e;for(let h of f)c.deadIds.add(h)}function G(c,l,f){let h=c.idMap.get(l)||e,m=0;for(let y of h)Ze(c,y)&&Xe(c,y,f)&&++m;return m}function de(c,l){let f=c.parentElement,h=c.querySelectorAll("[id]");for(let m of h){let y=m;for(;y!==f&&y!=null;){let E=l.get(y);E==null&&(E=new Set,l.set(y,E)),E.add(m.id),y=y.parentElement}}}function Je(c,l){let f=new Map;return de(c,f),de(l,f),f}return{morph:r,defaults:t}}();var pt=e=>{let t=e.split(/(<\/?[^>]+>)/g).map(n=>n.trim()).filter(n=>n),r=0,s=[];for(let n=0;n<t.length;n++){let o=t[n],i=t[n+1],a=t[n+2];if(o.startsWith("<"))if(!o.startsWith("</")&&!o.endsWith("/>")&&i&&!i.startsWith("<")&&a&&a.startsWith("</")){let d=Math.max(0,r);s.push("  ".repeat(d)+o+i+a),n+=2}else if(o.startsWith("</")){r--;let d=Math.max(0,r);s.push("  ".repeat(d)+o)}else if(o.endsWith("/>")||o.includes(" />")){let d=Math.max(0,r);s.push("  ".repeat(d)+o)}else{let d=Math.max(0,r);s.push("  ".repeat(d)+o),r++}else if(o){let d=Math.max(0,r);s.push("  ".repeat(d)+o)}}return s.join(`
`)},oe=(()=>{let e=[],t=[],r=0,s=null;document.addEventListener("keydown",i=>{if(i.key==="Escape"){i.preventDefault();let a=document.getElementById("dump-dialog"),d=document.getElementById("log-reopen-button");a?(a.remove(),n()):d&&(d.remove(),o())}else(i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="ArrowUp"||i.key==="ArrowDown")&&document.getElementById("dump-dialog")&&e.length>0&&(i.preventDefault(),i.key==="ArrowLeft"&&r>0?(r--,localStorage.setItem("_LOG_INDEX",r),s()):i.key==="ArrowRight"&&r<e.length-1?(r++,localStorage.setItem("_LOG_INDEX",r),s()):i.key==="ArrowUp"&&r>0?(r=Math.max(0,r-5),localStorage.setItem("_LOG_INDEX",r),s()):i.key==="ArrowDown"&&r<e.length-1&&(r=Math.min(e.length-1,r+5),localStorage.setItem("_LOG_INDEX",r),s()))});let n=()=>{let i=document.getElementById("log-reopen-button");i||(i=document.body.appendChild(document.createElement("button")),i.id="log-reopen-button",i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>LOG',i.style.cssText="position:fixed; top: 10px; right: 10px;padding:10px 20px;background:#ff3333;color:#fff;border:none;cursor:pointer;font:14px/1.4 monospace;z-index:2147483647;border-radius:8px;display:flex;align-items:center;opacity:1;visibility:visible;box-shadow:0 4px 12px rgba(255,51,51,0.3)",i.onclick=()=>{i.remove(),o()})},o=()=>{let i=document.getElementById("log-reopen-button");i&&i.remove();let a=document.getElementById("dump-dialog");a||(a=document.body.appendChild(document.createElement("div")),a.id="dump-dialog",a.style.cssText="position:fixed; top:20px; left:20px; right:20px; max-height:calc(100vh - 40px);background:#fff; border:1px solid #333; box-shadow:0 0 10px rgba(0,0,0,0.5);padding:20px; overflow:auto; z-index:2147483646; font:13px/1.4 monospace;white-space:pre; display:block; opacity:1; visibility:visible");let d=parseInt(localStorage.getItem("_LOG_INDEX"));!isNaN(d)&&d>=0&&d<e.length?r=d:r=e.length-1,s=()=>{let u=e.map((p,b)=>{let S="#f0f0f0";return b!==r&&(t[b]==="object"?S="#d6e3ef":t[b]==="array"&&(S="#d8d5ef")),`<button style="font-size: 14px; font-weight: 400; padding:2px 6px; margin: 0 2px 2px 0;cursor:pointer;background:${b===r?"#333":S};color:${b===r?"#fff":"#000"}" data-index="${b}">${b+1}</button>`}).join("");a.innerHTML='<div style="display:flex;flex-direction:column;height:100%"><div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div style="display:flex;flex-wrap:wrap;gap:4px;flex:1;margin-right:10px">'+u+'</div><button style="padding:4px 8px;cursor:pointer;flex-shrink:0">&times;</button></div><xmp style="font-family:monospace;flex:1;overflow:auto;margin:0;padding:0;color:#000;background:#fff;font-size:14px;line-height:22px">'+e[r]+"</xmp></div>",a.querySelector('button[style*="flex-shrink:0"]').onclick=()=>{a.remove(),n()},a.querySelectorAll("button[data-index]").forEach(p=>{p.onclick=()=>{r=parseInt(p.dataset.index),localStorage.setItem("_LOG_INDEX",r),s()}})},s()};return i=>{if(!document.body){window.requestAnimationFrame(()=>oe(i));return}let a=typeof i;i instanceof Node&&(i.nodeType===Node.TEXT_NODE?i=i.textContent||String(i):i=pt(i.outerHTML)),i===void 0&&(i="undefined"),i===null&&(i="null"),Array.isArray(i)?a="array":typeof i=="object"&&i!==null&&(a="object"),typeof i!="string"&&(i=JSON.stringify(i,(u,p)=>typeof p=="function"?String(p):p,2).replaceAll("<","&lt;")),i=i.trim(),e.push(i+`

type: ${a}`),t.push(a),!!document.getElementById("dump-dialog")?(r=e.length-1,localStorage.setItem("_LOG_INDEX",r),s&&s()):o()}})();typeof window<"u"&&!window.LOG&&(window.LOG=oe);var Me=oe;var xe=()=>{let e=parseInt(window.location.port)||80;if(!(Fez.DEV===!0||e>2999&&Fez.DEV!==!1))return;let t=document.querySelectorAll(".fez-highlight-overlay");if(t.length>0){t.forEach(s=>s.remove());return}document.querySelectorAll(".fez, .svelte").forEach(s=>{let n=null,o=null;if(s.classList.contains("fez")&&s.fez&&s.fez.fezName?(n=s.fez.fezName,o="fez"):s.classList.contains("svelte")&&s.svelte&&s.svelte.svelteName&&(n=s.svelte.svelteName,o="svelte"),n){let i=document.createElement("div");i.className="fez-highlight-overlay";let a=s.getBoundingClientRect(),d=window.pageYOffset||document.documentElement.scrollTop,u=window.pageXOffset||document.documentElement.scrollLeft;i.style.cssText=`
        position: absolute;
        top: ${a.top+d}px;
        left: ${a.left+u}px;
        width: ${a.width}px;
        height: ${a.height}px;
        border: 1px solid ${o==="svelte"?"blue":"red"};
        pointer-events: none;
        z-index: 9999;
      `;let p=document.createElement("div");p.textContent=n,p.style.cssText=`
        position: absolute;
        top: -20px;
        left: 0;
        background: ${o==="svelte"?"blue":"red"};
        color: white;
        padding: 4px 6px 2px 6px;
        font-size: 14px;
        font-family: monospace;
        line-height: 1;
        white-space: nowrap;
        cursor: pointer;
        pointer-events: auto;
        text-transform: uppercase;
      `,p.addEventListener("click",b=>{b.stopPropagation(),Fez.log(s)}),i.appendChild(p),document.body.appendChild(i)}})};document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="e"&&(e.target.closest("form")||(e.preventDefault(),xe()))});var Fe=xe;var ht=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),mt=new MutationObserver(e=>{for(let t of e)if(t.type==="attributes"){let r=t.target.fez;if(r){let s=t.attributeName,n=t.target.getAttribute(s);r.props[s]=n,r.onPropsChange(s,n)}}});function ie(e,t){let r=globalThis.window?.Fez||globalThis.Fez;if(!e.includes("-")){console.error(`Fez: Invalid name "${e}". Must contain a dash.`);return}if(t=gt(r,e,t),t.html){let s=t.SLOT||"div";t.html=t.html.replace(/<slot(\s[^>]*)?>/,`<${s} class="fez-slot fez-slot-${e}" fez-keep="slot-${e}"$1>`).replace("</slot>",`</${s}>`),t.fezHtmlFunc=B(t.html,{name:e})}t.css&&(t.css=r.globalCss(t.css,{name:e})),r.classes[e]=t,customElements.get(e)||customElements.define(e,class extends HTMLElement{connectedCallback(){bt(this,t)?Ne(e,this):requestAnimationFrame(()=>Ne(e,this))}})}function gt(e,t,r){if(r.prototype instanceof k)return r.html&&(r.html=Re(r.html)),r;let s=new r,n=class extends k{},o=[...Object.getOwnPropertyNames(s),...Object.getOwnPropertyNames(r.prototype)].filter(a=>a!=="constructor"&&a!=="prototype");for(let a of o)n.prototype[a]=s[a];let i={FAST:"FAST",GLOBAL:"GLOBAL",NAME:"nodeName"};for(let[a,d]of Object.entries(i))s[a]&&(n[d]=s[a]);if(s.CSS&&(n.css=typeof s.CSS=="function"?s.CSS():s.CSS),s.HTML){let a=typeof s.HTML=="function"?s.HTML():s.HTML;n.html=Re(a)}return s.GLOBAL&&e.onReady(()=>document.body.appendChild(document.createElement(t))),e.consoleLog(`${t} compiled`),n}function Re(e){return e.replace(/<([a-z-]+)\b([^>]*)\/>/g,(t,r,s)=>ht.has(r)?t:`<${r}${s}></${r}>`)}function bt(e,t){let r=e.getAttribute("fez-fast");if(r==="false")return!1;let s=typeof t.FAST=="function"?t.FAST(e):t.FAST;return!!(r||s||e.childNodes[0]||e.nextSibling)}function Ne(e,t){if(!t.isConnected||t.classList?.contains("fez"))return;let r=Fez.classes[e],s=typeof r.nodeName=="function"?r.nodeName(t):r.nodeName,n=document.createElement(s||"div");if(n.classList.add("fez",`fez-${e}`),!t.parentNode){console.warn(`Fez: ${e} has no parent, skipping`);return}t.parentNode.replaceChild(n,t);let o=new r;if(o.UID=++Fez.instanceCount,Fez.instances.set(o.UID,o),o.oldRoot=t,o.fezName=e,o.root=n,o.props=r.getProps(t,n),o.class=r,o.fezSlot(t,n),n.fez=o,r.GLOBAL&&r.GLOBAL!==!0&&(window[r.GLOBAL]||=o),window.$&&(o.$root=$(n)),o.props.id&&n.setAttribute("id",o.props.id),o.fezRegister(),o.root.children.length&&(o._fezChildNodes=Array.from(o.root.children)),o._isInitializing=!0,(o.onInit||o.init||o.created||o.connect).call(o,o.props),o.fezRender(),o._isInitializing=!1,o.onMount(o.props),o.onSubmit){let a=o.root.nodeName==="FORM"?o.root:o.find("form");a&&(a.onsubmit=d=>{d.preventDefault(),o.onSubmit(o.formData())})}if(o.onPropsChange){mt.observe(n,{attributes:!0});for(let[a,d]of Object.entries(o.props))o.onPropsChange(a,d)}}var yt={list:{},infoList:{},sourceList:{},get(e){let t=this.list[e],r=this.infoList[e],s=null;t&&(s=document.createElement("div"),s.innerHTML=t);let n=null;return r&&(n=document.createElement("div"),n.innerHTML=r),{info:n,demo:s}},apply(e,t){let r=this.list[e];if(!r||!t)return!1;let s=document.createElement("div");return s.innerHTML=r,s.querySelectorAll(":scope > script").forEach(n=>{let o=n.textContent;if(o.trim())try{new Function(o)()}catch(i){console.error(`Fez.demo.apply("${e}") script error:`,i.message)}n.remove()}),t.innerHTML=s.innerHTML,!0},_executeScripts(e){e.querySelectorAll("script").forEach(r=>{let s=document.createElement("script");Array.from(r.attributes).forEach(n=>{s.setAttribute(n.name,n.value)}),s.textContent=r.textContent,r.parentNode.replaceChild(s,r)})},all(){let e=new Set([...Object.keys(this.list),...Object.keys(this.infoList)]),t={};for(let r of e)t[r]=this.get(r);return t}},F=yt;function Oe(e){let t=e.split(`
`),r=t.filter(n=>n.trim());if(!r.length)return e;let s=Math.min(...r.map(n=>n.match(/^(\s*)/)[1].length));return s===0?e:t.map(n=>n.slice(s)).join(`
`)}function zt(e){if(!e)return!1;let t=e.replace(/<demo>[\s\S]*?<\/demo>/gi,"");return/<(xmp|template)\s+fez\s*=/i.test(t)}function q(e,t){if(arguments.length===1)return le(e);if(zt(t)){if(e){let s=ae(t);s.info?.trim()&&(F.infoList[e]=s.info),s.demo?.trim()&&(F.list[e]=s.demo)}return le(t)}if(e&&!e.includes("-")&&!e.includes(".")&&!e.includes("/")){console.error(`Fez: Invalid name "${e}". Must contain a dash (e.g., 'my-element').`);return}F.sourceList[e]=t;let r=Et(e,ae(t));At(e),St(e,r)}function le(e){if(e instanceof Node){let r=e;r.remove();let s=r.getAttribute("fez");if(s?.includes(".")||s?.includes("/"))return wt(s);if(s&&!s.includes("-")){console.error(`Fez: Invalid name "${s}". Must contain a dash.`);return}return q(s,r.innerHTML)}(e?Fez.domRoot(e):document.body).querySelectorAll("template[fez], xmp[fez]").forEach(r=>le(r))}function wt(e){if(Fez.consoleLog(`Loading from ${e}`),e.endsWith(".txt")){Fez.head({fez:e});return}Fez.fetch(e).then(t=>{let s=new DOMParser().parseFromString(t,"text/html").querySelectorAll("template[fez], xmp[fez]");if(s.length>0){let n=e.split("/").pop().split(".")[0],o=ae(t);o.info?.trim()&&(F.infoList[n]=o.info),o.demo?.trim()&&(F.list[n]=o.demo),s.forEach(i=>{let a=i.getAttribute("fez");if(a&&!a.includes("-")&&!a.includes(".")&&!a.includes("/")){console.error(`Fez: Invalid name "${a}". Must contain a dash.`);return}q(a,i.innerHTML)})}else{let n=e.split("/").pop().split(".")[0];q(n,t)}}).catch(t=>{Fez.onError("compile",`Load error for "${e}": ${t.message}`)})}function ae(e){let t={script:"",style:"",html:"",head:"",demo:"",info:""},r=e.split(`
`),s=[],n="";for(let o of r){let i=o.trim();i.startsWith("<demo")&&!t.demo&&!n?n="demo":i.startsWith("<info")&&!t.info&&!n?n="info":i.startsWith("<script")&&!t.script&&n!=="head"&&n!=="demo"&&n!=="info"?n="script":i.startsWith("<head")&&!t.script&&n!=="demo"&&n!=="info"?n="head":i.startsWith("<style")&&n!=="demo"&&n!=="info"?n="style":i.endsWith("</demo>")&&n==="demo"?(t.demo=Oe(s.join(`
`)),s=[],n=""):i.endsWith("</info>")&&n==="info"?(t.info=Oe(s.join(`
`)),s=[],n=""):i.endsWith("<\/script>")&&n==="script"&&!t.script?(t.script=s.join(`
`),s=[],n=""):i.endsWith("</style>")&&n==="style"?(t.style=s.join(`
`),s=[],n=""):(i.endsWith("</head>")||i.endsWith("</header>"))&&n==="head"?(t.head=s.join(`
`),s=[],n=""):n?s.push(n==="demo"||n==="info"?o:i):t.html+=i+`
`}return t.head&&vt(t.head),t}function vt(e){let t=Fez.domRoot(e);Array.from(t.children).forEach(r=>{if(r.tagName==="SCRIPT"){let s=document.createElement("script");Array.from(r.attributes).forEach(n=>{s.setAttribute(n.name,n.value)}),s.type||="text/javascript",r.src?document.head.appendChild(s):(s.type.includes("javascript")||s.type==="module")&&(s.textContent=r.textContent,document.head.appendChild(s))}else document.head.appendChild(r.cloneNode(!0))})}function Et(e,t){let r=t.script;if(/class\s+\{/.test(r)||(r=`class {
${r}
}`),String(t.style).includes(":")){let o=Fez.cssMixin(t.style);o=o.includes(":fez")||/(?:^|\s)body\s*\{/.test(o)?o:`:fez {
${o}
}`,r=r.replace(/\}\s*$/,`
  CSS = \`${o}\`
}`)}if(/\w/.test(String(t.html))){let o=t.html.replaceAll("`","&#x60;").replaceAll("$","\\$");r=r.replace(/\}\s*$/,`
  HTML = \`${o}\`
}`)}t.demo?.trim()&&(F.list[e]=t.demo),t.info?.trim()&&(F.infoList[e]=t.info);let[s,n]=r.split(/class\s+\{/,2);return`${s};

window.Fez('${e}', class {
${n})`}function St(e,t){if(t.includes("import "))Fez.head({script:t}),setTimeout(()=>{Fez.classes[e]||Fez.consoleError(`Template "${e}" possible compile error.`)},2e3);else try{new Function(t)()}catch(r){Fez.consoleError(`Template "${e}" compile error: ${r.message}`),console.log(t)}}function At(e){if(!e)return;let t=document.getElementById("fez-hidden-styles");t||(t=document.createElement("style"),t.id="fez-hidden-styles",document.head.appendChild(t));let r=[...Object.keys(Fez.classes),e].sort().join(", ");t.textContent=`${r} { display: none; }
`}var $t={data:{},listeners:new Map,subscribers:new Map,globalSubscribers:new Set,notify(e,t,r){Fez.consoleLog(`Global state change for ${e}: ${t} (from ${r})`);let s=this.listeners.get(e);s&&s.forEach(o=>{if(o.isConnected)try{o.onGlobalStateChange(e,t,r),o.fezRender()}catch(i){console.error(`Error in component listener for key ${e}:`,i)}else s.delete(o)});let n=this.subscribers.get(e);n&&n.forEach(o=>{try{o(t,r,e)}catch(i){console.error(`Error in subscriber for key ${e}:`,i)}}),this.globalSubscribers.forEach(o=>{try{o(e,t,r)}catch(i){console.error("Error in global subscriber:",i)}})},createProxy(e){return e.addOnDestroy(()=>{for(let[t,r]of this.listeners)r.delete(e);e._globalStateKeys?.clear()}),new Proxy({},{get:(t,r)=>{if(typeof r!="symbol")return e._globalStateKeys||=new Set,e._globalStateKeys.has(r)||(e._globalStateKeys.add(r),this.listeners.has(r)||this.listeners.set(r,new Set),this.listeners.get(r).add(e)),this.data[r]},set:(t,r,s)=>{if(typeof r=="symbol")return!0;let n=this.data[r];return n!==s&&(this.data[r]=s,this.notify(r,s,n)),!0}})},set(e,t){let r=this.data[e];r!==t&&(this.data[e]=t,this.notify(e,t,r))},get(e){return this.data[e]},forEach(e,t){let r=this.listeners.get(e);r&&r.forEach(s=>{s.isConnected?t(s):r.delete(s)})},subscribe(e,t){if(typeof e=="function")return this.globalSubscribers.add(e),()=>this.globalSubscribers.delete(e);{let r=e;return this.subscribers.has(r)||this.subscribers.set(r,new Set),this.subscribers.get(r).add(t),()=>{let s=this.subscribers.get(r);s&&(s.delete(t),s.size===0&&this.subscribers.delete(r))}}}},ke=$t;var J=()=>globalThis.localStorage||window.localStorage;function Tt(e,t){try{J().setItem(e,JSON.stringify(t))}catch(r){console.error(`Fez localStorage: Failed to set "${e}"`,r)}}function Ct(e,t=null){try{let r=J().getItem(e);return r===null?t:JSON.parse(r)}catch(r){return console.error(`Fez localStorage: Failed to get "${e}"`,r),t}}function Lt(e){J().removeItem(e)}function _t(){J().clear()}var De={set:Tt,get:Ct,remove:Lt,clear:_t};function ce(e,t,r){e._awaitStates||=new Map;let s=e._awaitStates.get(t);if(!r||typeof r.then!="function")return{status:"resolved",value:r,error:null};if(s&&s.promise===r)return s;let n={status:"pending",value:null,error:null,promise:r};return e._awaitStates.set(t,n),r.then(o=>{let i=e._awaitStates.get(t);i&&i.promise===r&&(i.status="resolved",i.value=o,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}).catch(o=>{let i=e._awaitStates.get(t);i&&i.promise===r&&(i.status="rejected",i.error=o,e.isConnected&&e.fezNextTick(e.fezRender,"fezRender"))}),n}var Pe=e=>{e.head=(n,o)=>{if(n.nodeName){n.nodeName=="SCRIPT"?(e.head({script:n.innerText}),n.remove()):(n.querySelectorAll("script").forEach(b=>e.head(b)),n.querySelectorAll("template[fez], xmp[fez], script[fez]").forEach(b=>e.compile(b)));return}if(typeof n!="object"||n===null)throw new Error("head requires an object parameter");let i,a={},d;if(n.fez){let b=n.fez;if(b.endsWith(".txt")){e.fetch(b).then(S=>{let R=b.substring(0,b.lastIndexOf("/")+1),z=S.split(`
`).map(g=>g.trim()).filter(g=>g&&!g.startsWith("#")),C=0,w=z.length;z.forEach(g=>{let L;if(g.startsWith("/"))L=g;else{let I=g.endsWith(".fez")?g:g+".fez";L=R+I}let _=L.split("/").pop().split(".")[0];e.fetch(L).then(I=>{e.compile(_,I),C++,C===w&&o&&o()})})});return}e.fetch(b).then(S=>{let R=b.split("/").pop().split(".")[0];e.compile(R,S),o&&o()});return}if(n.script){if(n.script.includes("import ")){o&&e.consoleError("Fez.head callback is not supported when script with import is passed (module context).");let b=document.createElement("script");b.type="module",b.textContent=n.script,document.head.appendChild(b),requestAnimationFrame(()=>b.remove())}else try{new Function(n.script)(),o&&o()}catch(b){e.consoleError("Error executing script:",b),console.log(n.script)}return}else if(n.js){i=n.js,d="script";for(let[b,S]of Object.entries(n))b!=="js"&&b!=="module"&&(a[b]=S);n.module&&(a.type="module")}else if(n.css){i=n.css,d="link",a.rel="stylesheet";for(let[b,S]of Object.entries(n))b!=="css"&&(a[b]=S)}else throw new Error('head requires either "script", "js" or "css" property');let u=document.querySelector(`${d}[src="${i}"], ${d}[href="${i}"]`);if(u)return o&&o(),u;let p=document.createElement(d);d==="link"?p.href=i:p.src=i;for(let[b,S]of Object.entries(a))p.setAttribute(b,S);return(o||n.module)&&(p.onload=()=>{n.module&&d==="script"&&import(i).then(b=>{window[n.module]=b.default||b[n.module]||b}).catch(b=>{console.error(`Error importing module ${n.module}:`,b)}),o&&o()}),document.head.appendChild(p),p};let t=5*60*1e3,r=100;e.fetch=function(...n){e._fetchCache||=new Map;let o="GET",i,a;typeof n[0]=="string"&&/^[A-Z]+$/.test(n[0])&&(o=n.shift()),i=n.shift();let d={},u=null;if(typeof n[0]=="object"&&(u=n.shift()),typeof n[0]=="function"&&(a=n.shift()),u){if(o==="GET"){let z=new URLSearchParams(u);i+=(i.includes("?")?"&":"?")+z.toString()}else if(o==="POST"){let z=new FormData;for(let[C,w]of Object.entries(u))z.append(C,w);d.body=z}}d.method=o;let p=`${o}:${i}:${JSON.stringify(d)}`,b=e._fetchCache.get(p);if(b&&Date.now()-b.timestamp<t){if(e.consoleLog(`fetch cache hit: ${o} ${i}`),a){a(b.data);return}return Promise.resolve(b.data)}e.consoleLog(`fetch live: ${o} ${i}`);let S=z=>z.headers.get("content-type")?.includes("application/json")?z.json():z.text(),R=(z,C)=>{if(e._fetchCache.size>=r){let w=e._fetchCache.keys().next().value;e._fetchCache.delete(w)}e._fetchCache.set(z,{data:C,timestamp:Date.now()})};if(a){fetch(i,d).then(S).then(z=>{R(p,z),a(z)}).catch(z=>e.onError("fetch",z));return}return fetch(i,d).then(S).then(z=>(R(p,z),z))},e.clearFetchCache=()=>{e._fetchCache?.clear()},e.darkenColor=(n,o=20)=>{let i=parseInt(n.replace("#",""),16),a=Math.round(2.55*o),d=(i>>16)-a,u=(i>>8&255)-a,p=(i&255)-a;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(u<255?u<1?0:u:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.lightenColor=(n,o=20)=>{let i=parseInt(n.replace("#",""),16),a=Math.round(2.55*o),d=(i>>16)+a,u=(i>>8&255)+a,p=(i&255)+a;return"#"+(16777216+(d<255?d<1?0:d:255)*65536+(u<255?u<1?0:u:255)*256+(p<255?p<1?0:p:255)).toString(16).slice(1)},e.htmlEscape=n=>typeof n=="string"?n.replace(/font-family\s*:\s*(?:&[^;]+;|[^;])*?;/gi,"").replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;"):n===void 0?"":n,e.domRoot=(n,o="div")=>{if(n instanceof Node)return n;{let i=document.createElement(o);return i.innerHTML=n,i}},e.activateNode=(n,o="active")=>{!n||!n.parentElement||(Array.from(n.parentElement.children).forEach(i=>{i.classList.remove(o)}),n.classList.add(o))},e.isTrue=n=>["1","true","on"].includes(String(n).toLowerCase()),e.UID=111,e.uid=()=>"fez_uid_"+(++e.UID).toString(32),e.POINTER_SEQ=0,e.POINTER={},e.pointer=(n,o={})=>{if(typeof n=="function"){let i=++e.POINTER_SEQ;return o.persist?e.POINTER[i]=n:e.POINTER[i]=(...a)=>{let d=n(...a);return delete e.POINTER[i],d},`Fez.POINTER[${i}]`}},e.clearPointers=()=>{e.POINTER={}},e.getFunction=n=>{if(n){if(typeof n=="function")return n;if(typeof n=="string"){let o=/^\s*\(?\s*\w+(\s*,\s*\w+)*\s*\)?\s*=>/,i=/^\s*function\s*\(/;return o.test(n)||i.test(n)?new Function("return "+n)():n.includes(".")&&!n.includes("(")?new Function(`return function() { return ${n}(); }`):new Function(n)}}else return()=>{}},e.onReady=n=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{n()},{once:!0}):n()},e.fnv1=n=>{var o,i,a,d,u,p;for(o=2166136261,i=16777619,a=o,d=u=0,p=n.length-1;0<=p?u<=p:u>=p;d=0<=p?++u:--u)a^=n.charCodeAt(d),a*=i;return a.toString(36).replaceAll("-","")},e.tag=(n,o={},i="")=>{let a=encodeURIComponent(JSON.stringify(o));return`<${n} data-props="${a}">${i}</${n}>`},e.untilTrue=(n,o)=>{o||=200,n()||setTimeout(()=>{e.untilTrue(n,o)},o)};let s=200;e.throttle=(n,o=s)=>{let i=0,a;return function(...d){let u=Date.now();u-i>=o?(n.apply(this,d),i=u):(clearTimeout(a),a=setTimeout(()=>{n.apply(this,d),i=Date.now()},o-(u-i)))}},e.toPairs=n=>Array.isArray(n)?n.map((o,i)=>[o,i]):n&&typeof n=="object"?Object.entries(n):[],e.typeof=n=>{if(n==null)return"u";if(Array.isArray(n))return"a";let o=typeof n;return o==="function"?"f":o==="string"?"s":o==="number"?Number.isInteger(n)?"i":"n":o==="object"?"o":o[0]}};var He={},je=e=>{e.cssMixin=(t,r)=>{if(r)He[t]=r;else return Object.entries(He).forEach(([s,n])=>{t=t.replaceAll(`:${s} `,`${n} `),t=t.replaceAll(`@include ${s} `,`${n} `)}),t},e.cssMixin("mobile","@media (max-width: 767px)"),e.cssMixin("tablet","@media (min-width: 768px) and (max-width: 1023px)"),e.cssMixin("desktop","@media (min-width:  1200px)")};var v=(e,t)=>{if(typeof e=="number"){let s=v.instances.get(e);if(s)return s;v.consoleError(`Instance with UID "${e}" not found.`);return}if(!e){v.consoleError("Fez() ?");return}if(t){if(typeof t=="function"&&!/^\s*class/.test(t.toString())&&!/\b(this|new)\b/.test(t.toString())){let n=Array.from(document.querySelectorAll(`.fez.fez-${e}`)).filter(o=>o.fez);return n.forEach(o=>t(o.fez)),n}return typeof t!="function"?v.find(e,t):ie(e,t)}let r=e.nodeName?e.closest(".fez"):document.querySelector(e.includes("#")?e:`.fez.fez-${e}`);if(!r){v.consoleError(`node "${e}" not found.`);return}if(!r.fez){v.consoleError(`node "${e}" has no Fez attached.`);return}return r.fez};v.classes={};v.instanceCount=0;v.instances=new Map;v.demo=F;v.find=(e,t)=>{let r=typeof e=="string"?document.body.querySelector(e):e;typeof r.val=="function"&&(r=r[0]);let s=t?`.fez.fez-${t}`:".fez",n=r.closest(s);if(n?.fez)return n.fez;v.onError("find","Node connector not found",{original:e,resolved:r})};v.info=()=>console.log("Fez components:",Object.keys(v.classes||{}));v.cssClass=e=>{try{return _e.css(e)}catch{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return"fez-"+Math.abs(t).toString(36)}};v.globalCss=(e,t={})=>{if(typeof e=="function"&&(e=e()),e.includes(":")){let r=e.split(`
`).filter(s=>!/^\s*\/\//.test(s)).join(`
`);t.wrap&&(r=`:fez { ${r} }`),r=r.replace(/\:fez|\:host/,`.fez.fez-${t.name}`),e=v.cssClass(r)}return v.onReady(()=>document.body.parentElement.classList.add(e)),e};function It(e,t){if(e===t)return!0;if(!e||!t)return!1;let r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(let n of r)if(e[n]!==t[n])return!1;return!0}v.morphdom=(e,t)=>{Array.from(e.attributes).forEach(s=>{t.setAttribute(s.name,s.value)}),Ie.morph(e,t,{morphStyle:"outerHTML",ignoreActiveValue:!0,callbacks:{beforeNodeMorphed:(s,n)=>{if(s!==e&&s.classList?.contains("fez")&&s.fez&&!s.fez._destroyed){v.consoleLog(`Preserving child component ${s.fez.fezName} (UID ${s.fez.UID})`);let o=v.classes[s.fez.fezName]?.getProps?.(n,s)||{},i=s.fez.props||{};return It(i,o)||(s.fez.props=o,s.fez.onPropsChange?.(o,i),s.fez.fezNextTick(s.fez.fezRender,"fezRender")),!1}return!0},beforeNodeRemoved:s=>(s.classList?.contains("fez")&&s.fez&&s.fez.fezOnDestroy(),!0)}});let r=e.nextSibling;r?.nodeType===Node.TEXT_NODE&&!r.textContent.trim()&&r.remove()};v.subscribe=ve;v.publish=Ee;v.localStorage=De;v.fezAwait=ce;v.consoleError=(e,t)=>{if(e=`Fez: ${e}`,console.error(e),t)return`<span style="border: 1px solid red; font-size: 14px; padding: 3px 7px; background: #fee; border-radius: 4px;">${e}</span>`};v.consoleLog=e=>{v.LOG&&console.log(`Fez: ${String(e).substring(0,180)}`)};v.onError=(e,t,r)=>{let s=`Fez ${e}: ${t?.toString?.()||t}`;return console.error(s,r||""),s};Pe(v);je(v);v.compile=q;v.createTemplate=B;v.state=ke;v.log=Me;v.highlightAll=Fe;v.onReady(()=>v.consoleLog("Fez.LOG === true, logging enabled."));var W=v;typeof window<"u"&&(window.FezBase=k,window.Fez=W);Promise.resolve().then(()=>We());var Mt=new MutationObserver(e=>{for(let{addedNodes:t,removedNodes:r}of e)t.forEach(s=>{s.nodeType===1&&(s.matches?.("template[fez], xmp[fez], script[fez]")&&(W.compile(s),s.remove()),s.querySelectorAll?.("template[fez], xmp[fez], script[fez]").forEach(n=>{W.compile(n),n.remove()}))}),r.forEach(s=>{if(s.nodeType!==1)return;let n=o=>{o.fez&&!o.fez._destroyed&&queueMicrotask(()=>{!o.isConnected&&o.fez&&!o.fez._destroyed&&(W.instances.delete(o.fez.UID),o.fez.fezOnDestroy())})};n(s),s.querySelectorAll?.(".fez")?.forEach(n)})});Mt.observe(document.documentElement,{childList:!0,subtree:!0});var Lr=W;})();
//# sourceMappingURL=fez.js.map
