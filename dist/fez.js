(()=>{var He=Object.defineProperty;var xe=(e,r)=>()=>(e&&(r=e(e=0)),r);var Be=(e,r)=>{for(var t in r)He(e,t,{get:r[t],enumerable:!0})};var Le={};Be(Le,{loadDefaults:()=>Ce});var Ce,Me=xe(()=>{Ce=()=>{Fez("fez-component",class{init(e){let r=document.createElement(e.name);for(r.props=e.props||e["data-props"]||e;this.root.firstChild;)this.root.parentNode.insertBefore(this.root.lastChild,r.nextSibling);this.root.innerHTML="",this.root.appendChild(r)}}),Fez("fez-include",class{init(e){Fez.fetch(e.src,r=>{let t=Fez.domRoot(r);Fez.head(t),this.root.innerHTML=t.innerHTML})}}),Fez("fez-inline",class{init(e){let r=this.root?.innerHTML?.trim();r&&(this.root.innerHTML="",this.fezHtmlFunc=Fez.createTemplate(r,{name:"fez-inline"})),e.state&&Object.assign(this.state,e.state)}}),Fez("fez-if",class{init(e){new Function(`return (${e.if||e.test})`)()||this.root.remove()}})};typeof Fez<"u"&&Fez&&Ce()});function Z(e,r={},t){if(typeof r=="string"&&([r,t]=[t,r],r||={}),r instanceof Node&&(t=r,r={}),Array.isArray(e)&&(t=e,e="div"),(typeof r!="object"||Array.isArray(r))&&(t=r,r={}),e.includes(".")){let n=e.split(".");e=n.shift()||"div";let o=n.join(" ");r.class?r.class+=` ${o}`:r.class=o}let s=document.createElement(e);for(let[n,o]of Object.entries(r))if(typeof o=="function")s[n]=o.bind(this);else{let i=String(o).replaceAll("fez.",this.fezHtmlRoot);s.setAttribute(n,i)}if(t)if(Array.isArray(t))for(let n of t)s.appendChild(n);else t instanceof Node?s.appendChild(t):s.innerHTML=String(t);return s}function X(e){if(e.startsWith("[")){let s=e.match(/^\[([^\]]+)\](?:\s*,\s*(\w+))?$/);if(s)return{params:s[1].split(",").map(n=>n.trim()),indexParam:s[2]||null,isDestructured:!0}}return{params:e.split(",").map(s=>s.trim()),indexParam:null,isDestructured:!1}}function qe(e){let r=X(e),t=[...r.params];return r.indexParam&&t.push(r.indexParam),r.params.length===1&&!t.includes("i")&&t.push("i"),t}function Ge(e,r){let t=X(r);return t.isDestructured||t.params.length>=3?`((_c)=>Array.isArray(_c)?_c:(_c&&typeof _c==="object")?Object.entries(_c):[])(${e})`:`(${e}||[])`}function We(e){let r=X(e);if(r.isDestructured){let s="["+r.params.join(", ")+"]",n=r.indexParam||(r.params.includes("i")?"_i":"i");return s+", "+n}if(r.params.length>=3){let s=[...r.params],n=s.pop();return"["+s.join(", ")+"], "+n}if(r.params.length===2)return r.params.join(", ");let t=r.params[0]==="i"?"_i":"i";return r.params[0]+", "+t}function Ue(e){return/^\s*(\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>/.test(e)}function Ve(e,r=[]){let t=e.match(/^\s*(?:\([^)]*\)|[a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*(.+)$/s);if(!t)return e;let s=t[1].trim(),o=e.match(/^\s*\(?\s*([a-zA-Z_$][a-zA-Z0-9_$]*)?\s*(?:,\s*[^)]+)?\)?\s*=>/)?.[1];if(o&&["e","event","ev"].includes(o)&&o!=="event"){let c=new RegExp(`\\b${o}\\b`,"g");s=s.replace(c,"event")}for(let c of r){let u=new RegExp(`(?<!\\$\\{)\\b${c}\\b(?![^{]*\\})`,"g");s=s.replace(u,`\${${c}}`)}return s=s.replace(/(?<![.\w])([a-zA-Z_$][a-zA-Z0-9_$]*)\s*\(/g,(c,u)=>["console","window","document","Math","JSON","Date","Array","Object","String","Number","Boolean","parseInt","parseFloat","setTimeout","setInterval","clearTimeout","clearInterval","alert","confirm","prompt","fetch","event"].includes(u)?c:`fez.${u}(`),s}function Ze(e,r){let t=0,s=r;for(;s<e.length;){let n=e[s];if(n==="{")t++;else if(n==="}"){if(t--,t===0)return{expression:e.slice(r+1,s),endIndex:s}}else if(n==='"'||n==="'"||n==="`"){let o=n;for(s++;s<e.length&&e[s]!==o;)e[s]==="\\"&&s++,s++}s++}throw new Error(`Unmatched brace at ${r}`)}function ie(e,r){let t=r-1;for(;t>=0&&(e[t]==="{"||e[t]===" "||e[t]==="	");)t--;if(t>=0&&e[t]==="="){for(t--;t>=0&&(e[t]===" "||e[t]==="	");)t--;let s=t+1;for(;t>=0&&/[a-zA-Z0-9_:-]/.test(e[t]);)t--;let n=e.slice(t+1,s);if(n&&/^[a-zA-Z]/.test(n))return n.toLowerCase()}return null}function Xe(e,r){let t=ie(e,r);return t&&/^on[a-z]+$/.test(t)?t:null}function J(e,r={}){let t=r.name||"unknown";try{e=e.replaceAll("&#x60;","`").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&");let s={};e=e.replace(/\{@block\s+(\w+)\}([\s\S]*?)\{\/block\}/g,(b,S,v)=>(s[S]=v,"")),e=e.replace(/\{@block:(\w+)\}/g,(b,S)=>s[S]||""),e=e.replace(/:(\w+)="([^"{}]+)"/g,(b,S,v)=>/^[\w.[\]]+$/.test(v.trim())?`:${S}={\`Fez(\${UID}).fezGlobals.delete(\${fez.fezGlobals.set(${v})})\`}`:b),e=e.replace(/<!--[\s\S]*?-->/g,""),e=e.replace(/>\s+</g,"><").trim(),e=e.replace(/<([a-z][a-z0-9]*-[a-z0-9-]*)([^>]*?)\s*\/>/gi,"<$1$2></$1>"),e=e.replace(/<slot\s*\/>/gi,"<slot></slot>");let n="",o=0,i=[],c=[],u=[];for(;o<e.length;){if(e[o]==="`"){for(n+="\\`",o++;o<e.length&&e[o]!=="`";)if(e[o]==="\\")n+="\\\\",o++,o<e.length&&(e[o]==="`"?n+="\\`":e[o]==="$"?n+="\\$":n+=e[o],o++);else if(e[o]==="$"&&e[o+1]==="{"){n+="\\${",o+=2;let b=1;for(;o<e.length&&b>0;)e[o]==="{"?b++:e[o]==="}"&&b--,b>0||e[o]!=="}"?e[o]==="`"?n+="\\`":e[o]==="\\"?n+="\\\\":n+=e[o]:n+="}",o++}else e[o]==="$"?n+="\\$":n+=e[o],o++;o<e.length&&(n+="\\`",o++);continue}if(e[o]==="\\"&&e[o+1]==="{"){n+="{",o+=2;continue}if(e[o]==="{"){let{expression:b,endIndex:S}=Ze(e,o),v=b.trim();if(/^(\w+|"\w+"|'\w+')\s*:/.test(v)){n+="{"+b+"}",o=S+1;continue}if(v.startsWith("#if ")){let y=v.slice(4);n+="${("+y+") ? `",i.push(!1)}else if(v.startsWith("#unless ")){let y=v.slice(8);n+="${!("+y+") ? `",i.push(!1)}else if(v===":else")if(u.length>0&&!i.length){let y=u[u.length-1];y.hasElse=!0,n+='`).join("") : `'}else n+="` : `",i[i.length-1]=!0;else if(v.startsWith(":else if ")){let y=v.slice(9);n+="` : ("+y+") ? `"}else if(v==="/if"||v==="/unless"){let y=i.pop();n+=y?"`}":"` : ``}"}else if(v.startsWith("#each ")||v.startsWith("#for ")){let y=v.startsWith("#each "),C,T;if(y){let L=v.slice(6),N=L.indexOf(" as ");C=L.slice(0,N).trim(),T=L.slice(N+4).trim()}else{let L=v.slice(5),N=L.indexOf(" in ");T=L.slice(0,N).trim(),C=L.slice(N+4).trim()}let q=Ge(C,T),j=We(T);c.push(qe(T)),u.push({collectionExpr:q,hasElse:!1}),n+="${((_arr) => _arr.length ? _arr.map(("+j+") => `"}else if(v==="/each"||v==="/for"){c.pop();let y=u.pop();y.hasElse?n+="`)("+y.collectionExpr+")}":n+='`).join("") : "")('+y.collectionExpr+")}"}else if(v.startsWith("@html ")){let y=v.slice(6);n+="${"+y+"}"}else if(v.startsWith("@json ")){let y=v.slice(6);n+='${`<pre class="json">${Fez.htmlEscape(JSON.stringify('+y+", null, 2))}</pre>`}"}else if(Ue(v))if(Xe(e,o)){let C=c.flat(),T=Ve(v,C);T=T.replace(/"/g,"&quot;"),n+='"'+T+'"'}else n+="${"+v+"}";else ie(e,o)?n+='"${Fez.htmlEscape('+v+')}"':n+="${Fez.htmlEscape("+v+")}";o=S+1;continue}e[o]==="$"&&e[o+1]==="{"?n+="\\$":e[o]==="\\"?n+="\\\\":n+=e[o],o++}let h=`
      const fez = this;
      with (this) {
        return \`${n}\`
      }
    `,m=new Function(h);return b=>{try{return m.bind(b)()}catch(S){return console.error(`FEZ svelte template runtime error in <${b.fezName||t}>:`,S.message),console.error("Template source:",n.substring(0,500)),""}}}catch(s){return console.error(`FEZ svelte template compile error in <${t}>:`,s.message),console.error("Template:",e.substring(0,200)),()=>""}}var K=new Map;function k(e,r={}){if(K.has(e))return K.get(e);Je(e)&&(e=Ke(e,r.name));let t=J(e,r);return K.set(e,t),t}function Je(e){return e.includes("{{")&&e.includes("}}")||e.includes("[[")&&e.includes("]]")}function Ke(e,r){return e=e.replaceAll("[[","{{").replaceAll("]]","}}"),e=e.replace(/\{\{block\s+(\w+)\s*\}\}/g,"{@block $1}"),e=e.replace(/\{\{\/block\}\}/g,"{/block}"),e=e.replace(/\{\{block:([\w\-]+)\s*\}\}/g,"{@block:$1}"),e=e.replace(/\{\{#?if\s+(.*?)\}\}/g,"{#if $1}"),e=e.replace(/\{\{\/if\}\}/g,"{/if}"),e=e.replace(/\{\{#?unless\s+(.*?)\}\}/g,"{#unless $1}"),e=e.replace(/\{\{\/unless\}\}/g,"{/unless}"),e=e.replace(/\{\{:?else\}\}/g,"{:else}"),e=e.replace(/\{\{#?for\s+(.*?)\}\}/g,"{#for $1}"),e=e.replace(/\{\{\/for\}\}/g,"{/for}"),e=e.replace(/\{\{#?each\s+(.*?)\}\}/g,"{#each $1}"),e=e.replace(/\{\{\/each\}\}/g,"{/each}"),e=e.replace(/\{\{#?(?:raw|html)\s+(.*?)\}\}/g,"{@html $1}"),e=e.replace(/\{\{json\s+(.*?)\}\}/g,"{@json $1}"),e=e.replace(/\{\{\s*(.*?)\s*\}\}/g,"{$1}"),r&&console.warn(`Fez component "${r}" uses old {{ ... }} notation, converting.`),e}var G=new Map,I={};function le(e,r,t){let s=null,n=null,o;typeof r=="function"?(o=e,t=r):(o=r,typeof e=="string"?s=e:n=e),G.has(o)||G.set(o,new Set);let i=G.get(o);for(let u of i)u.callback===t&&u.selector===s&&u.node===n&&i.delete(u);let c={selector:s,node:n,callback:t};return i.add(c),()=>i.delete(c)}function ae(e,...r){let t=G.get(e);if(t)for(let s of t){let n=null;if(s.selector){if(n=document.querySelector(s.selector),!n)continue}else if(s.node){if(!s.node.isConnected){t.delete(s);continue}n=s.node}try{s.callback.call(n,...r)}catch(o){console.error(`Fez pubsub error on "${e}":`,o)}}I[e]&&I[e].forEach(([s,n])=>{s.isConnected&&n.bind(s)(...r)})}function ce(e,r,t){return I[r]||=[],I[r]=I[r].filter(([s])=>s.isConnected),I[r].push([e,t]),()=>{I[r]=I[r].filter(([s,n])=>!(s===e&&n===t))}}function fe(e,r,...t){let s=o=>{if(I[r]){let i=I[r].find(([c])=>c===o);if(i)return i[1].bind(o)(...t),!0}return!1};if(s(e))return!0;let n=e.root?.parentElement;for(;n;){if(n.fez&&s(n.fez))return!0;n=n.parentElement}return!1}var O=class{static nodeName="div";static getProps(r,t){let s={};if(r.props)return r.props;for(let n of r.attributes)s[n.name]=n.value;for(let[n,o]of Object.entries(s))if([":"].includes(n[0])){delete s[n];try{let i=new Function(`return (${o})`).bind(t)();s[n.replace(/[\:_]/,"")]=i}catch(i){Fez.onError("attr",`<${r.tagName.toLowerCase()}> Error evaluating ${n}="${o}": ${i.message}`)}}if(s["data-props"]){let n=s["data-props"];if(typeof n=="object")return n;n[0]!="{"&&(n=decodeURIComponent(n));try{s=JSON.parse(n)}catch(o){Fez.onError("props",`<${r.tagName.toLowerCase()}> Invalid JSON in data-props: ${o.message}`)}}else if(s["data-json-template"]){let n=t.previousSibling?.textContent;if(n)try{s=JSON.parse(n),t.previousSibling.remove()}catch(o){Fez.onError("props",`<${r.tagName.toLowerCase()}> Invalid JSON in template: ${o.message}`)}}return s}static formData(r){let t=r.closest("form")||r.querySelector("form");if(!t)return Fez.consoleLog("No form found for formData()"),{};let s=new FormData(t),n={};return s.forEach((o,i)=>{n[i]=o}),n}constructor(){}n=Z;fezBlocks={};fezGlobals={_data:new Map,_counter:0,set(r){let t=this._counter++;return this._data.set(t,r),t},delete(r){let t=this._data.get(r);return this._data.delete(r),t}};fezError(r,t,s){let n=this.fezName||this.root?.tagName?.toLowerCase()||"unknown";return Fez.onError(r,`<${n}> ${t}`,s)}get fezHtmlRoot(){return`Fez(${this.UID}).`}get isConnected(){return!!this.root?.isConnected}prop(r){let t=this.oldRoot[r]||this.props[r];return typeof t=="function"&&(t=t.bind(this.root)),t}connect(){}onMount(){}beforeRender(){}afterRender(){}onDestroy(){}onStateChange(){}onGlobalStateChange(){}onPropsChange(){}fezOnDestroy(){this._destroyed||(this._destroyed=!0,this._onDestroyCallbacks&&(this._onDestroyCallbacks.forEach(r=>{try{r()}catch(t){this.fezError("destroy","Error in cleanup callback",t)}}),this._onDestroyCallbacks=[]),this.onDestroy(),this.onDestroy=()=>{},this.root&&(this.root.fez=void 0),this.root=void 0)}addOnDestroy(r){this._onDestroyCallbacks=this._onDestroyCallbacks||[],this._onDestroyCallbacks.push(r)}fezParseHtml(r){let t=this.fezHtmlRoot.replaceAll('"',"&quot;");return r=r.replace(/([!'"\s;])fez\.(\w)/g,`$1${t}$2`).replace(/>\s+</g,"><"),r.trim()}fezNextTick(r,t){t?(this._nextTicks||={},this._nextTicks[t]||=window.requestAnimationFrame(()=>{r.bind(this)(),this._nextTicks[t]=null},t)):window.requestAnimationFrame(r.bind(this))}fezRefresh(){this.fezNextTick(()=>this.fezRender(),"refresh")}refresh(){this.fezRefresh()}fezRender(r){if(r||=this.fezHtmlFunc||this?.class?.fezHtmlFunc,!r||!this.root)return;this._isRendering=!0,this.beforeRender();let t=typeof this.class.nodeName=="function"?this.class.nodeName(this.root):this.class.nodeName,s=document.createElement(t||"div"),n;if(Array.isArray(r))r[0]instanceof Node?r.forEach(o=>s.appendChild(o)):n=r.join("");else if(typeof r=="string"){let o=this.root?.tagName?.toLowerCase();n=k(r,{name:o})(this)}else typeof r=="function"&&(n=r(this));n&&(n instanceof DocumentFragment||n instanceof Node?s.appendChild(n):(n=n.replace(/\s\w+="undefined"/g,""),s.innerHTML=this.fezParseHtml(n))),this.fezKeepNode(s),Fez.morphdom(this.root,s),this.fezRenderPostProcess(),this.afterRender(),this._isRendering=!1}fezRenderPostProcess(){let r=(t,s)=>{this.root.querySelectorAll(`*[${t}]`).forEach(n=>{let o=n.getAttribute(t);n.removeAttribute(t),o&&s.bind(this)(o,n)})};r("fez-this",(t,s)=>{new Function("n",`this.${t} = n`).bind(this)(s)}),r("fez-use",(t,s)=>{if(t.includes("=>"))Fez.getFunction(t)(s);else if(t.includes("."))Fez.getFunction(t).bind(s)();else{let n=this[t];typeof n=="function"?n(s):this.fezError("fez-use",`"${t}" is not a function`)}}),r("fez-class",(t,s)=>{let n=t.split(/\s+/),o=n.pop();n.forEach(i=>s.classList.add(i)),o&&setTimeout(()=>{s.classList.add(o)},1)}),r("fez-bind",(t,s)=>{if(["INPUT","SELECT","TEXTAREA"].includes(s.nodeName)){let n=new Function(`return this.${t}`).bind(this)(),o=s.type.toLowerCase()=="checkbox",i=["SELECT"].includes(s.nodeName)||o?"onchange":"onkeyup";s.setAttribute(i,`${this.fezHtmlRoot}${t} = this.${o?"checked":"value"}`),this.val(s,n)}else this.fezError("fez-bind",`Can't bind "${t}" to ${s.nodeName} (needs INPUT, SELECT or TEXTAREA)`)}),this.root.querySelectorAll("*[disabled]").forEach(t=>{let s=t.getAttribute("disabled");["false"].includes(s)?t.removeAttribute("disabled"):t.setAttribute("disabled","true")})}fezKeepNode(r){r.querySelectorAll("[fez-keep]").forEach(t=>{let s=t.getAttribute("fez-keep"),n=s==="default-slot"||s.startsWith("slot-"),o;if(n){let i=this.root.querySelectorAll(`[fez-keep="${s}"]`);for(let c of i){let u=c.parentElement,h=!1;for(;u&&u!==this.root;){if(u.classList.contains("fez")){h=!0;break}u=u.parentElement}if(!h){o=c;break}}}else o=this.root.querySelector(`[fez-keep="${s}"]`);if(o)t.parentNode.replaceChild(o,t);else if(n)if(t.getAttribute("hide")){this.state=null;let i=t.parentNode;Array.from(this.root.childNodes).forEach(c=>{i.insertBefore(c,t)}),t.remove()}else Array.from(this.root.childNodes).forEach(c=>{t.appendChild(c)})})}fezRegister(){this.css&&(this.css=Fez.globalCss(this.css,{name:this.fezName,wrap:!0})),this.class.css&&(this.class.css=Fez.globalCss(this.class.css,{name:this.fezName})),this.state||=this.fezReactiveStore(),this.globalState=Fez.state.createProxy(this),this.fezRegisterBindMethods()}fezRegisterBindMethods(){Object.getOwnPropertyNames(Object.getPrototypeOf(this)).filter(t=>t!=="constructor"&&typeof this[t]=="function").forEach(t=>this[t]=this[t].bind(this))}fezReactiveStore(r,t){r||={},t||=(n,o,i,c)=>{i!=c&&(this.onStateChange(o,i,c),this._isRendering||this.fezNextTick(this.fezRender,"fezRender"))},t.bind(this);function s(n,o){return typeof n!="object"||n===null?n:new Proxy(n,{set(i,c,u,h){let m=Reflect.get(i,c,h);if(m!==u){typeof u=="object"&&u!==null&&(u=s(u,o));let b=Reflect.set(i,c,u,h);return o(i,c,u,m),b}return!0},get(i,c,u){let h=Reflect.get(i,c,u);return typeof h=="object"&&h!==null?s(h,o):h}})}return s(r,t)}find(r){return typeof r=="string"?this.root.querySelector(r):r}val(r,t){let s=this.find(r);if(s)if(["INPUT","TEXTAREA","SELECT"].includes(s.nodeName))if(typeof t<"u")s.type=="checkbox"?s.checked=!!t:s.value=t;else return s.value;else if(typeof t<"u")s.innerHTML=t;else return s.innerHTML}formData(r){return this.class.formData(r||this.root)}attr(r,t){return typeof t>"u"?this.root.getAttribute(r):(this.root.setAttribute(r,t),t)}childNodes(r){let t=Array.from(this.root.children);if(r){let s=document.createElement("div");s.style.display="none",document.body.appendChild(s),t.forEach(n=>s.appendChild(n)),t=Array.from(s.children).map(r),document.body.removeChild(s)}return t}setStyle(r,t){r&&typeof r=="object"?Object.entries(r).forEach(([s,n])=>{this.root.style.setProperty(s,n)}):this.root.style.setProperty(r,t)}copy(){for(let r of Array.from(arguments)){let t=this.props[r];if(t!==void 0){if(r=="class"){let s=this.root.getAttribute(r,t);s&&(t=[s,t].join(" "))}typeof t=="string"?this.root.setAttribute(r,t):this.root[r]=t}}}rootId(){return this.root.id||=`fez_${this.UID}`,this.root.id}dissolve(r){r&&(r.classList.add("fez"),r.classList.add(`fez-${this.fezName}`),r.fez=this,this.attr("id")&&r.setAttribute("id",this.attr("id")),this.root.innerHTML="",this.root.appendChild(r));let t=this.root,s=this.childNodes(),n=this.root.parentNode;return s.reverse().forEach(o=>n.insertBefore(o,t.nextSibling)),this.root.remove(),this.root=void 0,r&&(this.root=r),s}on(r,t,s=200){this._eventHandlers=this._eventHandlers||{},this._eventHandlers[r]&&window.removeEventListener(r,this._eventHandlers[r]);let n=Fez.throttle(()=>{this.isConnected&&t.call(this)},s);this._eventHandlers[r]=n,window.addEventListener(r,n),this.addOnDestroy(()=>{window.removeEventListener(r,n),delete this._eventHandlers[r]})}onWindowResize(r,t){this.on("resize",r,t),r()}onWindowScroll(r,t){this.on("scroll",r,t),r()}onElementResize(r,t,s=200){let n=Fez.throttle(()=>{this.isConnected&&t.call(this,r.getBoundingClientRect(),r)},s),o=new ResizeObserver(n);o.observe(r),t.call(this,r.getBoundingClientRect(),r),this.addOnDestroy(()=>{o.disconnect()})}setTimeout(r,t){let s=setTimeout(()=>{this.isConnected&&r()},t);return this.addOnDestroy(()=>clearTimeout(s)),s}setInterval(r,t,s){typeof r=="number"&&([t,r]=[r,t]),s||=Fez.fnv1(String(r)),this._setIntervalCache||={},clearInterval(this._setIntervalCache[s]);let n=setInterval(()=>{this.isConnected&&r()},t);return this._setIntervalCache[s]=n,this.addOnDestroy(()=>{clearInterval(n),delete this._setIntervalCache[s]}),n}publish(r,...t){return fe(this,r,...t)}subscribe(r,t){let s=ce(this,r,t);return this.addOnDestroy(s),s}fezSlot(r,t){t||=document.createElement("template");let s=t.nodeName=="SLOT";for(;r.firstChild;)s?t.parentNode.insertBefore(r.lastChild,t.nextSibling):t.appendChild(r.firstChild);return s?t.parentNode.removeChild(t):r.innerHTML="",t}};var Ye={data:""},de=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ye,Qe=e=>{let r=de(e),t=r.data;return r.data="",t},et=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,tt=/\/\*[^]*?\*\/|  +/g,ue=/\n+/g,F=(e,r)=>{let t="",s="",n="";for(let o in e){let i=e[o];o[0]=="@"?o[1]=="i"?t=o+" "+i+";":s+=o[1]=="f"?F(i,o):o+"{"+F(i,o[1]=="k"?"":r)+"}":typeof i=="object"?s+=F(i,r?r.replace(/([^,])+/g,c=>o.replace(/(^:.*)|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,c):c?c+" "+u:u)):o):i!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=F.p?F.p(o,i):o+":"+i+";")}return t+(r&&n?r+"{"+n+"}":n)+s},_={},pe=e=>{if(typeof e=="object"){let r="";for(let t in e)r+=t+pe(e[t]);return r}return e},rt=(e,r,t,s,n)=>{let o=pe(e),i=_[o]||(_[o]=(u=>{let h=0,m=11;for(;h<u.length;)m=101*m+u.charCodeAt(h++)>>>0;return"go"+m})(o));if(!_[i]){let u=o!==e?e:(h=>{let m,b,S=[{}];for(;m=et.exec(h.replace(tt,""));)m[4]?S.shift():m[3]?(b=m[3].replace(ue," ").trim(),S.unshift(S[0][b]=S[0][b]||{})):S[0][m[1]]=m[2].replace(ue," ").trim();return S[0]})(e);_[i]=F(n?{["@keyframes "+i]:u}:u,t?"":"."+i)}let c=t&&_.g?_.g:null;return t&&(_.g=_[i]),((u,h,m,b)=>{b?h.data=h.data.replace(b,u):h.data.indexOf(u)===-1&&(h.data=m?u+h.data:h.data+u)})(_[i],r,s,c),i},nt=(e,r,t)=>e.reduce((s,n,o)=>{let i=r[o];if(i&&i.call){let c=i(t),u=c&&c.props&&c.props.className||/^go/.test(c)&&c;i=u?"."+u:c&&typeof c=="object"?c.props?"":F(c,""):c===!1?"":c}return s+n+(i??"")},"");function W(e){let r=this||{},t=e.call?e(r.p):e;return rt(t.unshift?t.raw?nt(t,[].slice.call(arguments,1),r.p):t.reduce((s,n)=>Object.assign(s,n&&n.call?n(r.p):n),{}):t,de(r.target),r.g,r.o,r.k)}var he,Y,Q,st=W.bind({g:1}),ot=W.bind({k:1});function it(e,r,t,s){F.p=r,he=e,Y=t,Q=s}function lt(e,r){let t=this||{};return function(){let s=arguments;function n(o,i){let c=Object.assign({},o),u=c.className||n.className;t.p=Object.assign({theme:Y&&Y()},c),t.o=/ *go\d+/.test(u),c.className=W.apply(t,s)+(u?" "+u:""),r&&(c.ref=i);let h=e;return e[0]&&(h=c.as||e,delete c.as),Q&&h[0]&&Q(c),he(h,c)}return r?r(n):n}}var me={css:W,extractCss:Qe,glob:st,keyframes:ot,setup:it,styled:lt};var be=function(){"use strict";let e=new Set,r={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:y,afterNodeAdded:y,beforeNodeMorphed:y,afterNodeMorphed:y,beforeNodeRemoved:y,afterNodeRemoved:y,beforeAttributeUpdated:y},head:{style:"merge",shouldPreserve:function(a){return a.getAttribute("im-preserve")==="true"},shouldReAppend:function(a){return a.getAttribute("im-re-append")==="true"},shouldRemove:y,afterHeadMorphed:y}};function t(a,l,f={}){a instanceof Document&&(a=a.documentElement),typeof l=="string"&&(l=_e(l));let d=Oe(l),p=T(a,d,f);return s(a,d,p)}function s(a,l,f){if(f.head.block){let d=a.querySelector("head"),p=l.querySelector("head");if(d&&p){let g=S(p,d,f);Promise.all(g).then(function(){s(a,l,Object.assign(f,{head:{block:!1,ignore:!0}}))});return}}if(f.morphStyle==="innerHTML")return i(l,a,f),a.children;if(f.morphStyle==="outerHTML"||f.morphStyle==null){let d=Ne(l,a,f),p=d?.previousSibling,g=d?.nextSibling,z=o(a,d,f);return d?Fe(p,z,g):[]}else throw"Do not understand how to morph style "+f.morphStyle}function n(a,l){return l.ignoreActiveValue&&a===document.activeElement&&a!==document.body}function o(a,l,f){if(!(f.ignoreActive&&a===document.activeElement))return l==null?f.callbacks.beforeNodeRemoved(a)===!1?a:(a.remove(),f.callbacks.afterNodeRemoved(a),null):j(a,l)?(f.callbacks.beforeNodeMorphed(a,l)===!1||(a instanceof HTMLHeadElement&&f.head.ignore||(a instanceof HTMLHeadElement&&f.head.style!=="morph"?S(l,a,f):(u(l,a,f),n(a,f)||i(l,a,f))),f.callbacks.afterNodeMorphed(a,l)),a):f.callbacks.beforeNodeRemoved(a)===!1||f.callbacks.beforeNodeAdded(l)===!1?a:(a.parentElement.replaceChild(l,a),f.callbacks.afterNodeAdded(l),f.callbacks.afterNodeRemoved(a),l)}function i(a,l,f){let d=a.firstChild,p=l.firstChild,g;for(;d;){if(g=d,d=g.nextSibling,p==null){if(f.callbacks.beforeNodeAdded(g)===!1)return;l.appendChild(g),f.callbacks.afterNodeAdded(g),R(f,g);continue}if(q(g,p,f)){o(p,g,f),p=p.nextSibling,R(f,g);continue}let z=N(a,l,g,p,f);if(z){p=L(p,z,f),o(z,g,f),R(f,g);continue}let w=Ie(a,l,g,p,f);if(w){p=L(p,w,f),o(w,g,f),R(f,g);continue}if(f.callbacks.beforeNodeAdded(g)===!1)return;l.insertBefore(g,p),f.callbacks.afterNodeAdded(g),R(f,g)}for(;p!==null;){let z=p;p=p.nextSibling,ne(z,f)}}function c(a,l,f,d){return a==="value"&&d.ignoreActiveValue&&l===document.activeElement?!0:d.callbacks.beforeAttributeUpdated(a,l,f)===!1}function u(a,l,f){let d=a.nodeType;if(d===1){let p=a.attributes,g=l.attributes;for(let z of p)if(!c(z.name,l,"update",f))try{l.getAttribute(z.name)!==z.value&&(z.name==="class"?h(a,l):l.setAttribute(z.name,z.value))}catch(w){console.error("Error setting attribute:",{badNode:l,badAttribute:z,error:w.message})}for(let z=g.length-1;0<=z;z--){let w=g[z];c(w.name,l,"remove",f)||a.hasAttribute(w.name)||l.removeAttribute(w.name)}}(d===8||d===3)&&l.nodeValue!==a.nodeValue&&(l.nodeValue=a.nodeValue),n(l,f)||b(a,l,f)}function h(a,l){let f=new Set(a.className.split(/\s+/).filter(Boolean)),d=new Set(l.className.split(/\s+/).filter(Boolean));for(let p of d)f.has(p)||l.classList.remove(p);for(let p of f)d.has(p)||l.classList.add(p)}function m(a,l,f,d){if(a[f]!==l[f]){let p=c(f,l,"update",d);p||(l[f]=a[f]),a[f]?p||l.setAttribute(f,a[f]):c(f,l,"remove",d)||l.removeAttribute(f)}}function b(a,l,f){if(a instanceof HTMLInputElement&&l instanceof HTMLInputElement&&a.type!=="file"){let d=a.value,p=l.value;m(a,l,"checked",f),m(a,l,"disabled",f),a.hasAttribute("value")?d!==p&&(c("value",l,"update",f)||(l.setAttribute("value",d),l.value=d)):c("value",l,"remove",f)||(l.value="",l.removeAttribute("value"))}else if(a instanceof HTMLOptionElement)m(a,l,"selected",f);else if(a instanceof HTMLTextAreaElement&&l instanceof HTMLTextAreaElement){let d=a.value,p=l.value;if(c("value",l,"update",f))return;d!==p&&(l.value=d),l.firstChild&&l.firstChild.nodeValue!==d&&(l.firstChild.nodeValue=d)}}function S(a,l,f){let d=[],p=[],g=[],z=[],w=f.head.style,D=new Map;for(let A of a.children)D.set(A.outerHTML,A);for(let A of l.children){let M=D.has(A.outerHTML),B=f.head.shouldReAppend(A),V=f.head.shouldPreserve(A);M||V?B?p.push(A):(D.delete(A.outerHTML),g.push(A)):w==="append"?B&&(p.push(A),z.push(A)):f.head.shouldRemove(A)!==!1&&p.push(A)}z.push(...D.values());let oe=[];for(let A of z){let M=document.createRange().createContextualFragment(A.outerHTML).firstChild;if(f.callbacks.beforeNodeAdded(M)!==!1){if(M.href||M.src){let B=null,V=new Promise(function(Pe){B=Pe});M.addEventListener("load",function(){B()}),oe.push(V)}l.appendChild(M),f.callbacks.afterNodeAdded(M),d.push(M)}}for(let A of p)f.callbacks.beforeNodeRemoved(A)!==!1&&(l.removeChild(A),f.callbacks.afterNodeRemoved(A));return f.head.afterHeadMorphed(l,{added:d,kept:g,removed:p}),oe}function v(){}function y(){}function C(a){let l={};return Object.assign(l,r),Object.assign(l,a),l.callbacks={},Object.assign(l.callbacks,r.callbacks),Object.assign(l.callbacks,a.callbacks),l.head={},Object.assign(l.head,r.head),Object.assign(l.head,a.head),l}function T(a,l,f){return f=C(f),{target:a,newContent:l,config:f,morphStyle:f.morphStyle,ignoreActive:f.ignoreActive,ignoreActiveValue:f.ignoreActiveValue,idMap:je(a,l),deadIds:new Set,callbacks:f.callbacks,head:f.head}}function q(a,l,f){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName?a.id!==""&&a.id===l.id?!0:x(f,a,l)>0:!1}function j(a,l){return a==null||l==null?!1:a.nodeType===l.nodeType&&a.tagName===l.tagName}function L(a,l,f){for(;a!==l;){let d=a;a=a.nextSibling,ne(d,f)}return R(f,l),l.nextSibling}function N(a,l,f,d,p){let g=x(p,f,l),z=null;if(g>0){let w=d,D=0;for(;w!=null;){if(q(f,w,p))return w;if(D+=x(p,w,a),D>g)return null;w=w.nextSibling}}return z}function Ie(a,l,f,d,p){let g=d,z=f.nextSibling,w=0;for(;g!=null;){if(x(p,g,a)>0)return null;if(j(f,g))return g;if(j(z,g)&&(w++,z=z.nextSibling,w>=2))return null;g=g.nextSibling}return g}function _e(a){let l=new DOMParser,f=a.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(f.match(/<\/html>/)||f.match(/<\/head>/)||f.match(/<\/body>/)){let d=l.parseFromString(a,"text/html");if(f.match(/<\/html>/))return d.generatedByIdiomorph=!0,d;{let p=d.firstChild;return p?(p.generatedByIdiomorph=!0,p):null}}else{let p=l.parseFromString("<body><template>"+a+"</template></body>","text/html").body.querySelector("template").content;return p.generatedByIdiomorph=!0,p}}function Oe(a){if(a==null)return document.createElement("div");if(a.generatedByIdiomorph)return a;if(a instanceof Node){let l=document.createElement("div");return l.append(a),l}else{let l=document.createElement("div");for(let f of[...a])l.append(f);return l}}function Fe(a,l,f){let d=[],p=[];for(;a!=null;)d.push(a),a=a.previousSibling;for(;d.length>0;){let g=d.pop();p.push(g),l.parentElement.insertBefore(g,l)}for(p.push(l);f!=null;)d.push(f),p.push(f),f=f.nextSibling;for(;d.length>0;)l.parentElement.insertBefore(d.pop(),l.nextSibling);return p}function Ne(a,l,f){let d;d=a.firstChild;let p=d,g=0;for(;d;){let z=Re(d,l,f);z>g&&(p=d,g=z),d=d.nextSibling}return p}function Re(a,l,f){return j(a,l)?.5+x(f,a,l):0}function ne(a,l){R(l,a),l.callbacks.beforeNodeRemoved(a)!==!1&&(a.remove(),l.callbacks.afterNodeRemoved(a))}function De(a,l){return!a.deadIds.has(l)}function ke(a,l,f){return(a.idMap.get(f)||e).has(l)}function R(a,l){let f=a.idMap.get(l)||e;for(let d of f)a.deadIds.add(d)}function x(a,l,f){let d=a.idMap.get(l)||e,p=0;for(let g of d)De(a,g)&&ke(a,g,f)&&++p;return p}function se(a,l){let f=a.parentElement,d=a.querySelectorAll("[id]");for(let p of d){let g=p;for(;g!==f&&g!=null;){let z=l.get(g);z==null&&(z=new Set,l.set(g,z)),z.add(p.id),g=g.parentElement}}}function je(a,l){let f=new Map;return se(a,f),se(l,f),f}return{morph:t,defaults:r}}();var at=e=>{let r=e.split(/(<\/?[^>]+>)/g).map(n=>n.trim()).filter(n=>n),t=0,s=[];for(let n=0;n<r.length;n++){let o=r[n],i=r[n+1],c=r[n+2];if(o.startsWith("<"))if(!o.startsWith("</")&&!o.endsWith("/>")&&i&&!i.startsWith("<")&&c&&c.startsWith("</")){let u=Math.max(0,t);s.push("  ".repeat(u)+o+i+c),n+=2}else if(o.startsWith("</")){t--;let u=Math.max(0,t);s.push("  ".repeat(u)+o)}else if(o.endsWith("/>")||o.includes(" />")){let u=Math.max(0,t);s.push("  ".repeat(u)+o)}else{let u=Math.max(0,t);s.push("  ".repeat(u)+o),t++}else if(o){let u=Math.max(0,t);s.push("  ".repeat(u)+o)}}return s.join(`
`)},ee=(()=>{let e=[],r=[],t=0,s=null;document.addEventListener("keydown",i=>{if(i.key==="Escape"){i.preventDefault();let c=document.getElementById("dump-dialog"),u=document.getElementById("log-reopen-button");c?(c.remove(),n()):u&&(u.remove(),o())}else(i.key==="ArrowLeft"||i.key==="ArrowRight"||i.key==="ArrowUp"||i.key==="ArrowDown")&&document.getElementById("dump-dialog")&&e.length>0&&(i.preventDefault(),i.key==="ArrowLeft"&&t>0?(t--,localStorage.setItem("_LOG_INDEX",t),s()):i.key==="ArrowRight"&&t<e.length-1?(t++,localStorage.setItem("_LOG_INDEX",t),s()):i.key==="ArrowUp"&&t>0?(t=Math.max(0,t-5),localStorage.setItem("_LOG_INDEX",t),s()):i.key==="ArrowDown"&&t<e.length-1&&(t=Math.min(e.length-1,t+5),localStorage.setItem("_LOG_INDEX",t),s()))});let n=()=>{let i=document.getElementById("log-reopen-button");i||(i=document.body.appendChild(document.createElement("button")),i.id="log-reopen-button",i.innerHTML='<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:4px"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>LOG',i.style.cssText="position:fixed; top: 10px; right: 10px;padding:10px 20px;background:#ff3333;color:#fff;border:none;cursor:pointer;font:14px/1.4 monospace;z-index:2147483647;border-radius:8px;display:flex;align-items:center;opacity:1;visibility:visible;box-shadow:0 4px 12px rgba(255,51,51,0.3)",i.onclick=()=>{i.remove(),o()})},o=()=>{let i=document.getElementById("dump-dialog");i||(i=document.body.appendChild(document.createElement("div")),i.id="dump-dialog",i.style.cssText="position:fixed; top:20px; left:20px; right:20px; max-height:calc(100vh - 40px);background:#fff; border:1px solid #333; box-shadow:0 0 10px rgba(0,0,0,0.5);padding:20px; overflow:auto; z-index:2147483646; font:13px/1.4 monospace;white-space:pre; display:block; opacity:1; visibility:visible");let c=parseInt(localStorage.getItem("_LOG_INDEX"));!isNaN(c)&&c>=0&&c<e.length?t=c:t=e.length-1,s=()=>{let u=e.map((h,m)=>{let b="#f0f0f0";return m!==t&&(r[m]==="object"?b="#d6e3ef":r[m]==="array"&&(b="#d8d5ef")),`<button style="font-size: 14px; font-weight: 400; padding:2px 6px; margin: 0 2px 2px 0;cursor:pointer;background:${m===t?"#333":b};color:${m===t?"#fff":"#000"}" data-index="${m}">${m+1}</button>`}).join("");i.innerHTML='<div style="display:flex;flex-direction:column;height:100%"><div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px"><div style="display:flex;flex-wrap:wrap;gap:4px;flex:1;margin-right:10px">'+u+'</div><button style="padding:4px 8px;cursor:pointer;flex-shrink:0">&times;</button></div><xmp style="font-family:monospace;flex:1;overflow:auto;margin:0;padding:0;color:#000;background:#fff;font-size:14px;line-height:22px">'+e[t]+"</xmp></div>",i.querySelector('button[style*="flex-shrink:0"]').onclick=()=>{i.remove(),n()},i.querySelectorAll("button[data-index]").forEach(h=>{h.onclick=()=>{t=parseInt(h.dataset.index),localStorage.setItem("_LOG_INDEX",t),s()}})},s()};return i=>{if(!document.body){window.requestAnimationFrame(()=>ee(i));return}let c=typeof i;i instanceof Node&&(i.nodeType===Node.TEXT_NODE?i=i.textContent||String(i):i=at(i.outerHTML)),i===void 0&&(i="undefined"),i===null&&(i="null"),Array.isArray(i)?c="array":typeof i=="object"&&i!==null&&(c="object"),typeof i!="string"&&(i=JSON.stringify(i,(h,m)=>typeof m=="function"?String(m):m,2).replaceAll("<","&lt;")),i=i.trim(),e.push(i+`

type: ${c}`),r.push(c),!!document.getElementById("dump-dialog")?(t=e.length-1,localStorage.setItem("_LOG_INDEX",t),s&&s()):o()}})();typeof window<"u"&&!window.LOG&&(window.LOG=ee);var ge=ee;var ye=()=>{let e=parseInt(window.location.port)||80;if(!(Fez.DEV===!0||e>2999&&Fez.DEV!==!1))return;let r=document.querySelectorAll(".fez-highlight-overlay");if(r.length>0){r.forEach(s=>s.remove());return}document.querySelectorAll(".fez, .svelte").forEach(s=>{let n=null,o=null;if(s.classList.contains("fez")&&s.fez&&s.fez.fezName?(n=s.fez.fezName,o="fez"):s.classList.contains("svelte")&&s.svelte&&s.svelte.svelteName&&(n=s.svelte.svelteName,o="svelte"),n){let i=document.createElement("div");i.className="fez-highlight-overlay";let c=s.getBoundingClientRect(),u=window.pageYOffset||document.documentElement.scrollTop,h=window.pageXOffset||document.documentElement.scrollLeft;i.style.cssText=`
        position: absolute;
        top: ${c.top+u}px;
        left: ${c.left+h}px;
        width: ${c.width}px;
        height: ${c.height}px;
        border: 1px solid ${o==="svelte"?"blue":"red"};
        pointer-events: none;
        z-index: 9999;
      `;let m=document.createElement("div");m.textContent=n,m.style.cssText=`
        position: absolute;
        top: -20px;
        left: 0;
        background: ${o==="svelte"?"blue":"red"};
        color: white;
        padding: 4px 6px 2px 6px;
        font-size: 14px;
        font-family: monospace;
        line-height: 1;
        white-space: nowrap;
        cursor: pointer;
        pointer-events: auto;
        text-transform: uppercase;
      `,m.addEventListener("click",b=>{b.stopPropagation(),Fez.log(s)}),i.appendChild(m),document.body.appendChild(i)}})};document.addEventListener("keydown",e=>{(e.ctrlKey||e.metaKey)&&e.key==="e"&&(e.target.closest("form")||(e.preventDefault(),ye()))});var ze=ye;var ct=new Set(["area","base","br","col","embed","hr","img","input","link","meta","source","track","wbr"]),ft=new MutationObserver(e=>{for(let r of e)if(r.type==="attributes"){let t=r.target.fez;if(t){let s=r.attributeName,n=r.target.getAttribute(s);t.props[s]=n,t.onPropsChange(s,n)}}});function te(e,r){let t=globalThis.window?.Fez||globalThis.Fez;if(!e.includes("-")){console.error(`Fez: Invalid name "${e}". Must contain a dash.`);return}if(r=ut(t,e,r),r.html){let s=r.SLOT||"div";r.html=r.html.replace(/<slot(\s[^>]*)?>/,`<${s} class="fez-slot fez-slot-${e}" fez-keep="slot-${e}"$1>`).replace("</slot>",`</${s}>`),r.fezHtmlFunc=k(r.html,{name:e})}r.css&&(r.css=t.globalCss(r.css,{name:e})),t.classes[e]=r,customElements.get(e)||customElements.define(e,class extends HTMLElement{connectedCallback(){dt(this,r)?ve(e,this):requestAnimationFrame(()=>ve(e,this))}})}function ut(e,r,t){if(t.prototype instanceof O)return t.html&&(t.html=Ee(t.html)),t;let s=new t,n=class extends O{},o=[...Object.getOwnPropertyNames(s),...Object.getOwnPropertyNames(t.prototype)].filter(c=>c!=="constructor"&&c!=="prototype");for(let c of o)n.prototype[c]=s[c];let i={FAST:"FAST",GLOBAL:"GLOBAL",CSS:"css",NAME:"nodeName"};for(let[c,u]of Object.entries(i))s[c]&&(n[u]=s[c]);return s.HTML&&(n.html=Ee(s.HTML)),s.GLOBAL&&e.onReady(()=>document.body.appendChild(document.createElement(r))),e.consoleLog(`${r} compiled`),n}function Ee(e){return e.replace(/<([a-z-]+)\b([^>]*)\/>/g,(r,t,s)=>ct.has(t)?r:`<${t}${s}></${t}>`)}function dt(e,r){let t=e.getAttribute("fez-fast");if(t==="false")return!1;let s=typeof r.FAST=="function"?r.FAST(e):r.FAST;return!!(t||s||e.childNodes[0]||e.nextSibling)}function ve(e,r){if(!r.isConnected||r.classList?.contains("fez"))return;let t=Fez.classes[e],s=typeof t.nodeName=="function"?t.nodeName(r):t.nodeName,n=document.createElement(s||"div");if(n.classList.add("fez",`fez-${e}`),!r.parentNode){console.warn(`Fez: ${e} has no parent, skipping`);return}r.parentNode.replaceChild(n,r);let o=new t;if(o.UID=++Fez.instanceCount,Fez.instances.set(o.UID,o),o.oldRoot=r,o.fezName=e,o.root=n,o.props=t.getProps(r,n),o.class=t,o.fezSlot(r,n),n.fez=o,t.GLOBAL&&t.GLOBAL!==!0&&(window[t.GLOBAL]||=o),window.$&&(o.$root=$(n)),o.props.id&&n.setAttribute("id",o.props.id),o.fezRegister(),(o.onInit||o.init||o.created||o.connect).call(o,o.props),o.fezRender(),o.onMount(o.props),o.onSubmit){let c=o.root.nodeName==="FORM"?o.root:o.find("form");c&&(c.onsubmit=u=>{u.preventDefault(),o.onSubmit(o.formData())})}if(o.onPropsChange){ft.observe(n,{attributes:!0});for(let[c,u]of Object.entries(o.props))o.onPropsChange(c,u)}}function P(e,r){if(arguments.length===1)return re(e);if(r?.includes("</xmp>"))return re(r);if(e&&!e.includes("-")&&!e.includes(".")&&!e.includes("/")){console.error(`Fez: Invalid name "${e}". Must contain a dash (e.g., 'my-element').`);return}let t=bt(e,ht(r));yt(e),gt(e,t)}function re(e){if(e instanceof Node){let t=e;t.remove();let s=t.getAttribute("fez");if(s?.includes(".")||s?.includes("/"))return pt(s);if(s&&!s.includes("-")){console.error(`Fez: Invalid name "${s}". Must contain a dash.`);return}return P(s,t.innerHTML)}(e?Fez.domRoot(e):document.body).querySelectorAll("template[fez], xmp[fez]").forEach(t=>re(t))}function pt(e){Fez.consoleLog(`Loading from ${e}`),Fez.fetch(e).then(r=>{let s=new DOMParser().parseFromString(r,"text/html").querySelectorAll("template[fez], xmp[fez]");if(s.length>0)s.forEach(n=>{let o=n.getAttribute("fez");if(o&&!o.includes("-")&&!o.includes(".")&&!o.includes("/")){console.error(`Fez: Invalid name "${o}". Must contain a dash.`);return}P(o,n.innerHTML)});else{let n=e.split("/").pop().split(".")[0];P(n,r)}}).catch(r=>{Fez.onError("compile",`Load error for "${e}": ${r.message}`)})}function ht(e){let r={script:"",style:"",html:"",head:""},t=e.split(`
`),s=[],n="";for(let o of t)o=o.trim(),o.startsWith("<script")&&!r.script&&n!=="head"?n="script":o.startsWith("<head")&&!r.script?n="head":o.startsWith("<style")?n="style":o.endsWith("<\/script>")&&n==="script"&&!r.script?(r.script=s.join(`
`),s=[],n=""):o.endsWith("</style>")&&n==="style"?(r.style=s.join(`
`),s=[],n=""):(o.endsWith("</head>")||o.endsWith("</header>"))&&n==="head"?(r.head=s.join(`
`),s=[],n=""):n?s.push(o):r.html+=o+`
`;return r.head&&mt(r.head),r}function mt(e){let r=Fez.domRoot(e);Array.from(r.children).forEach(t=>{if(t.tagName==="SCRIPT"){let s=document.createElement("script");Array.from(t.attributes).forEach(n=>{s.setAttribute(n.name,n.value)}),s.type||="text/javascript",t.src?document.head.appendChild(s):(s.type.includes("javascript")||s.type==="module")&&(s.textContent=t.textContent,document.head.appendChild(s))}else document.head.appendChild(t.cloneNode(!0))})}function bt(e,r){let t=r.script;if(/class\s+\{/.test(t)||(t=`class {
${t}
}`),String(r.style).includes(":")){let o=Fez.cssMixin(r.style);o=o.includes(":fez")||/(?:^|\s)body\s*\{/.test(o)?o:`:fez {
${o}
}`,t=t.replace(/\}\s*$/,`
  CSS = \`${o}\`
}`)}if(/\w/.test(String(r.html))){let o=r.html.replaceAll("`","&#x60;").replaceAll("$","\\$");t=t.replace(/\}\s*$/,`
  HTML = \`${o}\`
}`)}let[s,n]=t.split(/class\s+\{/,2);return`${s};

window.Fez('${e}', class {
${n})`}function gt(e,r){if(r.includes("import "))Fez.head({script:r}),setTimeout(()=>{Fez.classes[e]||Fez.consoleError(`Template "${e}" possible compile error.`)},2e3);else try{new Function(r)()}catch(t){Fez.consoleError(`Template "${e}" compile error: ${t.message}`),console.log(r)}}function yt(e){if(!e)return;let r=document.getElementById("fez-hidden-styles");r||(r=document.createElement("style"),r.id="fez-hidden-styles",document.head.appendChild(r));let t=[...Object.keys(Fez.classes),e].sort().join(", ");r.textContent=`${t} { display: none; }
`}var zt={data:{},listeners:new Map,subscribers:new Map,globalSubscribers:new Set,notify(e,r,t){Fez.consoleLog(`Global state change for ${e}: ${r} (from ${t})`);let s=this.listeners.get(e);s&&s.forEach(o=>{if(o.isConnected)try{o.onGlobalStateChange(e,r,t),o.fezRender()}catch(i){console.error(`Error in component listener for key ${e}:`,i)}else s.delete(o)});let n=this.subscribers.get(e);n&&n.forEach(o=>{try{o(r,t,e)}catch(i){console.error(`Error in subscriber for key ${e}:`,i)}}),this.globalSubscribers.forEach(o=>{try{o(e,r,t)}catch(i){console.error("Error in global subscriber:",i)}})},createProxy(e){return e.addOnDestroy(()=>{for(let[r,t]of this.listeners)t.delete(e);e._globalStateKeys?.clear()}),new Proxy({},{get:(r,t)=>{if(typeof t!="symbol")return e._globalStateKeys||=new Set,e._globalStateKeys.has(t)||(e._globalStateKeys.add(t),this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e)),this.data[t]},set:(r,t,s)=>{if(typeof t=="symbol")return!0;let n=this.data[t];return n!==s&&(this.data[t]=s,this.notify(t,s,n)),!0}})},set(e,r){let t=this.data[e];t!==r&&(this.data[e]=r,this.notify(e,r,t))},get(e){return this.data[e]},forEach(e,r){let t=this.listeners.get(e);t&&t.forEach(s=>{s.isConnected?r(s):t.delete(s)})},subscribe(e,r){if(typeof e=="function")return this.globalSubscribers.add(e),()=>this.globalSubscribers.delete(e);{let t=e;return this.subscribers.has(t)||this.subscribers.set(t,new Set),this.subscribers.get(t).add(r),()=>{let s=this.subscribers.get(t);s&&(s.delete(r),s.size===0&&this.subscribers.delete(t))}}}},Se=zt;var U=()=>globalThis.localStorage||window.localStorage;function Et(e,r){try{U().setItem(e,JSON.stringify(r))}catch(t){console.error(`Fez localStorage: Failed to set "${e}"`,t)}}function vt(e,r=null){try{let t=U().getItem(e);return t===null?r:JSON.parse(t)}catch(t){return console.error(`Fez localStorage: Failed to get "${e}"`,t),r}}function St(e){U().removeItem(e)}function wt(){U().clear()}var we={set:Et,get:vt,remove:St,clear:wt};var Ae=e=>{e.head=(n,o)=>{if(n.nodeName){n.nodeName=="SCRIPT"?(e.head({script:n.innerText}),n.remove()):(n.querySelectorAll("script").forEach(b=>e.head(b)),n.querySelectorAll("template[fez], xmp[fez], script[fez]").forEach(b=>e.compile(b)));return}if(typeof n!="object"||n===null)throw new Error("head requires an object parameter");let i,c={},u;if(n.script){if(n.script.includes("import ")){o&&e.consoleError("Fez.head callback is not supported when script with import is passed (module context).");let b=document.createElement("script");b.type="module",b.textContent=n.script,document.head.appendChild(b),requestAnimationFrame(()=>b.remove())}else try{new Function(n.script)(),o&&o()}catch(b){e.consoleError("Error executing script:",b),console.log(n.script)}return}else if(n.js){i=n.js,u="script";for(let[b,S]of Object.entries(n))b!=="js"&&b!=="module"&&(c[b]=S);n.module&&(c.type="module")}else if(n.css){i=n.css,u="link",c.rel="stylesheet";for(let[b,S]of Object.entries(n))b!=="css"&&(c[b]=S)}else throw new Error('head requires either "script", "js" or "css" property');let h=document.querySelector(`${u}[src="${i}"], ${u}[href="${i}"]`);if(h)return o&&o(),h;let m=document.createElement(u);u==="link"?m.href=i:m.src=i;for(let[b,S]of Object.entries(c))m.setAttribute(b,S);return(o||n.module)&&(m.onload=()=>{n.module&&u==="script"&&import(i).then(b=>{window[n.module]=b.default||b[n.module]||b}).catch(b=>{console.error(`Error importing module ${n.module}:`,b)}),o&&o()}),document.head.appendChild(m),m};let r=5*60*1e3,t=100;e.fetch=function(...n){e._fetchCache||=new Map;let o="GET",i,c;typeof n[0]=="string"&&/^[A-Z]+$/.test(n[0])&&(o=n.shift()),i=n.shift();let u={},h=null;if(typeof n[0]=="object"&&(h=n.shift()),typeof n[0]=="function"&&(c=n.shift()),h){if(o==="GET"){let y=new URLSearchParams(h);i+=(i.includes("?")?"&":"?")+y.toString()}else if(o==="POST"){let y=new FormData;for(let[C,T]of Object.entries(h))y.append(C,T);u.body=y}}u.method=o;let m=`${o}:${i}:${JSON.stringify(u)}`,b=e._fetchCache.get(m);if(b&&Date.now()-b.timestamp<r){if(e.consoleLog(`fetch cache hit: ${o} ${i}`),c){c(b.data);return}return Promise.resolve(b.data)}e.consoleLog(`fetch live: ${o} ${i}`);let S=y=>y.headers.get("content-type")?.includes("application/json")?y.json():y.text(),v=(y,C)=>{if(e._fetchCache.size>=t){let T=e._fetchCache.keys().next().value;e._fetchCache.delete(T)}e._fetchCache.set(y,{data:C,timestamp:Date.now()})};if(c){fetch(i,u).then(S).then(y=>{v(m,y),c(y)}).catch(y=>e.onError("fetch",y));return}return fetch(i,u).then(S).then(y=>(v(m,y),y))},e.clearFetchCache=()=>{e._fetchCache?.clear()},e.darkenColor=(n,o=20)=>{let i=parseInt(n.replace("#",""),16),c=Math.round(2.55*o),u=(i>>16)-c,h=(i>>8&255)-c,m=(i&255)-c;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(h<255?h<1?0:h:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},e.lightenColor=(n,o=20)=>{let i=parseInt(n.replace("#",""),16),c=Math.round(2.55*o),u=(i>>16)+c,h=(i>>8&255)+c,m=(i&255)+c;return"#"+(16777216+(u<255?u<1?0:u:255)*65536+(h<255?h<1?0:h:255)*256+(m<255?m<1?0:m:255)).toString(16).slice(1)},e.htmlEscape=n=>typeof n=="string"?n.replace(/font-family\s*:\s*(?:&[^;]+;|[^;])*?;/gi,"").replaceAll("&","&amp;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("<","&lt;").replaceAll(">","&gt;"):n===void 0?"":n,e.domRoot=(n,o="div")=>{if(n instanceof Node)return n;{let i=document.createElement(o);return i.innerHTML=n,i}},e.activateNode=(n,o="active")=>{!n||!n.parentElement||(Array.from(n.parentElement.children).forEach(i=>{i.classList.remove(o)}),n.classList.add(o))},e.isTrue=n=>["1","true","on"].includes(String(n).toLowerCase()),e.UID=111,e.uid=()=>"fez_uid_"+(++e.UID).toString(32),e.POINTER_SEQ=0,e.POINTER={},e.pointer=(n,o={})=>{if(typeof n=="function"){let i=++e.POINTER_SEQ;return o.persist?e.POINTER[i]=n:e.POINTER[i]=(...c)=>{let u=n(...c);return delete e.POINTER[i],u},`Fez.POINTER[${i}]`}},e.clearPointers=()=>{e.POINTER={}},e.getFunction=n=>{if(n){if(typeof n=="function")return n;if(typeof n=="string"){let o=/^\s*\(?\s*\w+(\s*,\s*\w+)*\s*\)?\s*=>/,i=/^\s*function\s*\(/;return o.test(n)||i.test(n)?new Function("return "+n)():n.includes(".")&&!n.includes("(")?new Function(`return function() { return ${n}(); }`):new Function(n)}}else return()=>{}},e.onReady=n=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{n()},{once:!0}):n()},e.fnv1=n=>{var o,i,c,u,h,m;for(o=2166136261,i=16777619,c=o,u=h=0,m=n.length-1;0<=m?h<=m:h>=m;u=0<=m?++h:--h)c^=n.charCodeAt(u),c*=i;return c.toString(36).replaceAll("-","")},e.tag=(n,o={},i="")=>{let c=encodeURIComponent(JSON.stringify(o));return`<${n} data-props="${c}">${i}</${n}>`},e.untilTrue=(n,o)=>{o||=200,n()||setTimeout(()=>{e.untilTrue(n,o)},o)};let s=200;e.throttle=(n,o=s)=>{let i=0,c;return function(...u){let h=Date.now();h-i>=o?(n.apply(this,u),i=h):(clearTimeout(c),c=setTimeout(()=>{n.apply(this,u),i=Date.now()},o-(h-i)))}}};var $e={},Te=e=>{e.cssMixin=(r,t)=>{if(t)$e[r]=t;else return Object.entries($e).forEach(([s,n])=>{r=r.replaceAll(`:${s} `,`${n} `),r=r.replaceAll(`@include ${s} `,`${n} `)}),r},e.cssMixin("mobile","@media (max-width: 767px)"),e.cssMixin("tablet","@media (min-width: 768px) and (max-width: 1023px)"),e.cssMixin("desktop","@media (min-width:  1200px)")};var E=(e,r)=>{if(typeof e=="number"){let s=E.instances.get(e);if(s)return s;E.consoleError(`Instance with UID "${e}" not found.`);return}if(!e){E.consoleError("Fez() ?");return}if(r){if(typeof r=="function"&&!/^\s*class/.test(r.toString())&&!/\b(this|new)\b/.test(r.toString())){let n=Array.from(document.querySelectorAll(`.fez.fez-${e}`)).filter(o=>o.fez);return n.forEach(o=>r(o.fez)),n}return typeof r!="function"?E.find(e,r):te(e,r)}let t=e.nodeName?e.closest(".fez"):document.querySelector(e.includes("#")?e:`.fez.fez-${e}`);if(!t){E.consoleError(`node "${e}" not found.`);return}if(!t.fez){E.consoleError(`node "${e}" has no Fez attached.`);return}return t.fez};E.classes={};E.instanceCount=0;E.instances=new Map;E.find=(e,r)=>{let t=typeof e=="string"?document.body.querySelector(e):e;typeof t.val=="function"&&(t=t[0]);let s=r?`.fez.fez-${r}`:".fez",n=t.closest(s);if(n?.fez)return n.fez;E.onError("find","Node connector not found",{original:e,resolved:t})};E.info=()=>console.log("Fez components:",Object.keys(E.classes||{}));E.cssClass=e=>me.css(e);E.globalCss=(e,r={})=>{if(typeof e=="function"&&(e=e()),e.includes(":")){let t=e.split(`
`).filter(s=>!/^\s*\/\//.test(s)).join(`
`);r.wrap&&(t=`:fez { ${t} }`),t=t.replace(/\:fez|\:host/,`.fez.fez-${r.name}`),e=E.cssClass(t)}return E.onReady(()=>document.body.parentElement.classList.add(e)),e};function At(e,r){if(e===r)return!0;if(!e||!r)return!1;let t=Object.keys(e),s=Object.keys(r);if(t.length!==s.length)return!1;for(let n of t)if(e[n]!==r[n])return!1;return!0}E.morphdom=(e,r)=>{Array.from(e.attributes).forEach(s=>{r.setAttribute(s.name,s.value)}),be.morph(e,r,{morphStyle:"outerHTML",callbacks:{beforeNodeMorphed:(s,n)=>{if(s!==e&&s.classList?.contains("fez")&&s.fez&&!s.fez._destroyed){E.consoleLog(`Preserving child component ${s.fez.fezName} (UID ${s.fez.UID})`);let o=E.classes[s.fez.fezName]?.getProps?.(n,s)||{},i=s.fez.props||{};return At(i,o)||(s.fez.props=o,s.fez.onPropsChange?.(o,i),s.fez.fezNextTick(s.fez.fezRender,"fezRender")),!1}return!0},beforeNodeRemoved:s=>(s.classList?.contains("fez")&&s.fez&&s.fez.fezOnDestroy(),!0)}});let t=e.nextSibling;t?.nodeType===Node.TEXT_NODE&&!t.textContent.trim()&&t.remove()};E.subscribe=le;E.publish=ae;E.localStorage=we;E.consoleError=(e,r)=>{if(e=`Fez: ${e}`,console.error(e),r)return`<span style="border: 1px solid red; font-size: 14px; padding: 3px 7px; background: #fee; border-radius: 4px;">${e}</span>`};E.consoleLog=e=>{E.LOG&&console.log(`Fez: ${String(e).substring(0,180)}`)};E.onError=(e,r,t)=>{let s=`Fez ${e}: ${r?.toString?.()||r}`;return console.error(s,t||""),s};Ae(E);Te(E);E.compile=P;E.createTemplate=k;E.state=Se;E.log=ge;E.highlightAll=ze;E.onReady(()=>E.consoleLog("Fez.LOG === true, logging enabled."));var H=E;typeof window<"u"&&(window.FezBase=O,window.Fez=H);Promise.resolve().then(()=>Me());var $t=new MutationObserver(e=>{for(let{addedNodes:r,removedNodes:t}of e)r.forEach(s=>{s.nodeType===1&&(s.matches?.("template[fez], xmp[fez], script[fez]")&&(H.compile(s),s.remove()),s.querySelectorAll?.("template[fez], xmp[fez], script[fez]").forEach(n=>{H.compile(n),n.remove()}))}),t.forEach(s=>{if(s.nodeType!==1)return;let n=o=>{o.fez&&!o.fez._destroyed&&queueMicrotask(()=>{!o.isConnected&&o.fez&&!o.fez._destroyed&&(H.instances.delete(o.fez.UID),o.fez.fezOnDestroy())})};n(s),s.querySelectorAll?.(".fez")?.forEach(n)})});$t.observe(document.documentElement,{childList:!0,subtree:!0});var mr=H;})();
//# sourceMappingURL=fez.js.map
