<!-- edit in demo/tpl/index.erb.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fez - JavaScript DOM component framework.</title>
  <link rel="icon" href="./demo/fez.png">
  <link rel="stylesheet" href="./demo/main.css" />
  <script src="./demo/log.js"></script>
  <script src="./dist/fez.js?t=<%= Time.now.to_i %>"></script>
  <script>
    window.L = console.log;
    Fez.LOG = true; // location.port > 999
  </script>
</head>
<body>
  <%= read('tpl/system.fez') %>

  <div class="center" style="max-width: 1100px; ">
    <div>
      <center>
        <img src="./demo/fez.png" style="width: 200px; position: relative; top: 85px;" />
      </center>

      <center style="border: 3px solid #ccc; padding: 80px 40px 60px 40px; background-color: #fff; background: #fff; border: 1px solid rgba(0, 0, 0, 0.04); border-radius: 18px; box-shadow: 0 24px 38px rgba(0, 0, 0, 0.08), 0 9px 46px rgba(0, 0, 0, 0.06), 0 11px 15px rgba(0, 0, 0, 0.05);">
        <h1 class="jumbo" style="margin: 0px auto;">
          Fez &rarr; reactive components
        </h1>

        <h1 class="center" style="margin: 20px 0 40px 0; ">
          directly in HTML
          with zero build steps
        </h1>

        <p class="center">
          <a href="#examples">examples</a>
          &sdot;
          <a target="playground" href="https://jsbin.com/nitihel/edit?html,output">playground</a>
          &sdot;
          <a target="repo" href="https://github.com/dux/fez">GitHub repo</a>
        </p>
      </center>
    </div>
  </div>

  <app-arrow></app-arrow>

  <div class="cen" style="height: 300px;">
    <ui-editor>
      <xmp>
        <html>
          <head>
            <title>Time</title>
            <script script="/fez/core.js"></script>
            <script script="/fez/ui-time.fez"></script>
          </head>
          <body>
            <ui-time city="My place"></ui-time>
          <body>
        </html>
      </xmp>
    </ui-editor>

    <span style="width: 200px; padding: 30px;">
      <ui-clock city="My place"></ui-clock>
    </span>
  </div>

  <div class="con-xs" title="">
    <app-arrow title="How does FEZ feel and work?"></app-arrow>

    <p>
      Fez brings a familiar <b>component-based approach</b> you know from Vue or React, but strips away the build complexity.
      It lets you write components naturally, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">right in your HTML</a>, <b>without needing a compilation step</b>. Think of it as a jQuery for modern component development, <b>with the simplicity of dropping a script tag into your page</b>.
      You get to use your components as if they were native HTML elements, making the development experience straightforward and intuitive.
    </p>

    <ul>
      <li>üîå <i>Native Browser Components:</i> Uses standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">custom elements</a>. Create tags like <code>&lt;ui-clock&gt;</code>, place them anywhere in your HTML, and they just work. (Try it now in dev tools - instant magic!)</li>
      <li>‚ö° <i>Zero Build Step Hassle:</i> Works directly in the browser with a tiny runtime (20kb raw, 9kb zipped - smaller than most cat GIFs).</li>
      <li>üîÑ <i>Smart State Management:</i> Automatically re-renders components using <a href="https://github.com/bigskysoftware/idiomorph">Idiomorph</a> for efficient DOM updates when data changes.</li>
      <li>üìú <i>Flexible Templating:</i> Choose between HTML-like templates (similar to <a href="https://dev.to/cloudcannon/templating-in-sveltekit-3ikm">Svelte</a>) or programmatic <a href="https://github.com/dux/fez/blob/main/src/vendor/n.js">node building</a>.</li>
      <li>üé® <i>CSS Superpowers:</i> Built-in SCSS support via <a href="https://goober.js.org/">Goober</a> with scoped/global styles and dynamic values.</li>
      <li>ü§ù <i>Familiar Syntax:</i> Supports Svelte-style <code>use</code>/<code>bind</code> and Vue-like <code>:attribute</code> bindings.</li>
      <li>üîî <i>Event System:</i> Built-in pub/sub pattern for cross-component messaging.</li>
      <li>‚è≥ <i>Lifecycle Control:</i> Hooks like <code>connect</code>, <code>onMount</code>, <code>beforeRender</code>, and <code>onPropsChange</code> for precise and predictable control.</li>
    </ul>

    <app-arrow title="Lets build simple counter"></app-arrow>

    <p>With reactive state and custom style.</p>

    <ol>
      <li>Add Fez JS (to HEAD)
        <ui-editor>
          <xmp>
            <script src="https://dux.github.io/fez/dist/fez.js"></script>
          </xmp>
        </ui-editor>
      </li>
      <li>
        Create ui-counter component

        <ui-editor id="demo-counter">
          <xmp>
              <%=
                data = read('fez/ui-counter.fez').gsub("\n", "\n  ")
                data = %[<template fez="ui-counter">\n  #{data}\n]
                data.gsub('&', '&amp;')
              %>
          </xmp>
        </ui-editor>

        <p>Or load via HTTP (as in this case)</p>
        <ui-editor>
          &lt;template fez="/demo/ui-counter.fez">&lt;/template>
        </ui-editor>
      </li>
      <li>
        Place ui-counter anywhere in BODY
        <ui-editor id="demo-counter">
          <xmp>
            <ui-counter></ui-counter>
          </xmp>
        </ui-editor>
      </li>
      <li>
        <p>That is it! Edit this demo on <a target="jsbin" href="https://jsbin.com/nitihel/edit?html,output">JSbin</a></p>
        <ui-counter id="main-counter"></ui-counter>
      </li>
    </ol>
  </div>

  <div style="margin-top: 100px;"></div>
  <a herf="#" name="examples"></a>
  <app-arrow title="Examples"></app-arrow>

  <p class="center" style="margin-bottom: 40px;">You will learn all Fez features, just by inspecting these examples. You can edit and update both HTML and Fez code.</p>

  <div style="max-width: 1400px; margin: auto;">
    <% for code in fileNames('fez/*.fez') %>
      <%= erb(:fez, code) %>
    <% end %>
  </div>

  <hr />

  <p class="center">
    Fez was created by <a href="https://github.com/dux/">@dux</a> in 2024.
  </p>

  <script>
    window.applyChanges = function(name) {
      let htmlString = Fez(`#code-${name}`).getSource()
      htmlString = `<xmp fez="${name}">${htmlString}</xmp>`
      const tempDiv = document.createElement('div')
      tempDiv.innerHTML = htmlString
      const node = tempDiv.firstElementChild
      Fez.compile( node )
      document.querySelector(`#body-${name}`).innerHTML = Fez(`#html-${name}`).getSource()
      Toast.info('HTML content updated.')
    }

    window.openCodePen = function(name) {
      let html = Fez(`#html-${name}`).getSource()
      let code = Fez(`#code-ui-${name}`).getSource()
      const body = [
        '<link rel="stylesheet" href="//cdn.simplecss.org/simple.css" />\n<scr'+'ipt src="//dux.github.io/fez/dist/fez.js"></scr'+'ipt>',
        `<!-- FEZ code start -->\n${code}\n<!-- FEZ code end -->`,
        `<!-- HTML code start -->\n${html}\n<!-- HTML code end -->`
      ]

      const css = `body {
  padding-top: 50px;
}
      `

      const data = {
        title: `Fez component - ${name}`,
        html: body.join("\n\n"),
        css: css,
        js: '',
        editors: "100" // 1=HTML, 0=CSS, 1=JS (open panels)
      };

      const form = document.createElement("form");
      form.method = "POST";
      form.action = "https://codepen.io/pen/define";
      form.target = "_blank";

      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "data";
      input.value = JSON.stringify(data);

      form.appendChild(input);
      document.body.appendChild(form);
      form.submit();
      document.body.removeChild(form);
    }  </script>
</body>
</html>

