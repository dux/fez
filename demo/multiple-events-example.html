<!DOCTYPE html>
<html>
<head>
  <title>Multiple Events Example</title>
  <script type="module" src="../src/fez.js"></script>
</head>
<body>
  <h1>Multiple Scroll/Resize Events Demo</h1>
  
  <template fez="scroll-counter">
    <script>
      init() {
        this.state.scrollCount = 0
        this.state.componentId = Math.random().toString(36).substr(2, 9)
        
        // Each component instance has its own scroll handler
        this.onScroll(() => {
          this.state.scrollCount++
          console.log(`Component ${this.state.componentId} scroll count: ${this.state.scrollCount}`)
        }, 100) // throttle to 100ms
      }
    </script>
    <div style="padding: 20px; margin: 10px; background: #f0f0f0; border-radius: 8px;">
      <h3>Scroll Counter (ID: {{state.componentId}})</h3>
      <p>Scroll events detected: {{state.scrollCount}}</p>
    </div>
  </template>

  <template fez="resize-monitor">
    <script>
      init() {
        this.state.width = window.innerWidth
        this.state.height = window.innerHeight
        this.state.resizeCount = 0
        
        // Each component instance has its own resize handler
        this.onResize(() => {
          this.state.width = window.innerWidth
          this.state.height = window.innerHeight
          this.state.resizeCount++
        }) // debounced by default
      }
    </script>
    <div style="padding: 20px; margin: 10px; background: #e0e0ff; border-radius: 8px;">
      <h3>Resize Monitor</h3>
      <p>Window size: {{state.width}} x {{state.height}}</p>
      <p>Resize events: {{state.resizeCount}}</p>
    </div>
  </template>

  <template fez="combined-monitor">
    <script>
      init() {
        this.state.scrollY = 0
        this.state.width = window.innerWidth
        
        // Component can have both scroll AND resize handlers
        this.onScroll(() => {
          this.state.scrollY = window.scrollY
        }, 50) // throttle 50ms
        
        this.onResize(() => {
          this.state.width = window.innerWidth
        })
      }
    </script>
    <div style="padding: 20px; margin: 10px; background: #ffe0e0; border-radius: 8px; position: sticky; top: 10px;">
      <h3>Combined Monitor</h3>
      <p>Scroll position: {{state.scrollY}}px</p>
      <p>Window width: {{state.width}}px</p>
    </div>
  </template>

  <!-- Create multiple instances -->
  <scroll-counter></scroll-counter>
  <scroll-counter></scroll-counter>
  <resize-monitor></resize-monitor>
  <combined-monitor></combined-monitor>
  
  <!-- Add some content to enable scrolling -->
  <div style="height: 2000px; padding: 20px;">
    <p>Scroll down and resize the window to see multiple components responding independently!</p>
  </div>

  <script>
    // You can also add global handlers that don't interfere with component handlers
    window.addEventListener('scroll', () => {
      console.log('Global scroll handler - independent of components')
    })
  </script>
</body>
</html>