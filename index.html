<!-- edit in demo/tpl/index.erb.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fez - JavaScript DOM component framework.</title>
  <link rel="icon" href="./demo/fez.png">
  <link rel="stylesheet" href="./demo/main.css" />
  <script src="./dist/fez.js?t=1751031514"></script>
  <script>
    window.L = console.log
    window.DEV = location.port > 999
  </script>
</head>
<body>
  <xmp fez="app-info">
  <style>
    & > div {
      border: 3px solid #bb8;
      padding: 10px;
      border-radius: 8px;
      background-color: #ffe;
      margin-bottom: 16px;
    }
  </style>

  <div>
    {{#if @props.small}}
      <p>
        <small>{{ @props.small }}</small>
      </p>
    {{/if}}

    <slot />
  </div>
</xmp>

<xmp fez="app-arrow">
  <h1 class="jumbo" style="margin: 70px auto;">&darr;</h1>

  <!-- you can use {{ or [[ for template blocks -->
  [[#if @props.title]]
    <h1>[[ @props.title ]]</h1>
  [[/if]]
</xmp>



  <div class="center" style="max-width: 1100px; ">
    <div>
      <center>
        <img src="./demo/fez.png" style="width: 200px; position: relative; top: 85px;" />
      </center>

      <center style="border: 3px solid #ccc; padding: 80px 40px 60px 40px; background-color: #fff; background: #fff; border: 1px solid rgba(0, 0, 0, 0.04); border-radius: 18px; box-shadow: 0 24px 38px rgba(0, 0, 0, 0.08), 0 9px 46px rgba(0, 0, 0, 0.06), 0 11px 15px rgba(0, 0, 0, 0.05);">
        <h1 class="jumbo" style="margin: 0px auto;">
          Fez &rarr; reactive components
        </h1>

        <h1 class="center" style="margin: 20px 0 40px 0; ">
          directly in HTML
          with zero build steps
        </h1>

        <p class="center">
          <a href="#examples">examples</a>
          &sdot;
          <a target="playground" href="https://jsbin.com/nitihel/edit?html,output">playground</a>
          &sdot;
          <a target="repo" href="https://github.com/dux/fez">GitHub repo</a>
        </p>
      </center>
    </div>
  </div>

  <app-arrow></app-arrow>

  <div class="cen" style="height: 300px;">
    <ui-editor>
      <xmp>
        <html>
          <head>
            <title>Time</title>
            <script script="/fez/core.js"></script>
            <script script="/fez/ui-time.fez"></script>
          </head>
          <body>
            <ui-time city="My place"></ui-time>
          <body>
        </html>
      </xmp>
    </ui-editor>

    <span style="width: 200px; padding: 30px;">
      <ui-clock city="My place"></ui-clock>
    </span>
  </div>

  <div class="con-xs" title="">
    <app-arrow title="How does FEZ feel and work?"></app-arrow>

    <p>
      Fez brings a familiar <b>component-based approach</b> you know from Vue or React, but strips away the build complexity.
      It lets you write components naturally, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">right in your HTML</a>, <b>without needing a compilation step</b>. Think of it as a jQuery for modern component development, <b>with the simplicity of dropping a script tag into your page</b>.
      You get to use your components as if they were native HTML elements, making the development experience straightforward and intuitive.
    </p>

    <ul>
      <li>üîå <i>Native Browser Components:</i> Uses standard <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements">custom elements</a>. Create tags like <code>&lt;ui-clock&gt;</code>, place them anywhere in your HTML, and they just work. (Try it now in dev tools - instant magic!)</li>
      <li>‚ö° <i>Zero Build Step Hassle:</i> Works directly in the browser with a tiny runtime (20kb raw, 9kb zipped - smaller than most cat GIFs).</li>
      <li>üîÑ <i>Smart State Management:</i> Automatically re-renders components using <a href="https://github.com/bigskysoftware/idiomorph">Idiomorph</a> for efficient DOM updates when data changes.</li>
      <li>üìú <i>Flexible Templating:</i> Choose between HTML-like templates (similar to <a href="https://dev.to/cloudcannon/templating-in-sveltekit-3ikm">Svelte</a>) or programmatic <a href="https://github.com/dux/fez/blob/main/src/vendor/n.js">node building</a>.</li>
      <li>üé® <i>CSS Superpowers:</i> Built-in SCSS support via <a href="https://goober.js.org/">Goober</a> with scoped/global styles and dynamic values.</li>
      <li>ü§ù <i>Familiar Syntax:</i> Supports Svelte-style <code>use</code>/<code>bind</code> and Vue-like <code>:attribute</code> bindings.</li>
      <li>üîî <i>Event System:</i> Built-in pub/sub pattern for cross-component messaging.</li>
      <li>‚è≥ <i>Lifecycle Control:</i> Hooks like <code>connect</code>, <code>onMount</code>, <code>beforeRender</code>, and <code>onPropsChange</code> for precise and predictable control.</li>
    </ul>

    <app-arrow title="Lets build simple counter"></app-arrow>

    <p>With reactive state and custom style.</p>

    <ol>
      <li>Add Fez JS (to HEAD)
        <ui-editor>
          <template>
            <script src="https://dux.github.io/fez/dist/fez.js"></script>
          </template>
        </ui-editor>
      </li>
      <li>
        Create ex-counter component

        <template fez="./demo/ex-counter.fez.html"></template>
        <ui-editor id="demo-counter">
          <template>
            <script>
  connect() {
    this.state.count = 0
  }

  more() {
    this.state.count += this.state.count > 9 ? 0 : 1
  }
</script>

<style>
  zoom: 2;
  margin: 10px 0;

  button {
    position: relative;
    top: -3px;
  }

  span {
    padding: 0 5px;
  }
</style>

<button onclick="@state.count -= 1">-</button>
<span>
  {{ @state.count }}
</span>
<button onclick="@more()">+</button>
{{#if @state.count > 0}}
  <span>&mdash;</span>
  {{#if @state.count % 2 }} odd {{:else}} even {{/if}}
{{/if}}

          </template>
        </ui-editor>

        <p>Or load via HTTP (as in this case, view source)</p>
        <ui-editor>
          &lt;template fez="ex-counter" src="/demo/ex-counter.fez.html">&lt;/template>
        </ui-editor>
      </li>
      <li>
        Place ex-counter anywhere in BODY
        <ui-editor id="demo-counter">
          <template>
            <ex-counter></ex-counter>
          </template>
        </ui-editor>
      </li>
      <li>
        <p>That is it! Edit this demo on <a target="jsbin" href="https://jsbin.com/nitihel/edit?html,output">JSbin</a></p>
        <ex-counter id="main-counter"></ex-counter>
      </li>
    </ol>
  </div>

  <div style="margin-top: 100px;"></div>
  <a herf="#" name="examples"></a>
  <app-arrow title="Examples"></app-arrow>

  <p class="center" style="margin-bottom: 40px;">You will learn all Fez features, just by inspecting these examples. You can edit and update both HTML and Fez code.</p>

  <div style="max-width: 1400px; margin: auto;">
    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('avatar')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-avatar
    </h3>

    <div id="body-avatar" style="padding-bottom: 20px;">
      <style>
  .avatars {
    img.avatar {
      border: 2px solid #ddd;
      background-color: #fff;
      margin-right: -10px;
    }
  }
</style>

<div class="avatars">
  <ui-avatar src="https://robohash.org/a.png" name="Dux"></ui-avatar>
  <ui-avatar src="https://robohash.org/b.png" name="Mile"></ui-avatar>
  <ui-avatar src="https://robohash.org/c.png?set=set2"></ui-avatar>
  <ui-avatar src="https://robohash.org/d.png?set=set2"></ui-avatar>
  <ui-avatar src="https://robohash.org/e.png" name="Joza"></ui-avatar>
</div>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>features blocks <code>{{#block ...}}</code></li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="avatar"
          id="html-avatar"
          file="./demo/fez/avatar.html"
          language="html"
          :action="applyChanges"
        >
          &lt;style>
  .avatars {
    img.avatar {
      border: 2px solid #ddd;
      background-color: #fff;
      margin-right: -10px;
    }
  }
&lt;/style>

&lt;div class="avatars">
  &lt;ui-avatar src="https://robohash.org/a.png" name="Dux">&lt;/ui-avatar>
  &lt;ui-avatar src="https://robohash.org/b.png" name="Mile">&lt;/ui-avatar>
  &lt;ui-avatar src="https://robohash.org/c.png?set=set2">&lt;/ui-avatar>
  &lt;ui-avatar src="https://robohash.org/d.png?set=set2">&lt;/ui-avatar>
  &lt;ui-avatar src="https://robohash.org/e.png" name="Joza">&lt;/ui-avatar>
&lt;/div>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-avatar"
          file="./demo/fez/avatar.fez"
          name="avatar"
          :action="applyChanges"
        >
          &lt;template fez="ui-avatar">
  &lt;script>
    NAME = 'span'
    FAST = true
  
    connect(props) {
      this.copy('href', 'style')
      this.size = (props.size || 64) + 'px'
      this.root.style.width = this.size
      this.root.style.height = this.size
    }
  
    image() {
      return `&lt;img
        src="${this.props.src}"
        class="avatar"
        style="width: ${this.size}; height: ${this.size};"
      />`
    }
  &lt;/script>
  
  &lt;style>
    img {
      border-radius: 50%;
    }
  
    span.avatar {
      display: inline-block;
      text-align: center;
  
      .title {
        display: inline-block;
        border: 1px solid #ccc;
        background-color: #eee;
        padding: 1px 5px;
        font-size: 13px;
        position: relative;
        left: 3px;
        top: 8px;
        border-radius: 4px;
      }
    }
  &lt;/style>
  
  {{#if @props.name}}
    &lt;span class="avatar">
      &lt;div class="title">{{ @props.name }}&lt;/div>
      &lt;div>
        {{@html @image() }}
      &lt;/div>
    &lt;/span>
  {{:else}}
     {{@html @image() }}
  {{/if}}
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-avatar">
  <script>
    NAME = 'span'
    FAST = true
  
    connect(props) {
      this.copy('href', 'style')
      this.size = (props.size || 64) + 'px'
      this.root.style.width = this.size
      this.root.style.height = this.size
    }
  
    image() {
      return `<img
        src="${this.props.src}"
        class="avatar"
        style="width: ${this.size}; height: ${this.size};"
      />`
    }
  </script>
  
  <style>
    img {
      border-radius: 50%;
    }
  
    span.avatar {
      display: inline-block;
      text-align: center;
  
      .title {
        display: inline-block;
        border: 1px solid #ccc;
        background-color: #eee;
        padding: 1px 5px;
        font-size: 13px;
        position: relative;
        left: 3px;
        top: 8px;
        border-radius: 4px;
      }
    }
  </style>
  
  {{#if @props.name}}
    <span class="avatar">
      <div class="title">{{ @props.name }}</div>
      <div>
        {{@html @image() }}
      </div>
    </span>
  {{:else}}
     {{@html @image() }}
  {{/if}}
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('border')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-border
    </h3>

    <div id="body-border" style="padding-bottom: 20px;">
      <div class="should-be-first-parent">
  <ui-border color="violet">
    <div style="padding: 20px; max-width: 200px;">
      this will get border from fez component. Also check the DOM, fez parent is removed from DOM.
    </div>
  </ui-border>
</div>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: internal method <code>this.fezHide()</code> will remove fez node from dom, and set <code>this.root</code> to first parent node and return initial child nodes.</li>
    <li>useful if you need to transform children, but you can't have parent node in place. Think jQuery plugin.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="border"
          id="html-border"
          file="./demo/fez/border.html"
          language="html"
          :action="applyChanges"
        >
          &lt;div class="should-be-first-parent">
  &lt;ui-border color="violet">
    &lt;div style="padding: 20px; max-width: 200px;">
      this will get border from fez component. Also check the DOM, fez parent is removed from DOM.
    &lt;/div>
  &lt;/ui-border>
&lt;/div>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-border"
          file="./demo/fez/border.fez"
          name="border"
          :action="applyChanges"
        >
          &lt;template fez="ui-border">
  &lt;script>
    onMount() {
      const childNodes = this.fezHide()
      childNodes.forEach(node => {
        if (node.nodeType === 1) { // Element node
          node.style.border = `3px solid ${this.props.color || 'black'}`
        }
      })
    }
  &lt;/script>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-border">
  <script>
    onMount() {
      const childNodes = this.fezHide()
      childNodes.forEach(node => {
        if (node.nodeType === 1) { // Element node
          node.style.border = `3px solid ${this.props.color || 'black'}`
        }
      })
    }
  </script>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('card')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-card
    </h3>

    <div id="body-card" style="padding-bottom: 20px;">
      <script>
  function randomFlip() {
    let timeout = 150
    let current = 0
    document.querySelectorAll('.fez-ui-card').forEach(n => {
      setTimeout(() => n.fez.flip(), current += timeout)
      setTimeout(() => n.fez.flip(), current + 1300)
    })
  }

  function flipAllCards() {
    document.querySelectorAll('.fez-ui-card').forEach(n => n.fez.flip())
  }
</script>

<button onclick="randomFlip()">Random flip</button>
<button onclick="flipAllCards()">Flip cards via direct access</button>
<button onclick="Fez.publish('flip-card')">Flip cards via pub/sub</button>

<ui-card>
  <div class="front">
    <h2>The magician</h2>
    <p>Click to flip!</p>
  </div>
  <div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m1.webp') no-repeat center/cover;">
  </div>
</ui-card>

<ui-card>
  <div class="front">
    <h2>The high<br />priestess</h2>
    <p>Click to flip!</p>
  </div>
  <div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m2.webp') no-repeat center/cover;">
  </div>
</ui-card>

<ui-card>
  <div class="front">
    <h2>The empress</h2>
    <p>Click to flip!</p>
  </div>
  <div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m3.webp') no-repeat center/cover;">
  </div>
</ui-card>

<ui-card>
  <div class="front">
    <h2>Another clock?</h2>
    <p>Click to see</p>
  </div>
  <div class="back" style="background-color: #aba;">
    <div style="width: 150px;">
      <ui-clock></ui-clock>
    </div>
    <div style="padding: 30px;">
      Any HTML or Fez component inside.
    </div>
  </div>
</ui-card>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Simple UI component</li>
    <li>Pub/sub for card flip</li>
    <li>Direct component access (node.fez)</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="card"
          id="html-card"
          file="./demo/fez/card.html"
          language="html"
          :action="applyChanges"
        >
          &lt;script>
  function randomFlip() {
    let timeout = 150
    let current = 0
    document.querySelectorAll('.fez-ui-card').forEach(n => {
      setTimeout(() => n.fez.flip(), current += timeout)
      setTimeout(() => n.fez.flip(), current + 1300)
    })
  }

  function flipAllCards() {
    document.querySelectorAll('.fez-ui-card').forEach(n => n.fez.flip())
  }
&lt;/script>

&lt;button onclick="randomFlip()">Random flip&lt;/button>
&lt;button onclick="flipAllCards()">Flip cards via direct access&lt;/button>
&lt;button onclick="Fez.publish('flip-card')">Flip cards via pub/sub&lt;/button>

&lt;ui-card>
  &lt;div class="front">
    &lt;h2>The magician&lt;/h2>
    &lt;p>Click to flip!&lt;/p>
  &lt;/div>
  &lt;div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m1.webp') no-repeat center/cover;">
  &lt;/div>
&lt;/ui-card>

&lt;ui-card>
  &lt;div class="front">
    &lt;h2>The high&lt;br />priestess&lt;/h2>
    &lt;p>Click to flip!&lt;/p>
  &lt;/div>
  &lt;div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m2.webp') no-repeat center/cover;">
  &lt;/div>
&lt;/ui-card>

&lt;ui-card>
  &lt;div class="front">
    &lt;h2>The empress&lt;/h2>
    &lt;p>Click to flip!&lt;/p>
  &lt;/div>
  &lt;div class="back"  style="background: url('https://tarotatlas.com/wp-content/themes/ta/img/m3.webp') no-repeat center/cover;">
  &lt;/div>
&lt;/ui-card>

&lt;ui-card>
  &lt;div class="front">
    &lt;h2>Another clock?&lt;/h2>
    &lt;p>Click to see&lt;/p>
  &lt;/div>
  &lt;div class="back" style="background-color: #aba;">
    &lt;div style="width: 150px;">
      &lt;ui-clock>&lt;/ui-clock>
    &lt;/div>
    &lt;div style="padding: 30px;">
      Any HTML or Fez component inside.
    &lt;/div>
  &lt;/div>
&lt;/ui-card>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-card"
          file="./demo/fez/card.fez"
          name="card"
          :action="applyChanges"
        >
          &lt;template fez="ui-card">
  &lt;script>
    flip() {
      this.find('.card').classList.toggle('flipped')
    }
  
    autoflip() {
      setTimeout(()=>{
        this.flip()
        this.autoflip()
      }, 5000  + (Math.random() * 15* 1000))
    }
  
    connect() {
      this.autoflip()
      this.subscribe('flip-card', this.flip)
    }
  &lt;/script>
  
  &lt;style>
    .card {
      display: inline-block;
      float: left;
      width: 250px;
      height: 400px;
      perspective: 1000px;
      cursor: pointer;
      margin: 10px;
    }
  
    .fez-slot {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }
  
    .card.flipped .fez-slot {
      transform: rotateY(180deg);
    }
  
    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
  
    .front {
      background: #fff;
      color: #333;
    }
  
    .back {
      background: #fff;
      transform: rotateY(180deg);
    }
  
    .card:hover {
      transform: scale(1.02);
      transition: transform 0.3s ease;
    }
  &lt;/style>
  
  &lt;div class="card" onclick="@flip()">
    &lt;slot />
  &lt;/div>
  
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-card">
  <script>
    flip() {
      this.find('.card').classList.toggle('flipped')
    }
  
    autoflip() {
      setTimeout(()=>{
        this.flip()
        this.autoflip()
      }, 5000  + (Math.random() * 15* 1000))
    }
  
    connect() {
      this.autoflip()
      this.subscribe('flip-card', this.flip)
    }
  </script>
  
  <style>
    .card {
      display: inline-block;
      float: left;
      width: 250px;
      height: 400px;
      perspective: 1000px;
      cursor: pointer;
      margin: 10px;
    }
  
    .fez-slot {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.8s;
      transform-style: preserve-3d;
    }
  
    .card.flipped .fez-slot {
      transform: rotateY(180deg);
    }
  
    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
  
    .front {
      background: #fff;
      color: #333;
    }
  
    .back {
      background: #fff;
      transform: rotateY(180deg);
    }
  
    .card:hover {
      transform: scale(1.02);
      transition: transform 0.3s ease;
    }
  </style>
  
  <div class="card" onclick="@flip()">
    <slot />
  </div>
  
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('clock')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-clock
    </h3>

    <div id="body-clock" style="padding-bottom: 20px;">
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
  <div>
    <ui-clock city="Zagreb" utc="1"></ui-clock>
  </div>
  <div>
    <ui-clock city="Moscow" utc="4"></ui-clock>
  </div>
  <div>
    <ui-clock city="NYC" utc="-5"></ui-clock>
  </div>
  <div>
    <ui-clock city="Sydney" utc="10"></ui-clock>
  </div>
</div>




    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>SVG generation</li>
    <li>Features: reactive store - any update to <code>this.state</code> object triggers re-render.</li>
    <li>Features: DOM morph updates - update only changed nodes and attributes</li>
    <li>Features: dynamic styes (seconds line color)</li>
    <li>Features: <code>onDestroy() { ... }</code> - execute code when component is removed from DOM</li>
    <li>Features: <code>setInterval() { ... }</code> to set interval on a instance. No need to clear it, it will be auto cleared on component destroy.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="clock"
          id="html-clock"
          file="./demo/fez/clock.html"
          language="html"
          :action="applyChanges"
        >
          &lt;div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
  &lt;div>
    &lt;ui-clock city="Zagreb" utc="1">&lt;/ui-clock>
  &lt;/div>
  &lt;div>
    &lt;ui-clock city="Moscow" utc="4">&lt;/ui-clock>
  &lt;/div>
  &lt;div>
    &lt;ui-clock city="NYC" utc="-5">&lt;/ui-clock>
  &lt;/div>
  &lt;div>
    &lt;ui-clock city="Sydney" utc="10">&lt;/ui-clock>
  &lt;/div>
&lt;/div>




        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-clock"
          file="./demo/fez/clock.fez"
          name="clock"
          :action="applyChanges"
        >
          &lt;template fez="ui-clock">
  &lt;script>
    randomColor() {
      const colors = ['red', 'green', 'blue', 'magenta', 'teal']
      return colors[Math.floor(Math.random() * colors.length)];
    }
  
    setVars() {
      // will only render once on next tick
      let time = new Date(Date.now() - (this.offsetHours * 60 * 60 * 1000))
      this.state.hours = time.getHours()
      this.state.minutes = time.getMinutes()
      this.state.seconds = time.getSeconds()
      this.state.color = this.randomColor()
    }
  
    connect() {
      this.offsetHours = parseFloat(this.props.utc || 0)
      this.setVars()
      this.setInterval(this.setVars, 1000)
    }
  
    onDestroy() {
      console.log(`Bye from ${this.fezName} - ${this.props.city}`)
    }
  &lt;/script>
  
  &lt;style>
    input {
      border: 3px solid red !important;
    }
  
    svg {
      width: 100%;
      height: 100%;
    }
  
    .clock-face {
      stroke: #333;
      fill: white;
    }
  
    .minor {
      stroke: #999;
      stroke-width: 0.5;
    }
  
    .major {
      stroke: #333;
      stroke-width: 1;
    }
  
    .hour {
      stroke: #333;
      stroke-width: 1.5;
    }
  
    .minute {
      stroke: #666;
    }
  
    .second, .second-counterweight {
      stroke: var(--color);
    }
  
    .second-counterweight {
      stroke-width: 3;
    }
  &lt;/style>
  
  &lt;svg viewBox="-50 -50 100 100" style="--color: {{ @state.color }}">
    &lt;circle class="clock-face" r="48" />
  
    &lt;!-- markers -->
    {{#each [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55] as minute}}
      &lt;line class="major" y1="35" y2="45" transform="rotate({{30 * minute}})" />
  
      {{#each [1, 2, 3, 4] as offset}}
        &lt;line class="minor" y1="42" y2="45" transform="rotate({{6 * (minute + offset)}})" />
      {{/each}}
    {{/each}}
  
    &lt;!-- hour hand -->
    &lt;line class="hour" y1="2" y2="-20" transform="rotate({{30 * @state.hours + @state.minutes / 2}})" />
  
    &lt;!-- minute hand -->
    &lt;line class="minute" y1="4" y2="-30" transform="rotate({{6 * @state.minutes + @state.seconds / 10}})" />
  
    &lt;!-- second hand -->
    &lt;g transform="rotate({{6 * @state.seconds}})">
      &lt;line class="second" y1="10" y2="-38" />
      &lt;line class="second-counterweight" y1="10" y2="2" />
    &lt;/g>
  
    &lt;!-- City text -->
    {{#if @props.city }}
      &lt;text x="0" y="-17" text-anchor="middle" dominant-baseline="middle" style="font-size: 10px; fill: #111;">
        {{ @props.city }}
      &lt;/text>
    {{/if}}
  &lt;/svg>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-clock">
  <script>
    randomColor() {
      const colors = ['red', 'green', 'blue', 'magenta', 'teal']
      return colors[Math.floor(Math.random() * colors.length)];
    }
  
    setVars() {
      // will only render once on next tick
      let time = new Date(Date.now() - (this.offsetHours * 60 * 60 * 1000))
      this.state.hours = time.getHours()
      this.state.minutes = time.getMinutes()
      this.state.seconds = time.getSeconds()
      this.state.color = this.randomColor()
    }
  
    connect() {
      this.offsetHours = parseFloat(this.props.utc || 0)
      this.setVars()
      this.setInterval(this.setVars, 1000)
    }
  
    onDestroy() {
      console.log(`Bye from ${this.fezName} - ${this.props.city}`)
    }
  </script>
  
  <style>
    input {
      border: 3px solid red !important;
    }
  
    svg {
      width: 100%;
      height: 100%;
    }
  
    .clock-face {
      stroke: #333;
      fill: white;
    }
  
    .minor {
      stroke: #999;
      stroke-width: 0.5;
    }
  
    .major {
      stroke: #333;
      stroke-width: 1;
    }
  
    .hour {
      stroke: #333;
      stroke-width: 1.5;
    }
  
    .minute {
      stroke: #666;
    }
  
    .second, .second-counterweight {
      stroke: var(--color);
    }
  
    .second-counterweight {
      stroke-width: 3;
    }
  </style>
  
  <svg viewBox="-50 -50 100 100" style="--color: {{ @state.color }}">
    <circle class="clock-face" r="48" />
  
    <!-- markers -->
    {{#each [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55] as minute}}
      <line class="major" y1="35" y2="45" transform="rotate({{30 * minute}})" />
  
      {{#each [1, 2, 3, 4] as offset}}
        <line class="minor" y1="42" y2="45" transform="rotate({{6 * (minute + offset)}})" />
      {{/each}}
    {{/each}}
  
    <!-- hour hand -->
    <line class="hour" y1="2" y2="-20" transform="rotate({{30 * @state.hours + @state.minutes / 2}})" />
  
    <!-- minute hand -->
    <line class="minute" y1="4" y2="-30" transform="rotate({{6 * @state.minutes + @state.seconds / 10}})" />
  
    <!-- second hand -->
    <g transform="rotate({{6 * @state.seconds}})">
      <line class="second" y1="10" y2="-38" />
      <line class="second-counterweight" y1="10" y2="2" />
    </g>
  
    <!-- City text -->
    {{#if @props.city }}
      <text x="0" y="-17" text-anchor="middle" dominant-baseline="middle" style="font-size: 10px; fill: #111;">
        {{ @props.city }}
      </text>
    {{/if}}
  </svg>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('editor')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-editor
    </h3>

    <div id="body-editor" style="padding-bottom: 20px;">
      <ui-editor file="demo.html">
Hi, I am UI-EDITOR component.

To define me, just add &lt;ui-editor>&lt;/ui-editor>
anywhere in HTML code
</ui-editor>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>this is viewer / editor you see on the right</li>
    <li>Features: <code>Fez.head(...)</code> that will safely insert script tags in the page header</li>
    <li>Features: <code>Fez.untilTrue(...)</code> that will execute code every 100 milliseconds until it returns true</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="editor"
          id="html-editor"
          file="./demo/fez/editor.html"
          language="html"
          :action="applyChanges"
        >
          &lt;ui-editor file="demo.html">
Hi, I am UI-EDITOR component.

To define me, just add &lt;ui-editor>&lt;/ui-editor>
anywhere in HTML code
&lt;/ui-editor>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-editor"
          file="./demo/fez/editor.fez"
          name="editor"
          :action="applyChanges"
        >
          &lt;template fez="ui-editor">
  &lt;script>
    // you need to escape script tag inside fez script block
  
    Fez.head('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css')
    Fez.head('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js')
  
    class {
      reformatIndentation(text) {
        const lines = text.split('\n');
        if (lines.length &lt; 2) return text;
  
        let baseIndent = 0;
        for (let i = 1; i &lt; lines.length; i++){
          const line = lines[i].trim();
          if (line.length > 0) {
            baseIndent = lines[i].match(/^\s*/)[0].length;
            break;
          }
        }
  
        const targetIndent = Math.max(0, baseIndent - 2);
  
        const processedLines = lines.map(line => {
          const lineWithSpaces = line.replace(/\t/g, '  ');
          const leadingSpaces = lineWithSpaces.match(/^\s*/)[0].length;
          if (leadingSpaces === 0) return line;
          const newIndent = Math.max(0, leadingSpaces - targetIndent);
          return ' '.repeat(newIndent) + lineWithSpaces.trim();
        });
  
        return processedLines.join('\n');
      }
  
      getSource() {
        return this.codeNode.textContent
      }
  
      copy() {
        try {
            navigator.clipboard.writeText(this.getSource());
            Toast.info('File data copied to clipboard.');
          } catch (err) {
            console.error('Failed to copy: ', err);
            Toast.error('Failed to copy to clipboard.');
          }
        }
  
      connect(props) {
        props.language ||= 'html'
  
        const child = this.root.firstElementChild
  
        if (child?.nodeName == 'TEMPLATE' || child?.nodeName == 'XMP') {
          this.source = Fez.htmlEscape(this.root.firstElementChild.innerHTML)
        } else {
          this.source = this.root.innerHTML
        }
      }
  
      onMount() {
        const node = this.codeNode = this.find('code')
        node.innerHTML = this.reformatIndentation(this.source.trim())
  
        Fez.untilTrue(()=>{
          // hljs has a bug on applying styles on first load, this fixes it
          if (window.hljs) {
            if (!node.classList.contains('hljs')) {
              hljs.highlightElement(this.codeNode)
            } else {
              return true
            }
          }
        })
      }
    }
  &lt;/script>
  
  &lt;style>
    code {
      padding: 10px;
      font-size: 15px;
    }
  
    pre {
      margin-top: 10px;
      width: 100%;
      line-height: 26px;
    }
  &lt;/style>
  
  {{#if @props.file}}
    &lt;div style="font-size: 14px; margin: 0; position: relative; top: 7px;">
      {{ @props.file }}
      &sdot;
      &lt;button onclick="@copy()">Copy&lt;/button>
      {{#if @props.action }}
        &sdot;
        &lt;button
          style="cursor: pointer; font-weight: 600;"
          onclick="@props.action('{{ @props.name }}')"
        >Update&lt;/button>
      {{/if}}
    &lt;/div>
  {{/if}}
  &lt;pre>
    &lt;code class="language-{{ @props.language }}" contenteditable="{{ !!@props.file }}">&lt;/code>
  &lt;/pre>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-editor">
  <script>
    // you need to escape script tag inside fez script block
  
    Fez.head('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css')
    Fez.head('https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js')
  
    class {
      reformatIndentation(text) {
        const lines = text.split('\n');
        if (lines.length < 2) return text;
  
        let baseIndent = 0;
        for (let i = 1; i < lines.length; i++){
          const line = lines[i].trim();
          if (line.length > 0) {
            baseIndent = lines[i].match(/^\s*/)[0].length;
            break;
          }
        }
  
        const targetIndent = Math.max(0, baseIndent - 2);
  
        const processedLines = lines.map(line => {
          const lineWithSpaces = line.replace(/\t/g, '  ');
          const leadingSpaces = lineWithSpaces.match(/^\s*/)[0].length;
          if (leadingSpaces === 0) return line;
          const newIndent = Math.max(0, leadingSpaces - targetIndent);
          return ' '.repeat(newIndent) + lineWithSpaces.trim();
        });
  
        return processedLines.join('\n');
      }
  
      getSource() {
        return this.codeNode.textContent
      }
  
      copy() {
        try {
            navigator.clipboard.writeText(this.getSource());
            Toast.info('File data copied to clipboard.');
          } catch (err) {
            console.error('Failed to copy: ', err);
            Toast.error('Failed to copy to clipboard.');
          }
        }
  
      connect(props) {
        props.language ||= 'html'
  
        const child = this.root.firstElementChild
  
        if (child?.nodeName == 'TEMPLATE' || child?.nodeName == 'XMP') {
          this.source = Fez.htmlEscape(this.root.firstElementChild.innerHTML)
        } else {
          this.source = this.root.innerHTML
        }
      }
  
      onMount() {
        const node = this.codeNode = this.find('code')
        node.innerHTML = this.reformatIndentation(this.source.trim())
  
        Fez.untilTrue(()=>{
          // hljs has a bug on applying styles on first load, this fixes it
          if (window.hljs) {
            if (!node.classList.contains('hljs')) {
              hljs.highlightElement(this.codeNode)
            } else {
              return true
            }
          }
        })
      }
    }
  </script>
  
  <style>
    code {
      padding: 10px;
      font-size: 15px;
    }
  
    pre {
      margin-top: 10px;
      width: 100%;
      line-height: 26px;
    }
  </style>
  
  {{#if @props.file}}
    <div style="font-size: 14px; margin: 0; position: relative; top: 7px;">
      {{ @props.file }}
      &sdot;
      <button onclick="@copy()">Copy</button>
      {{#if @props.action }}
        &sdot;
        <button
          style="cursor: pointer; font-weight: 600;"
          onclick="@props.action('{{ @props.name }}')"
        >Update</button>
      {{/if}}
    </div>
  {{/if}}
  <pre>
    <code class="language-{{ @props.language }}" contenteditable="{{ !!@props.file }}"></code>
  </pre>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('form')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-form
    </h3>

    <div id="body-form" style="padding-bottom: 20px;">
      <div class="flex">
  <ui-form target="/api" :ping="updateFormData">
    <p>
      <input type="text" name="info" value="a dude" />
    </p>
    <p>
      <select name="num">
        <option>one</option>
        <option>two</option>
        <option>three</option>
      </select>
    </p>
    <p>
      <label><input type="radio" name="name" value="Jakov" /> Jakov</label>
      <label><input type="radio" name="name" value="Vid" /> Vid</label>
      <label><input type="radio" name="name" value="Dino" /> Dino</label>
    </p>
    <p>
      <button>Submit</button>
    </p>
  </ui-form>

  <ui-form target="/api" :ping="updateFormData">
    <p>
      <select name="num">
        <option>uno</option>
        <option>due</option>
        <option>tres</option>
      </select>
    </p>
    <p>
      <button>Submit</button>
    </p>
  </ui-form>
</div>

<pre id="form-data"></pre>

<script>
  function updateFormData(obj) {
    document.getElementById('form-data').textContent += JSON.stringify(obj) + "\n"
  }
</script>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: form helper - <code>this.formData()</code>. Get form data as object.</li>
    <li>Features: form helper - <code>this.onSubmit()</code>. If present, auto bind form and get form data as object</li>
    <li>prefix params with <code>:</code> if you want to calculate attribute value. Same as in Vue, current example <code>:ping="..."</code></li>
    <li>Custom DOM tag name - <code>FORM</code> instead of default <code>DIV</code></li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="form"
          id="html-form"
          file="./demo/fez/form.html"
          language="html"
          :action="applyChanges"
        >
          &lt;div class="flex">
  &lt;ui-form target="/api" :ping="updateFormData">
    &lt;p>
      &lt;input type="text" name="info" value="a dude" />
    &lt;/p>
    &lt;p>
      &lt;select name="num">
        &lt;option>one&lt;/option>
        &lt;option>two&lt;/option>
        &lt;option>three&lt;/option>
      &lt;/select>
    &lt;/p>
    &lt;p>
      &lt;label>&lt;input type="radio" name="name" value="Jakov" /> Jakov&lt;/label>
      &lt;label>&lt;input type="radio" name="name" value="Vid" /> Vid&lt;/label>
      &lt;label>&lt;input type="radio" name="name" value="Dino" /> Dino&lt;/label>
    &lt;/p>
    &lt;p>
      &lt;button>Submit&lt;/button>
    &lt;/p>
  &lt;/ui-form>

  &lt;ui-form target="/api" :ping="updateFormData">
    &lt;p>
      &lt;select name="num">
        &lt;option>uno&lt;/option>
        &lt;option>due&lt;/option>
        &lt;option>tres&lt;/option>
      &lt;/select>
    &lt;/p>
    &lt;p>
      &lt;button>Submit&lt;/button>
    &lt;/p>
  &lt;/ui-form>
&lt;/div>

&lt;pre id="form-data">&lt;/pre>

&lt;script>
  function updateFormData(obj) {
    document.getElementById('form-data').textContent += JSON.stringify(obj) + "\n"
  }
&lt;/script>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-form"
          file="./demo/fez/form.fez"
          name="form"
          :action="applyChanges"
        >
          &lt;template fez="ui-form">
  &lt;script>
    NAME = 'form'
  
    // if you define onSubmit, you will get submited form data object
    // and event.preventDefault will allready be applied
    onSubmit(data) {
      this.props.ping(data)
    }
  &lt;/script>
  
  &lt;style>
    border: 2px solid green;
    border-radius: 5px;
    padding: 15px;
    margin: 15px 0;
    background-color: #efe;
  
    label {
      display: block;
      cursor: pointer;
      margin-bottom: 5px;
    }
  
    select option {
      font-size: 16px;
    }
  &lt;/style>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-form">
  <script>
    NAME = 'form'
  
    // if you define onSubmit, you will get submited form data object
    // and event.preventDefault will allready be applied
    onSubmit(data) {
      this.props.ping(data)
    }
  </script>
  
  <style>
    border: 2px solid green;
    border-radius: 5px;
    padding: 15px;
    margin: 15px 0;
    background-color: #efe;
  
    label {
      display: block;
      cursor: pointer;
      margin-bottom: 5px;
    }
  
    select option {
      font-size: 16px;
    }
  </style>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('icon')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-icon
    </h3>

    <div id="body-icon" style="padding-bottom: 20px;">
      <input
  type="range" min="24" max="100" class="slider" id="icon-range"
  oninput="Fez('#icon-blue').setSize(this.value)"
/>

&sdot;

<span onclick="if (event.target.tagName === 'BUTTON') Fez('#icon-blue').attr('color', event.target.textContent)">
  <button>red</button>
  <button>blue</button>
  <button>green</button>
</span>

<br /><br />

<ui-icon name="home"></ui-icon>
<ui-icon
  id="icon-blue"
  name="settings"
  color="blue"
  onclick="alert(this.fez.props.color)"
  :size="document.getElementById('icon-range').value"
></ui-icon>
<ui-icon color="red">delete</ui-icon>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: component to component communication</li>
    <li>evaluate value of a attribute if prefixed with column <code>:</code> (in this example <code>:size=</code></li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="icon"
          id="html-icon"
          file="./demo/fez/icon.html"
          language="html"
          :action="applyChanges"
        >
          &lt;input
  type="range" min="24" max="100" class="slider" id="icon-range"
  oninput="Fez('#icon-blue').setSize(this.value)"
/>

&sdot;

&lt;span onclick="if (event.target.tagName === 'BUTTON') Fez('#icon-blue').attr('color', event.target.textContent)">
  &lt;button>red&lt;/button>
  &lt;button>blue&lt;/button>
  &lt;button>green&lt;/button>
&lt;/span>

&lt;br />&lt;br />

&lt;ui-icon name="home">&lt;/ui-icon>
&lt;ui-icon
  id="icon-blue"
  name="settings"
  color="blue"
  onclick="alert(this.fez.props.color)"
  :size="document.getElementById('icon-range').value"
>&lt;/ui-icon>
&lt;ui-icon color="red">delete&lt;/ui-icon>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-icon"
          file="./demo/fez/icon.fez"
          name="icon"
          :action="applyChanges"
        >
          &lt;template fez="ui-icon">
  &lt;script>
    // everything before class gets executed in component registration
    if (!document.querySelector('link[href*="Material+Symbols+Outlined"]')) {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = 'https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200'
      document.head.appendChild(link)
    }
  
    class {
      NAME = 'span'
  
      setSize(size) {
        this.root.style.fontSize = `${parseInt(size)}px`
      }
  
      onPropsChange(name, value) {
        if (name == 'color') {
          this.root.style.color = value
        }
  
        if (name == 'size') {
          this.setSize(value)
        }
      }
  
      connect(props) {
        this.copy('onclick')
  
        const icon = props.name || this.root.innerHTML.trim()
        this.color = props.color || '#00'
        this.root.classList.add('material-symbols-outlined')
        this.root.innerHTML = icon
      }
    }
  &lt;/script>
  
  &lt;style>
    &.material-symbols-outlined {
      font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24
    }
  &lt;/style>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-icon">
  <script>
    // everything before class gets executed in component registration
    if (!document.querySelector('link[href*="Material+Symbols+Outlined"]')) {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = 'https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200'
      document.head.appendChild(link)
    }
  
    class {
      NAME = 'span'
  
      setSize(size) {
        this.root.style.fontSize = `${parseInt(size)}px`
      }
  
      onPropsChange(name, value) {
        if (name == 'color') {
          this.root.style.color = value
        }
  
        if (name == 'size') {
          this.setSize(value)
        }
      }
  
      connect(props) {
        this.copy('onclick')
  
        const icon = props.name || this.root.innerHTML.trim()
        this.color = props.color || '#00'
        this.root.classList.add('material-symbols-outlined')
        this.root.innerHTML = icon
      }
    }
  </script>
  
  <style>
    &.material-symbols-outlined {
      font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24
    }
  </style>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('markdown')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-markdown
    </h3>

    <div id="body-markdown" style="padding-bottom: 20px;">
      <ui-markdown>
### Hi

I am **markdown** from Fez custom component called `<ui-markdown>`, created inline in HTML.

* Fez is **too simple** to be true!
* `index.html` SPA
* New way to write web apps, without the bloat.
* See this example on [JSbin](https://jsbin.com/dopuram/edit?html,output)
</ui-markdown>

<h3>I am regular HTML</h3>

<ui-markdown>`Fez` md **again!** :)</ui-markdown>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: <code>Fez.getScript(src, attr, callback)</code> that will insert <code>script</code> css in <code>head</code></li>
    <li>Features: <code>Fez.untilTrue()</code> to initialize component when all files are loaded.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="markdown"
          id="html-markdown"
          file="./demo/fez/markdown.html"
          language="html"
          :action="applyChanges"
        >
          &lt;ui-markdown>
### Hi

I am **markdown** from Fez custom component called `&lt;ui-markdown>`, created inline in HTML.

* Fez is **too simple** to be true!
* `index.html` SPA
* New way to write web apps, without the bloat.
* See this example on [JSbin](https://jsbin.com/dopuram/edit?html,output)
&lt;/ui-markdown>

&lt;h3>I am regular HTML&lt;/h3>

&lt;ui-markdown>`Fez` md **again!** :)&lt;/ui-markdown>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-markdown"
          file="./demo/fez/markdown.fez"
          name="markdown"
          :action="applyChanges"
        >
          &lt;template fez="ui-markdown">
  &lt;script>
    Fez.getScript('https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js')
  
    class {
      connect(props) {
        let text = props.html || this.root.innerHTML;
  
        this.root.classList.add('markdown');
  
        Fez.untilTrue(() => {
          if (window.marked) {
            text = window.marked(text)
            this.root.innerHTML = text;
            return true
          }
        });
      }
    }
  &lt;/script>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-markdown">
  <script>
    Fez.getScript('https://cdnjs.cloudflare.com/ajax/libs/marked/2.1.3/marked.min.js')
  
    class {
      connect(props) {
        let text = props.html || this.root.innerHTML;
  
        this.root.classList.add('markdown');
  
        Fez.untilTrue(() => {
          if (window.marked) {
            text = window.marked(text)
            this.root.innerHTML = text;
            return true
          }
        });
      }
    }
  </script>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('pub-sub')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-pub-sub
    </h3>

    <div id="body-pub-sub" style="padding-bottom: 20px;">
      <div class="info">
  <ul>
  <li>Features: publish &lt;> subscribe mechanism. Auto disconnect on node destroy.</li>
  <li>Direct Fez component creation via <code>Fez(tagName, class { ... })</code></li>
  </ul>
</div>

<button onclick="Fez.publish('ping', Math.random())">ping from anywhere</button>
&sdot;
Fast ping:
<button onclick="
  clearInterval(window.fastPing);
  window.fastPing = setInterval(()=>Fez.publish('ping', Math.random()), 10);"
>START</button>
&sdot;
<button onclick="clearInterval(window.fastPing)">END</button>

<ui-pubsub>
  <h4>listener 1</h4>
  <p class="target"></p>
</ui-pubsub>

<ui-pubsub>
  <h4>listener 2</h4>
  <b class="target"></b>
</ui-pubsub>

<ui-pubsub>
  <h4>listener 3</h4>
  Foo: <span class="target"></span>
</ui-pubsub>

<template id="pubsub-t">
  <ui-pubsub>
    Dynamic listener:
    <button onclick="Fez(this).root.remove()">&times;</button>
    &sdot;
    <span class="target"></span>
  </ui-pubsub>
</template>

<br />
<button onclick="this.insertAdjacentHTML('afterend', document.getElementById('pubsub-t').innerHTML)">add listener</button>

<script>
  Fez('ui-pubsub', class {
    update (info) {
      this.target.innerHTML = info
    }

    connect() {
      this.target = this.find('.target')
      this.subscribe('ping', this.update)
      this.update('waiting for a ping...')
    }
  })

  setInterval(()=>Fez.publish('ping', Math.random()), 5000)
</script>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <style>
  .fez-ui-pubsub { margin-top: 10px; }
</style>
      </div>
      <div title="HTML">
        <ui-editor
          name="pub-sub"
          id="html-pub-sub"
          file="./demo/fez/pub-sub.html"
          language="html"
          :action="applyChanges"
        >
          &lt;div class="info">
  &lt;ul>
  &lt;li>Features: publish &lt;> subscribe mechanism. Auto disconnect on node destroy.&lt;/li>
  &lt;li>Direct Fez component creation via &lt;code>Fez(tagName, class { ... })&lt;/code>&lt;/li>
  &lt;/ul>
&lt;/div>

&lt;button onclick="Fez.publish('ping', Math.random())">ping from anywhere&lt;/button>
&sdot;
Fast ping:
&lt;button onclick="
  clearInterval(window.fastPing);
  window.fastPing = setInterval(()=>Fez.publish('ping', Math.random()), 10);"
>START&lt;/button>
&sdot;
&lt;button onclick="clearInterval(window.fastPing)">END&lt;/button>

&lt;ui-pubsub>
  &lt;h4>listener 1&lt;/h4>
  &lt;p class="target">&lt;/p>
&lt;/ui-pubsub>

&lt;ui-pubsub>
  &lt;h4>listener 2&lt;/h4>
  &lt;b class="target">&lt;/b>
&lt;/ui-pubsub>

&lt;ui-pubsub>
  &lt;h4>listener 3&lt;/h4>
  Foo: &lt;span class="target">&lt;/span>
&lt;/ui-pubsub>

&lt;template id="pubsub-t">
  &lt;ui-pubsub>
    Dynamic listener:
    &lt;button onclick="Fez(this).root.remove()">&times;&lt;/button>
    &sdot;
    &lt;span class="target">&lt;/span>
  &lt;/ui-pubsub>
&lt;/template>

&lt;br />
&lt;button onclick="this.insertAdjacentHTML('afterend', document.getElementById('pubsub-t').innerHTML)">add listener&lt;/button>

&lt;script>
  Fez('ui-pubsub', class {
    update (info) {
      this.target.innerHTML = info
    }

    connect() {
      this.target = this.find('.target')
      this.subscribe('ping', this.update)
      this.update('waiting for a ping...')
    }
  })

  setInterval(()=>Fez.publish('ping', Math.random()), 5000)
&lt;/script>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-pub-sub"
          file="./demo/fez/pub-sub.fez"
          name="pub-sub"
          :action="applyChanges"
        >
          &lt;template fez="ui-pub-sub">
  &lt;--! defined in HTML block -->
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-pub-sub">
  <--! defined in HTML block -->
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('slider')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-slider
    </h3>

    <div id="body-slider" style="padding-bottom: 20px;">
      <style>
  .fez-c-slider {
    .fez-slot {
      > div {
         text-align: center;
      }
    }
  }

  div.img {
    img {
      width: 100%;
      max-height: 600px;
      object-fit: cover;
      border-radius: 8px;
    }
  }
</style>

<ui-slider>
  <div>
    <h1>Slide 1</h1>
    <div class="img">
      <img src="https://images.unsplash.com/photo-1737143765999-bd3be790ab4f?w=600" />
     </div>
  </div>
  <div>
    <h1>Slide 2</h1>
    <div class="img flex">
      <img src="https://images.unsplash.com/photo-1735767975829-71496633d499?w=600" />
      <img src="https://images.unsplash.com/photo-1736158064402-5b68c2cbcc77?w=600" />
    </div>
    <div style="width: 200px;  margin: 20px auto;">
      <ui-clock city="Slider!"></ui-clock>
    </div>
  </div>
  <div>
    <h1>Slide 3</h1>
    <div class="img">
      <img src="https://images.unsplash.com/photo-1737898415581-7dea57a1905b?w=600" />
     </div>
  </div>
  <div>
    <h1>Slide 4</h1>
    <div class="img">
      <img src="https://images.unsplash.com/photo-1736158064402-5b68c2cbcc77?w=600" />
    </div>
    <ul>
      <li>Add any HTML</li>
    </ul>
  </div>
  <div>
    <h1>Slide 5</h1>
    <div class="img">
      <img src="https://images.unsplash.com/photo-1736185669686-f302d6274f23?w=600" />
    </div>
  </div>
</ui-slider>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>sweet component with css animations :)</li>
    <li>Features: <code>this.find()</code> to find node in template, shortcut for <code>this.root.querySelector()</code></li>
    <li>Features: <code>this.beforeRender()</code> to prepare vars before render (clean alternative to svelte <code>$: {...}</code></li>
    <li>Features: <code>this.onResize()</code> to execute code on window resized. Auto cleared when node is removed.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="slider"
          id="html-slider"
          file="./demo/fez/slider.html"
          language="html"
          :action="applyChanges"
        >
          &lt;style>
  .fez-c-slider {
    .fez-slot {
      > div {
         text-align: center;
      }
    }
  }

  div.img {
    img {
      width: 100%;
      max-height: 600px;
      object-fit: cover;
      border-radius: 8px;
    }
  }
&lt;/style>

&lt;ui-slider>
  &lt;div>
    &lt;h1>Slide 1&lt;/h1>
    &lt;div class="img">
      &lt;img src="https://images.unsplash.com/photo-1737143765999-bd3be790ab4f?w=600" />
     &lt;/div>
  &lt;/div>
  &lt;div>
    &lt;h1>Slide 2&lt;/h1>
    &lt;div class="img flex">
      &lt;img src="https://images.unsplash.com/photo-1735767975829-71496633d499?w=600" />
      &lt;img src="https://images.unsplash.com/photo-1736158064402-5b68c2cbcc77?w=600" />
    &lt;/div>
    &lt;div style="width: 200px;  margin: 20px auto;">
      &lt;ui-clock city="Slider!">&lt;/ui-clock>
    &lt;/div>
  &lt;/div>
  &lt;div>
    &lt;h1>Slide 3&lt;/h1>
    &lt;div class="img">
      &lt;img src="https://images.unsplash.com/photo-1737898415581-7dea57a1905b?w=600" />
     &lt;/div>
  &lt;/div>
  &lt;div>
    &lt;h1>Slide 4&lt;/h1>
    &lt;div class="img">
      &lt;img src="https://images.unsplash.com/photo-1736158064402-5b68c2cbcc77?w=600" />
    &lt;/div>
    &lt;ul>
      &lt;li>Add any HTML&lt;/li>
    &lt;/ul>
  &lt;/div>
  &lt;div>
    &lt;h1>Slide 5&lt;/h1>
    &lt;div class="img">
      &lt;img src="https://images.unsplash.com/photo-1736185669686-f302d6274f23?w=600" />
    &lt;/div>
  &lt;/div>
&lt;/ui-slider>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-slider"
          file="./demo/fez/slider.fez"
          name="slider"
          :action="applyChanges"
        >
          &lt;template fez="ui-slider">
  &lt;script>
    cssVars() {
      return [
        `--arrow-width: ${this.arrowWidth}px`,
        `--offset: -${this.state.offset}px`,
      ]
    }
  
    setSlide(num) {
      this.state.slide = num
    }
  
    changeSlide(direction){
      this.state.slide += direction
  
      const slides = this.find('.fez-slot').querySelectorAll(":scope > div")
  
      if (this.state.slide &lt; 0) {
        this.state.slide = slides.length - 1
      } else if (!slides[this.state.slide]) {
        this.state.slide = 0
      }
    }
  
    beforeRender() {
      const node = this.find('.slot')
      if (node) {
        this.state.offset = node.getBoundingClientRect().width * this.state.slide
      }
    }
  
    connect() {
      this.arrowWidth = 70
      this.setSlide(0)
      this.onResize(this.render, 100)
    }
  
  &lt;/script>
  
  &lt;style>
    table.slides {
      width: 100%;
      table-layout: fixed;
  
      td {
        &.arrow {
          cursor: pointer;
          width: var(--arrow-width);
  
          div {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            color: #aaa;
            width: var(--arrow-width);
  
            span {
              transform: rotate(-90deg);
            }
          }
  
          &:hover span {
            color: #111;
          }
  
          &:nth-child(3) {
            span {
              transform: rotate(90deg) translateY(10px);
            }
          }
        }
  
        div.slot {
          overflow: hidden;
          display: flex;
          align-items: flex-start;
          max-width: 100%;
  
          .slot-parent {
            max-width: 100%;
            transition: transform 0.3s ease;
            transform: translateX(var(--offset));
  
            .fez-slot {
              display: flex;
  
              & > div {
                width: 100%;
                flex-shrink: 0;
              }
            }
          }
        }
      }
    }
  &lt;/style>
  
  &lt;table class="slides" style="{{ @cssVars().join(';') }}">
    &lt;tr>
      &lt;td class="arrow" onclick="@changeSlide(-1)">
        &lt;div>
          &lt;span>&#8679;&lt;/span>
        &lt;/div>
      &lt;/td>
      &lt;td>
        &lt;div class="slot">
          &lt;div class="slot-parent">
            &lt;slot />
          &lt;/div>
        &lt;/div>
      &lt;/td>
      &lt;td class="arrow" onclick="@changeSlide(1)">
        &lt;div>
          &lt;span>&#8679;&lt;/span>
        &lt;/div>
      &lt;/td>
    &lt;/tr>
  &lt;/table>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-slider">
  <script>
    cssVars() {
      return [
        `--arrow-width: ${this.arrowWidth}px`,
        `--offset: -${this.state.offset}px`,
      ]
    }
  
    setSlide(num) {
      this.state.slide = num
    }
  
    changeSlide(direction){
      this.state.slide += direction
  
      const slides = this.find('.fez-slot').querySelectorAll(":scope > div")
  
      if (this.state.slide < 0) {
        this.state.slide = slides.length - 1
      } else if (!slides[this.state.slide]) {
        this.state.slide = 0
      }
    }
  
    beforeRender() {
      const node = this.find('.slot')
      if (node) {
        this.state.offset = node.getBoundingClientRect().width * this.state.slide
      }
    }
  
    connect() {
      this.arrowWidth = 70
      this.setSlide(0)
      this.onResize(this.render, 100)
    }
  
  </script>
  
  <style>
    table.slides {
      width: 100%;
      table-layout: fixed;
  
      td {
        &.arrow {
          cursor: pointer;
          width: var(--arrow-width);
  
          div {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
            color: #aaa;
            width: var(--arrow-width);
  
            span {
              transform: rotate(-90deg);
            }
          }
  
          &:hover span {
            color: #111;
          }
  
          &:nth-child(3) {
            span {
              transform: rotate(90deg) translateY(10px);
            }
          }
        }
  
        div.slot {
          overflow: hidden;
          display: flex;
          align-items: flex-start;
          max-width: 100%;
  
          .slot-parent {
            max-width: 100%;
            transition: transform 0.3s ease;
            transform: translateX(var(--offset));
  
            .fez-slot {
              display: flex;
  
              & > div {
                width: 100%;
                flex-shrink: 0;
              }
            }
          }
        }
      }
    }
  </style>
  
  <table class="slides" style="{{ @cssVars().join(';') }}">
    <tr>
      <td class="arrow" onclick="@changeSlide(-1)">
        <div>
          <span>&#8679;</span>
        </div>
      </td>
      <td>
        <div class="slot">
          <div class="slot-parent">
            <slot />
          </div>
        </div>
      </td>
      <td class="arrow" onclick="@changeSlide(1)">
        <div>
          <span>&#8679;</span>
        </div>
      </td>
    </tr>
  </table>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('tabs')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-tabs
    </h3>

    <div id="body-tabs" style="padding-bottom: 20px;">
      <ui-tabs>
  <div title="Bar">
    <p>First tab</p>

    <br />

    <ui-tabs>
      <div title="Foo nested 2">First tab</div>
      <div title="Bar">
        <p>second tab</p>

        <ui-tabs>
          <div title="Foo nested 3">first tab</div>
          <div title="Bar nested 3">
            <p>second tab</p>
            <hr />
            <ui-clock></ui-clock>
          </div>
        </ui-tabs>
      </div>
    </ui-tabs>
  </div>
  <div title="Baz">
    <h4>image tab</h4>
    <img src="./demo/fez.png" />
  </div>
  <div title="Foo">
    Third tab
    <hr />
    <ui-clock></ui-clock>
  </div>
</ui-tabs>


    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: alternative node builder</li>
    <li>nested and recursive components (tabs in tabs in tabs)</li>
    <li><code>this.childNodes()</code> FEZ instance helper function, get all first level child nodes, excluding #text nodes.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="tabs"
          id="html-tabs"
          file="./demo/fez/tabs.html"
          language="html"
          :action="applyChanges"
        >
          &lt;ui-tabs>
  &lt;div title="Bar">
    &lt;p>First tab&lt;/p>

    &lt;br />

    &lt;ui-tabs>
      &lt;div title="Foo nested 2">First tab&lt;/div>
      &lt;div title="Bar">
        &lt;p>second tab&lt;/p>

        &lt;ui-tabs>
          &lt;div title="Foo nested 3">first tab&lt;/div>
          &lt;div title="Bar nested 3">
            &lt;p>second tab&lt;/p>
            &lt;hr />
            &lt;ui-clock>&lt;/ui-clock>
          &lt;/div>
        &lt;/ui-tabs>
      &lt;/div>
    &lt;/ui-tabs>
  &lt;/div>
  &lt;div title="Baz">
    &lt;h4>image tab&lt;/h4>
    &lt;img src="./demo/fez.png" />
  &lt;/div>
  &lt;div title="Foo">
    Third tab
    &lt;hr />
    &lt;ui-clock>&lt;/ui-clock>
  &lt;/div>
&lt;/ui-tabs>


        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-tabs"
          file="./demo/fez/tabs.fez"
          name="tabs"
          :action="applyChanges"
        >
          &lt;template fez="ui-tabs">
  &lt;script>
    activateNode(node) {
      // Remove active class from siblings
      Array.from(node.parentElement.children).forEach(child => {
        child.classList.remove('active')
      })
      node.classList.add('active')
    }
  
    activate(num) {
      this.active = parseInt(num)
      const header = this.root.querySelector('div.header')
      const target = header.children[num]
      this.activateNode(target)
      this.activateNode(this.tabs[num])
    }
  
    connect(props) {
      this.root.style.width = 'calc(100%)'
  
      const { n, activate } = this;
      this.tabs = this.childNodes()
      this.render([
        n('div.header', this.tabs.map((tab, index) =>
          n('span', tab.getAttribute('title'), { onclick: ()=> activate(index) })
        )),
        n('.body', '&lt;slot />')
      ]);
  
      this.activate(0)
    }
  &lt;/script>
  
  &lt;style>
    --tabs-border: 1px solid #ccc;
  
    max-width: calc(100%);
  
    .header {
      margin-bottom: -2px;
      position: relative;
      z-index: 1;
  
      & > span {
        border: var(--tabs-border);
        padding: 8px 15px;
        display: inline-block;
        border-radius: 8px 8px 0 0;
        margin-right: -1px;
        background: #eee;
        cursor: pointer;
  
        &.active {
          background-color: #fff;
          border-bottom: none;
        }
      }
    }
  
    .body {
      border: var(--tabs-border);
      padding: 8px 15px;
      background: #fff;
  
      & > div {
        display: none;
  
        &.active {
          display: block;
        }
      }
    }
  &lt;/style>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-tabs">
  <script>
    activateNode(node) {
      // Remove active class from siblings
      Array.from(node.parentElement.children).forEach(child => {
        child.classList.remove('active')
      })
      node.classList.add('active')
    }
  
    activate(num) {
      this.active = parseInt(num)
      const header = this.root.querySelector('div.header')
      const target = header.children[num]
      this.activateNode(target)
      this.activateNode(this.tabs[num])
    }
  
    connect(props) {
      this.root.style.width = 'calc(100%)'
  
      const { n, activate } = this;
      this.tabs = this.childNodes()
      this.render([
        n('div.header', this.tabs.map((tab, index) =>
          n('span', tab.getAttribute('title'), { onclick: ()=> activate(index) })
        )),
        n('.body', '<slot />')
      ]);
  
      this.activate(0)
    }
  </script>
  
  <style>
    --tabs-border: 1px solid #ccc;
  
    max-width: calc(100%);
  
    .header {
      margin-bottom: -2px;
      position: relative;
      z-index: 1;
  
      & > span {
        border: var(--tabs-border);
        padding: 8px 15px;
        display: inline-block;
        border-radius: 8px 8px 0 0;
        margin-right: -1px;
        background: #eee;
        cursor: pointer;
  
        &.active {
          background-color: #fff;
          border-bottom: none;
        }
      }
    }
  
    .body {
      border: var(--tabs-border);
      padding: 8px 15px;
      background: #fff;
  
      & > div {
        display: none;
  
        &.active {
          display: block;
        }
      }
    }
  </style>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('time')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-time
    </h3>

    <div id="body-time" style="padding-bottom: 20px;">
      <ui-time city="Zagreb">
  <ul>
    <li>
      Slot state preservation demo: &nbsp;
      <b class="color-name"></b>
    </li>
  </ul>
</ui-time>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: slots - preserves original slot (fez tag innerHTML) on re-render</li>
    <li>
      global and local css. If <code>:fez { ... }</code> is present, anything inside is local, anything outside is global.
      If no class <code>:fez</code> is present, style is considered local.
      </li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="time"
          id="html-time"
          file="./demo/fez/time.html"
          language="html"
          :action="applyChanges"
        >
          &lt;ui-time city="Zagreb">
  &lt;ul>
    &lt;li>
      Slot state preservation demo: &nbsp;
      &lt;b class="color-name">&lt;/b>
    &lt;/li>
  &lt;/ul>
&lt;/ui-time>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-time"
          file="./demo/fez/time.fez"
          name="time"
          :action="applyChanges"
        >
          &lt;template fez="ui-time">
  &lt;script>
    NAME = 'div'
  
    getRandomColor() {
      const colors = ['red', 'blue', 'green', 'teal', 'black', 'magenta', 'orange', 'lightblue']
      return colors[Math.floor(Math.random() * colors.length)]
    }
  
    setRandomColor() {
      const color = this.getRandomColor()
      // this.find('.color-name').innerHTML = color
      this.root.querySelector('.color-name').innerHTML = color
      this.root.style.borderColor = color
    }
  
    getTime() {
      return (new Date()).getTime()
    }
  
    setTime() {
      this.val('.time', this.getTime())
    }
  
    afterRender() {
      this.setTime()
    }
  
    connect() {
      this.setRandomColor()
    }
  &lt;/script>
  
  &lt;style>
    /* styles are applied to body, so this becomes body background color */
    background-color: #f7f7f7;
  
    /* local component style applied to mounted component root */
    :fez {
      border: 10px solid green;
      border-radius: 10px;
      padding: 10px;
      background-color: #fff;
  
      button {
        font-size: 16px;
      }
    }
  &lt;/style>
  
  &lt;p>Param city: {{ @props.city }}&lt;/p>
  &lt;p>Time now: &lt;span class="time">&lt;/span>&lt;/p>
  &lt;p>Random num: &lt;span>{{ Math.random() }}&lt;/span>&lt;/p>
  &lt;button onclick="@setRandomColor()">random color&lt;/button>
  &sdot;
  &lt;button onclick="@render()">refresh & preserve slot&lt;/button>
  &lt;hr />
  
  &lt;slot>&lt;/slot>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-time">
  <script>
    NAME = 'div'
  
    getRandomColor() {
      const colors = ['red', 'blue', 'green', 'teal', 'black', 'magenta', 'orange', 'lightblue']
      return colors[Math.floor(Math.random() * colors.length)]
    }
  
    setRandomColor() {
      const color = this.getRandomColor()
      // this.find('.color-name').innerHTML = color
      this.root.querySelector('.color-name').innerHTML = color
      this.root.style.borderColor = color
    }
  
    getTime() {
      return (new Date()).getTime()
    }
  
    setTime() {
      this.val('.time', this.getTime())
    }
  
    afterRender() {
      this.setTime()
    }
  
    connect() {
      this.setRandomColor()
    }
  </script>
  
  <style>
    /* styles are applied to body, so this becomes body background color */
    background-color: #f7f7f7;
  
    /* local component style applied to mounted component root */
    :fez {
      border: 10px solid green;
      border-radius: 10px;
      padding: 10px;
      background-color: #fff;
  
      button {
        font-size: 16px;
      }
    }
  </style>
  
  <p>Param city: {{ @props.city }}</p>
  <p>Time now: <span class="time"></span></p>
  <p>Random num: <span>{{ Math.random() }}</span></p>
  <button onclick="@setRandomColor()">random color</button>
  &sdot;
  <button onclick="@render()">refresh & preserve slot</button>
  <hr />
  
  <slot></slot>
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('toast')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-toast
    </h3>

    <div id="body-toast" style="padding-bottom: 20px;">
      <form onsubmit="showToast(this); return false">
  <input type="text" name="toast" />
  <button class="btn">Show info</button>
</form>

<br />

<button onclick="Toast.info('Hi')">Trigger info</button>
<button onclick="Toast.error('Graaa')">Trigger error</button>

<script>
  function showToast(form) {
    let input = form.querySelector('input')
    Toast.info(input.value)
    input.value = ''
  }
</script>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>Features: class header that gets executed on component initializer.</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="toast"
          id="html-toast"
          file="./demo/fez/toast.html"
          language="html"
          :action="applyChanges"
        >
          &lt;form onsubmit="showToast(this); return false">
  &lt;input type="text" name="toast" />
  &lt;button class="btn">Show info&lt;/button>
&lt;/form>

&lt;br />

&lt;button onclick="Toast.info('Hi')">Trigger info&lt;/button>
&lt;button onclick="Toast.error('Graaa')">Trigger error&lt;/button>

&lt;script>
  function showToast(form) {
    let input = form.querySelector('input')
    Toast.info(input.value)
    input.value = ''
  }
&lt;/script>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-toast"
          file="./demo/fez/toast.fez"
          name="toast"
          :action="applyChanges"
        >
          &lt;template fez="ui-toast">
  &lt;script>
    // helper function
    window.Toast = {
      info: (text, klass) => {
        Fez('#ui-toast').info(text, klass)
      },
  
      error: (text) => {
        Toast.info(text, 'error')
      }
    }
  
    // auto init
    document.body.insertAdjacentHTML('beforeend', '&lt;ui-toast id="ui-toast">&lt;/ui-toast>')
  
    class {
      info(text, klass)  {
        const node = document.createElement('div')
        node.className = `toast ${klass || 'info'}`
        node.innerHTML = text
        this.find('.parent').prepend(node)
  
        setTimeout(()=>{
          node.classList.add('leave')
          setTimeout(()=>node.remove(), 2000)
        }, 4000)
      }
    }
  &lt;/script>
  &lt;style>
    .parent {
      width: 300px;
      position: fixed;
      top: 20px;
      right: 20px;
  
      div.toast {
        padding: 10px 20px;
        background-color: #fff;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        animation: dropIn 0.5s ease-out;
  
        &.leave {
          animation: dropOut 0.3s ease forwards;
        }
  
        &.info {
          border: 1px solid lch(50% 50 140);;
          background-color: lch(90% 50 140);
        }
  
        &.error {
          border: 1px solid lch(50% 50 350);;
          background-color: lch(90% 50 350);
        }
      }
    }
  
    @keyframes dropIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  
    @keyframes dropOut {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(20px);
      }
    }
  &lt;/style>
  
  &lt;div class="parent">&lt;/div>
  
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-toast">
  <script>
    // helper function
    window.Toast = {
      info: (text, klass) => {
        Fez('#ui-toast').info(text, klass)
      },
  
      error: (text) => {
        Toast.info(text, 'error')
      }
    }
  
    // auto init
    document.body.insertAdjacentHTML('beforeend', '<ui-toast id="ui-toast"></ui-toast>')
  
    class {
      info(text, klass)  {
        const node = document.createElement('div')
        node.className = `toast ${klass || 'info'}`
        node.innerHTML = text
        this.find('.parent').prepend(node)
  
        setTimeout(()=>{
          node.classList.add('leave')
          setTimeout(()=>node.remove(), 2000)
        }, 4000)
      }
    }
  </script>
  <style>
    .parent {
      width: 300px;
      position: fixed;
      top: 20px;
      right: 20px;
  
      div.toast {
        padding: 10px 20px;
        background-color: #fff;
        margin-bottom: 20px;
        border-radius: 10px;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        animation: dropIn 0.5s ease-out;
  
        &.leave {
          animation: dropOut 0.3s ease forwards;
        }
  
        &.info {
          border: 1px solid lch(50% 50 140);;
          background-color: lch(90% 50 140);
        }
  
        &.error {
          border: 1px solid lch(50% 50 350);;
          background-color: lch(90% 50 350);
        }
      }
    }
  
    @keyframes dropIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  
    @keyframes dropOut {
      from {
        opacity: 1;
        transform: translateY(0);
      }
      to {
        opacity: 0;
        transform: translateY(20px);
      }
    }
  </style>
  
  <div class="parent"></div>
  
  </template>

    
      

<div class="flex" style="border-top: 1px solid #ccc; margin-bottom: 50px;">
  <div style="margin-top: 10px;">
    <small style="float: right;" onclick="openCodePen('todo')">open in CodePen</small>
    <h3 style="margin-top: 0;">
      Demo: ui-todo
    </h3>

    <div id="body-todo" style="padding-bottom: 20px;">
      <ui-todo></ui-todo>

    </div>
  </div>
  <div style="margin-top: 20px; max-width: 690px;">
    <ui-tabs>
      <div title="Info" active="true">
        <div class="info">
  <ul>
    <li>fully <b>reactive state</b></li>
    <li>Features: <code>fez-bind</code> - two way binding of input element</li>
    <li>Features: <code>fez-use</code> - when node is added to dom, call described function and pass node as reference (inspired by Svelte)</li>
  </ul>
</div>
      </div>
      <div title="HTML">
        <ui-editor
          name="todo"
          id="html-todo"
          file="./demo/fez/todo.html"
          language="html"
          :action="applyChanges"
        >
          &lt;ui-todo>&lt;/ui-todo>

        </ui-editor>
      </div>
      <div title="Fez component">
        <ui-editor
          id="code-ui-todo"
          file="./demo/fez/todo.fez"
          name="todo"
          :action="applyChanges"
        >
          &lt;template fez="ui-todo">
  &lt;script>
    clearCompleted() {
      this.state.tasks = this.state.tasks.filter((t) => !t.done)
    }
  
    removeTask(index) {
      this.state.tasks = this.state.tasks.filter((_, i) => i !== index);
    }
  
    addTask() {
      // no need to force update template, this is automatic because we are using reactiveStore()
      this.counter ||= 0
      this.state.tasks.push({
        name: `new task ${++this.counter}`,
        done: false,
        animate: true
      })
    }
  
    animate(node) {
      // same as in Svelte, uf you define fez-use="methodName", method will be called when node is added to dom.
      // in this case, we animate show new node
  
      node.style.display = 'block'
      node.style.transition = 'height 200ms, opacity 200ms'
      node.style.height = '33px'
      node.style.opacity = '1'
      
      setTimeout(() => {
        delete this.state.tasks[this.state.tasks.length-1].animate
        node.style.height = 'auto'
        node.style.transition = ''
      }, 200)
    }
  
    connect() {
      this.state.tasks = [
        {name: 'First task', done: false},
        {name: 'Second task', done: false},
        {name: 'Third task', done: true },
      ]
    }
  &lt;/script>
  
  &lt;h3>Tasks&lt;/h3>
  {{#if !@state.tasks[0] }}
    &lt;p>No tasks found&lt;/p>
  {{/if}}
  
  {{#for task, index in @state.tasks}}
    {{#if task.animate}} &lt;!-- this is fine because this is string templating -->
      &lt;p fez-use="animate" style="display: none; height: 0px; opacity: 0;">
    {{:else}}
      &lt;p>
    {{/if}}
      &lt;input
        type="text"
        fez-bind="state.tasks[{{index}}].name"
        style="{{ task.done ? 'background-color: #ccc;' : '' }}"
      />
      &sdot;
      &lt;input
        type="checkbox"
        fez-bind="state.tasks[{{index}}].done"
      />
      &sdot;
      &lt;button onclick="@removeTask({{ index }})">&times;&lt;/button>
    &lt;/p>
  {{/for}}
  &lt;p>
    &lt;button onclick="@addTask()">add task&lt;/button>
    &sdot;
    &lt;button onclick="@clearCompleted()">clear completed&lt;/button>
  &lt;/p>
  &lt;pre class="code">{{ JSON.stringify(this.state.tasks, null, 2) }}&lt;/pre>
  &lt;p>If you want to preserve state in templates, wrap content in "fez-slot"&lt;/p>
  &lt;p>Refresh: {{Math.random()}}&lt;/p>
  &lt;p class="fez-slot">
    Do not refresh: {{Math.random()}}.
  &lt;/p>
  &lt;/template>
        </ui-editor>
      </div>
    </ui-tabs>
  </div>
</div>

<template fez="ui-todo">
  <script>
    clearCompleted() {
      this.state.tasks = this.state.tasks.filter((t) => !t.done)
    }
  
    removeTask(index) {
      this.state.tasks = this.state.tasks.filter((_, i) => i !== index);
    }
  
    addTask() {
      // no need to force update template, this is automatic because we are using reactiveStore()
      this.counter ||= 0
      this.state.tasks.push({
        name: `new task ${++this.counter}`,
        done: false,
        animate: true
      })
    }
  
    animate(node) {
      // same as in Svelte, uf you define fez-use="methodName", method will be called when node is added to dom.
      // in this case, we animate show new node
  
      node.style.display = 'block'
      node.style.transition = 'height 200ms, opacity 200ms'
      node.style.height = '33px'
      node.style.opacity = '1'
      
      setTimeout(() => {
        delete this.state.tasks[this.state.tasks.length-1].animate
        node.style.height = 'auto'
        node.style.transition = ''
      }, 200)
    }
  
    connect() {
      this.state.tasks = [
        {name: 'First task', done: false},
        {name: 'Second task', done: false},
        {name: 'Third task', done: true },
      ]
    }
  </script>
  
  <h3>Tasks</h3>
  {{#if !@state.tasks[0] }}
    <p>No tasks found</p>
  {{/if}}
  
  {{#for task, index in @state.tasks}}
    {{#if task.animate}} <!-- this is fine because this is string templating -->
      <p fez-use="animate" style="display: none; height: 0px; opacity: 0;">
    {{:else}}
      <p>
    {{/if}}
      <input
        type="text"
        fez-bind="state.tasks[{{index}}].name"
        style="{{ task.done ? 'background-color: #ccc;' : '' }}"
      />
      &sdot;
      <input
        type="checkbox"
        fez-bind="state.tasks[{{index}}].done"
      />
      &sdot;
      <button onclick="@removeTask({{ index }})">&times;</button>
    </p>
  {{/for}}
  <p>
    <button onclick="@addTask()">add task</button>
    &sdot;
    <button onclick="@clearCompleted()">clear completed</button>
  </p>
  <pre class="code">{{ JSON.stringify(this.state.tasks, null, 2) }}</pre>
  <p>If you want to preserve state in templates, wrap content in "fez-slot"</p>
  <p>Refresh: {{Math.random()}}</p>
  <p class="fez-slot">
    Do not refresh: {{Math.random()}}.
  </p>
  </template>

    
  </div>

  <hr />

  <p class="center">
    Fez was created by <a href="https://github.com/dux/">@dux</a> in 2024.
  </p>

  <script>
    window.applyChanges = function(name) {
      const htmlString = Fez(`#code-ui-${name}`).getSource()
      const tempDiv = document.createElement('div')
      tempDiv.innerHTML = htmlString
      const node = tempDiv.firstElementChild
      Fez.compile( node )
      document.querySelector(`#body-${name}`).innerHTML = Fez(`#html-${name}`).getSource()
      Toast.info('HTML content updated.')
    }

    window.openCodePen = function(name) {
      let html = Fez(`#html-${name}`).getSource()
      let code = Fez(`#code-ui-${name}`).getSource()
      const body = [
        '<link rel="stylesheet" href="//cdn.simplecss.org/simple.css" />\n<scr'+'ipt src="//dux.github.io/fez/dist/fez.js"></scr'+'ipt>',
        `<!-- FEZ code start -->\n${code}\n<!-- FEZ code end -->`,
        `<!-- HTML code start -->\n${html}\n<!-- HTML code end -->`
      ]

      const css = `body {
  padding-top: 50px;
}
      `

      const data = {
        title: `Fez component - ${name}`,
        html: body.join("\n\n"),
        css: css,
        js: '',
        editors: "100" // 1=HTML, 0=CSS, 1=JS (open panels)
      };

      const form = document.createElement("form");
      form.method = "POST";
      form.action = "https://codepen.io/pen/define";
      form.target = "_blank";

      const input = document.createElement("input");
      input.type = "hidden";
      input.name = "data";
      input.value = JSON.stringify(data);

      form.appendChild(input);
      document.body.appendChild(form);
      form.submit();
      document.body.removeChild(form);
    }  </script>
</body>
</html>

